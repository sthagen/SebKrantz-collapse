<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Fast (Grouped, Weighted) N'th Element/Quantile for Matrix-Like Objects — fnth • collapse</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Fast (Grouped, Weighted) N'th Element/Quantile for Matrix-Like Objects — fnth"><meta property="og:description" content="fnth (column-wise) returns the n'th smallest element from a set of unsorted elements x corresponding to an integer index (n), or to a probability between 0 and 1. If n is passed as a probability, ties can be resolved using the lower, upper, or (default) average of the possible elements. These are discontinuous and fast methods to estimate a sample quantile."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.7.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" class="external-link">Blog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/collapse_R" class="external-link">
    <span class="fa fa-twitter"></span>

  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast (Grouped, Weighted) N'th Element/Quantile for Matrix-Like Objects</h1>

    <div class="hidden name"><code>fnth.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>fnth</code> (column-wise) returns the n'th smallest element from a set of unsorted elements <code>x</code> corresponding to an integer index (<code>n</code>), or to a probability between 0 and 1. If <code>n</code> is passed as a probability, ties can be resolved using the lower, upper, or (default) average of the possible elements. These are discontinuous and fast methods to estimate a sample quantile.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">fnth</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">0.5</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for default</span>
<span class="fu">fnth</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">0.5</span>, g <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, TRA <span class="op">=</span> <span class="cn">NULL</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>,
     use.g.names <span class="op">=</span> <span class="cn">TRUE</span>, ties <span class="op">=</span> <span class="st">"mean"</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for matrix</span>
<span class="fu">fnth</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">0.5</span>, g <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, TRA <span class="op">=</span> <span class="cn">NULL</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>,
     use.g.names <span class="op">=</span> <span class="cn">TRUE</span>, drop <span class="op">=</span> <span class="cn">TRUE</span>, ties <span class="op">=</span> <span class="st">"mean"</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for data.frame</span>
<span class="fu">fnth</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">0.5</span>, g <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, TRA <span class="op">=</span> <span class="cn">NULL</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>,
     use.g.names <span class="op">=</span> <span class="cn">TRUE</span>, drop <span class="op">=</span> <span class="cn">TRUE</span>, ties <span class="op">=</span> <span class="st">"mean"</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for grouped_df</span>
<span class="fu">fnth</span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">0.5</span>, w <span class="op">=</span> <span class="cn">NULL</span>, TRA <span class="op">=</span> <span class="cn">NULL</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>,
     use.g.names <span class="op">=</span> <span class="cn">FALSE</span>, keep.group_vars <span class="op">=</span> <span class="cn">TRUE</span>, keep.w <span class="op">=</span> <span class="cn">TRUE</span>,
     ties <span class="op">=</span> <span class="st">"mean"</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a numeric vector, matrix, data frame or grouped data frame (class 'grouped_df').</p></dd>
<dt>n</dt>
<dd><p>the element to return using a single integer index such that <code>1 &lt; n &lt; NROW(x)</code>, or a probability <code>0 &lt; n &lt; 1</code>. See Details.</p></dd>
<dt>g</dt>
<dd><p>a factor, <code><a href="GRP.html">GRP</a></code> object, atomic vector (internally converted to factor) or a list of vectors / factors (internally converted to a <code><a href="GRP.html">GRP</a></code> object) used to group <code>x</code>.</p></dd>
<dt>w</dt>
<dd><p>a numeric vector of (non-negative) weights, may contain missing values.</p></dd>
<dt>TRA</dt>
<dd><p>an integer or quoted operator indicating the transformation to perform:
1 - "replace_fill"     |     2 - "replace"     |     3 - "-"     |     4 - "-+"     |     5 - "/"     |     6 - "%"     |     7 - "+"     |     8 - "*"     |     9 - "%%"     |     10 - "-%%". See <code><a href="TRA.html">TRA</a></code>.</p></dd>
<dt>na.rm</dt>
<dd><p>logical. Skip missing values in <code>x</code>. Defaults to <code>TRUE</code> and implemented at very little computational cost. If <code>na.rm = FALSE</code> a <code>NA</code> is returned when encountered.</p></dd>
<dt>use.g.names</dt>
<dd><p>logical. Make group-names and add to the result as names (default method) or row-names (matrix and data frame methods). No row-names are generated for <em>data.table</em>'s.</p></dd>
<dt>ties</dt>
<dd><p>an integer or character string specifying the method to resolve ties between adjacent qualifying elements:</p><table class="table table"><tr><td><em> Int. </em></td><td></td><td><em> String </em></td><td></td><td><em> Description </em></td></tr><tr><td>1</td><td></td><td>"mean"</td><td></td><td>take the arithmetic mean of all qualifying elements.</td></tr><tr><td>2</td><td></td><td>"min"</td><td></td><td>take the smallest of the elements.</td></tr><tr><td>3</td><td></td><td>"max"</td><td></td><td>take the largest of the elements.</td></tr></table><p></p></dd>
<dt>drop</dt>
<dd><p><em>matrix and data.frame method:</em> Logical. <code>TRUE</code> drops dimensions and returns an atomic vector if <code>g = NULL</code> and <code>TRA = NULL</code>.</p></dd>
<dt>keep.group_vars</dt>
<dd><p><em>grouped_df method:</em> Logical. <code>FALSE</code> removes grouping variables after computation.</p></dd>
<dt>keep.w</dt>
<dd><p><em>grouped_df method:</em> Logical. Retain <code>sum</code> of weighting variable after computation (if contained in <code>grouped_df</code>).</p></dd>
<dt>...</dt>
<dd><p>arguments to be passed to or from other methods.</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This is an R port to <code>std::nth_element</code>, an efficient partial sorting algorithm in C++. It is also used to calculated the median (in fact the default <code>fnth(x, n = 0.5)</code> is identical to <code>fmedian(x)</code>, so see also the details for <code><a href="fmedian.html">fmedian</a></code>).</p>
<p><code>fnth</code> generalizes the principles of median value calculation to find arbitrary elements. It offers considerable flexibility by providing both simple order statistics and simple discontinuous quantile estimation. Regarding the former, setting <code>n</code> to an index between 1 and <code>NROW(x)</code> will return the n'th smallest element of <code>x</code>, about 2x faster than <code>sort(x, partial = n)[n]</code>. As to the latter, setting <code>n</code> to a probability between 0 and 1 will return the corresponding element of <code>x</code>, and resolve ties between multiple qualifying elements (such as when <code>n = 0.5</code> and <code>x</code> is even) using the arithmetic average <code>ties = "mean"</code>, or the smallest <code>ties = "min"</code> or largest <code>ties = "max"</code> of those elements.</p>
<p>If <code>n &gt; 1</code> is used and <code>x</code> contains missing values (and <code>na.rm = TRUE</code>, otherwise <code>NA</code> is returned), <code>n</code> is internally converted to a probability using <code>p = (n-1)/(NROW(x)-1)</code>, and that probability is applied to the set of complete elements (of each column if <code>x</code> is a matrix or data frame) to find the <code>as.integer(p*(fnobs(x)-1))+1L</code>'th element (which corresponds to option <code>ties = "min"</code>). Note that it is necessary to subtract and add 1 so that <code>n = 1</code> corresponds to <code>p = 0</code> and <code>n = NROW(x)</code> to <code>p = 1</code>. <!-- %So if \code{n &gt; 1} is used in the presence of missing values, and the default \code{ties = "mean"} is enabled, the resulting element could be the average of two elements. --></p>
<p>When using grouped computations (supplying a vector or list to <code>g</code> subdividing <code>x</code>) and <code>n &gt; 1</code> is used, it is transformed to a probability <code>p = (n-1)/(NROW(x)/ng-1)</code> (where <code>ng</code> contains the number of unique groups in <code>g</code>) and <code>ties = "min"</code> is used to sort out clashes. This could be useful for example to return the n'th smallest element of each group in a balanced panel, but with unequal group sizes it more intuitive to pass a probability to <code>n</code>.</p>
<p>If weights are used, the same principles apply as for weighted median calculation: A target partial sum of weights <code>p*sum(w)</code> is calculated, and the weighted n'th element is the element k such that all elements smaller than k have a sum of weights <code>&lt;= p*sum(w)</code>, and all elements larger than k have a sum of weights <code>&lt;= (1 - p)*sum(w)</code>. If the partial-sum of weights (<code>p*sum(w)</code>) is reached exactly for some element k, then (summing from the lower end) both k and k+1 would qualify as the weighted n'th element (and some possible additional elements with zero weights following k would also qualify). If <code>n &gt; 1</code>, the lowest of those elements is chosen (congruent with the unweighted behavior), <!-- %(ensuring that \code{fnth(x, n)}) and \code{fnth(x, n, w = rep(1, NROW(x)))}, always provide the same outcome) -->
but if <code>0 &lt; n &lt; 1</code>, the <code>ties</code> option regulates how to resolve such conflicts, yielding lower-weighted, upper-weighted or (default) average weighted n'th elements.</p>
<p>The weighted n'th element is computed using <code><a href="radixorder.html">radixorder</a></code> to first obtain an ordering of all elements, so it is considerably more computationally expensive than the unweighted version. With groups, the entire vector is also ordered, and the weighted n'th element is computed in a single ordered pass through the data (after calculating partial-group sums of the weights, skipping weights for which <code>x</code> is missing).</p>
<p>If <code>x</code> is a matrix or data frame, these computations are performed independently for each column. Column-attributes and overall attributes of a data frame are preserved (if <code>g</code> is used or <code>drop = FALSE</code>).</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    <p>The (<code>w</code> weighted) n'th element of <code>x</code>, grouped by <code>g</code>, or (if <code><a href="TRA.html">TRA</a></code> is used) <code>x</code> transformed by its n'th element, grouped by <code>g</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="fmean.html">fmean</a></code>, <code><a href="fmedian.html">fmedian</a></code>, <code><a href="fmode.html">fmode</a></code>, <a href="fast-statistical-functions.html">Fast Statistical Functions</a>, <a href="index.html">Collapse Overview</a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co">## default vector method</span></span>
<span class="r-in"><span class="va">mpg</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span></span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span><span class="op">)</span>                         <span class="co"># Simple nth element: Median (same as fmedian(mpg))</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 19.2</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">5</span><span class="op">)</span>                      <span class="co"># 5th smallest element</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 14.7</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">mpg</span>, partial <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>         <span class="co"># Same using base R, fnth is 2x faster.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 14.7</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span><span class="op">)</span>                   <span class="co"># Third quartile</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 22.8</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span>, w <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span><span class="op">)</span>    <span class="co"># Weighted third quartile: Weighted by hp</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 21</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span>, TRA <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>        <span class="co"># Simple transformation: Subtract third quartile</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  -1.8  -1.8   0.0  -1.4  -4.1  -4.7  -8.5   1.6   0.0  -3.6  -5.0  -6.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13]  -5.5  -7.6 -12.4 -12.4  -8.1   9.6   7.6  11.1  -1.3  -7.3  -7.6  -9.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25]  -3.6   4.5   3.2   7.6  -7.0  -3.1  -7.8  -1.4</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span>             <span class="co"># Grouped third quartile</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    4    6    8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30.4 21.0 16.1 </span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span>, <span class="va">mtcars</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">8</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>       <span class="co"># More groups..</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26.00 22.80 30.40 21.00 20.30 16.85 15.40 </span>
<span class="r-in"><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="GRP.html">GRP</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">vs</span> <span class="op">+</span> <span class="va">am</span><span class="op">)</span>       <span class="co"># Precomputing groups gives more speed !</span></span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span>, <span class="va">g</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26.00 22.80 30.40 21.00 20.30 16.85 15.40 </span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span>, <span class="va">g</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span><span class="op">)</span>           <span class="co"># Grouped weighted third quartile</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  26.0  22.8  30.4  21.0  19.2  16.4  15.8 </span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span>, <span class="va">g</span>, TRA <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span>           <span class="co"># Groupwise subtract third quartile</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  0.00  0.00 -7.60  1.10  1.85 -2.20 -2.55  1.60  0.00 -1.10 -2.50 -0.45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13]  0.45 -1.65 -6.45 -6.45 -2.15  2.00  0.00  3.50 -1.30 -1.35 -1.65 -3.55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25]  2.35 -3.10  0.00  0.00  0.40 -1.30 -0.40 -9.00</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mpg</span>, <span class="fl">0.75</span>, <span class="va">g</span>, <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span>, <span class="st">"-"</span><span class="op">)</span>      <span class="co"># Groupwise subtract weighted third quartile</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  0.0  0.0 -7.6  2.2  2.3 -1.1 -2.1  1.6  0.0  0.0 -1.4  0.0  0.9 -1.2 -6.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] -6.0 -1.7  2.0  0.0  3.5 -1.3 -0.9 -1.2 -3.1  2.8 -3.1  0.0  0.0  0.0 -1.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] -0.8 -9.0</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## data.frame method</span></span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mtcars</span>, <span class="fl">0.75</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    mpg    cyl   disp     hp   drat     wt   qsec     vs     am   gear   carb </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  22.80   8.00 334.00 180.00   3.92   3.65  18.90   1.00   1.00   4.00   4.00 </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">fnth</span><span class="op">(</span><span class="va">mtcars</span>, <span class="fl">0.75</span>, TRA <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp  hp  drat     wt  qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         -1.8  -2 -174 -70 -0.02 -1.030 -2.44 -1  0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     -1.8  -2 -174 -70 -0.02 -0.775 -1.88 -1  0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710         0.0  -4 -226 -87 -0.07 -1.330 -0.29  0  0    0   -3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    -1.4  -2  -76 -70 -0.84 -0.435  0.54  0 -1   -1   -3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout -4.1   0   26  -5 -0.77 -0.210 -1.88 -1 -1   -1   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant           -4.7  -2 -109 -75 -1.16 -0.190  1.32  0 -1   -1   -3</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mtcars</span>, <span class="fl">0.75</span>, <span class="va">g</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         mpg cyl  disp    hp drat   wt  qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 26.00   4 120.3  91.0 4.43 2.14 16.70  0  1    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.0 22.80   4 140.8  95.0 3.70 3.15 20.01  1  0    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.1 30.40   4  95.1  93.0 4.11 2.20 18.90  1  1    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.0.1 21.00   6 160.0 110.0 3.90 2.77 16.46  0  1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.1.0 20.30   6 241.5 123.0 3.92 3.45 19.83  1  0    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.0 16.85   8 420.0 222.5 3.18 4.66 17.71  0  0    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.1 15.40   8 326.0 299.5 3.88 3.37 14.55  0  1    5    6</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">cyl</span>, <span class="va">vs</span>, <span class="va">am</span><span class="op">)</span>, <span class="fl">0.75</span><span class="op">)</span>   <span class="co"># Another way of doing it..</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cyl vs am   mpg  disp    hp drat   wt  qsec gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   4  0  1 26.00 120.3  91.0 4.43 2.14 16.70    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   4  1  0 22.80 140.8  95.0 3.70 3.15 20.01    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   4  1  1 30.40  95.1  93.0 4.11 2.20 18.90    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   6  0  1 21.00 160.0 110.0 3.90 2.77 16.46    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   6  1  0 20.30 241.5 123.0 3.92 3.45 19.83    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   8  0  0 16.85 420.0 222.5 3.18 4.66 17.71    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   8  0  1 15.40 326.0 299.5 3.88 3.37 14.55    5    6</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">mtcars</span>, <span class="fl">0.75</span>, <span class="va">g</span>, use.g.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>   <span class="co"># No row-names generated</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     mpg cyl  disp    hp drat   wt  qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 26.00   4 120.3  91.0 4.43 2.14 16.70  0  1    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 22.80   4 140.8  95.0 3.70 3.15 20.01  1  0    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 30.40   4  95.1  93.0 4.11 2.20 18.90  1  1    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 21.00   6 160.0 110.0 3.90 2.77 16.46  0  1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 20.30   6 241.5 123.0 3.92 3.45 19.83  1  0    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 16.85   8 420.0 222.5 3.18 4.66 17.71  0  0    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 15.40   8 326.0 299.5 3.88 3.37 14.55  0  1    5    6</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## matrix method</span></span>
<span class="r-in"><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="quick-conversion.html">qM</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">m</span>, <span class="fl">0.75</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    mpg    cyl   disp     hp   drat     wt   qsec     vs     am   gear   carb </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  22.80   8.00 334.00 180.00   3.92   3.65  18.90   1.00   1.00   4.00   4.00 </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">fnth</span><span class="op">(</span><span class="va">m</span>, <span class="fl">0.75</span>, TRA <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    mpg cyl disp  hp  drat     wt  qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4         -1.8  -2 -174 -70 -0.02 -1.030 -2.44 -1  0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag     -1.8  -2 -174 -70 -0.02 -0.775 -1.88 -1  0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710         0.0  -4 -226 -87 -0.07 -1.330 -0.29  0  0    0   -3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive    -1.4  -2  -76 -70 -0.84 -0.435  0.54  0 -1   -1   -3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout -4.1   0   26  -5 -0.77 -0.210 -1.88 -1 -1   -1   -2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant           -4.7  -2 -109 -75 -1.16 -0.190  1.32  0 -1   -1   -3</span>
<span class="r-in"><span class="fu">fnth</span><span class="op">(</span><span class="va">m</span>, <span class="fl">0.75</span>, <span class="va">g</span><span class="op">)</span> <span class="co"># etc..</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         mpg cyl  disp    hp drat   wt  qsec vs am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.0.1 26.00   4 120.3  91.0 4.43 2.14 16.70  0  1    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.0 22.80   4 140.8  95.0 3.70 3.15 20.01  1  0    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1.1 30.40   4  95.1  93.0 4.11 2.20 18.90  1  1    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.0.1 21.00   6 160.0 110.0 3.90 2.77 16.46  0  1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6.1.0 20.30   6 241.5 123.0 3.92 3.45 19.83  1  0    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.0 16.85   8 420.0 222.5 3.18 4.66 17.71  0  0    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.0.1 15.40   8 326.0 299.5 3.88 3.37 14.55  0  1    5    6</span>
<span class="r-in"> </span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span class="r-in"><span class="co">## grouped_df method</span></span>
<span class="r-in"><span class="va">mtcars</span> |&gt; <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> |&gt; <span class="fu">fnth</span><span class="op">(</span><span class="fl">0.75</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 7 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cyl    vs    am   mpg  disp    hp  drat    wt  qsec  gear  carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     4     0     1  26   120.    91   4.43  2.14  16.7     5     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     4     1     0  22.8 141.    95   3.7   3.15  20.0     4     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     4     1     1  30.4  95.1   93   4.11  2.2   18.9     4     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     6     0     1  21   160    110   3.9   2.77  16.5     4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     6     1     0  20.3 242.   123   3.92  3.45  19.8     4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>     8     0     0  16.8 420    222.  3.18  4.66  17.7     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span>     8     0     1  15.4 326    300.  3.88  3.37  14.6     5     6</span>
<span class="r-in"><span class="va">mtcars</span> |&gt; <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> |&gt; <span class="fu">fnth</span><span class="op">(</span><span class="fl">0.75</span>, <span class="va">hp</span><span class="op">)</span>           <span class="co"># Weighted</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 7 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cyl    vs    am sum.hp   mpg  disp  drat    wt  qsec  gear  carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     4     0     1     91  26    120.  4.43  2.14  16.7     5     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     4     1     0    254  22.8  141.  3.92  3.15  22.9     4     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     4     1     1    564  30.4  108   4.11  2.32  18.9     4     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     6     0     1    395  21    160   3.9   2.88  17.0     5     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     6     1     0    461  19.2  225   3.92  3.44  19.4     4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>     8     0     0   <span style="text-decoration: underline;">2</span>330  16.4  440   3.21  5.25  17.8     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span>     8     0     1    599  15.8  351   4.22  3.57  14.6     5     8</span>
<span class="r-in"><span class="va">mtcars</span> |&gt; <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> |&gt; <span class="fu">fnth</span><span class="op">(</span><span class="fl">0.75</span><span class="op">)</span>              <span class="co"># Faster grouping!</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cyl vs am   mpg  disp    hp drat   wt  qsec gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   4  0  1 26.00 120.3  91.0 4.43 2.14 16.70    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   4  1  0 22.80 140.8  95.0 3.70 3.15 20.01    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   4  1  1 30.40  95.1  93.0 4.11 2.20 18.90    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   6  0  1 21.00 160.0 110.0 3.90 2.77 16.46    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   6  1  0 20.30 241.5 123.0 3.92 3.45 19.83    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   8  0  0 16.85 420.0 222.5 3.18 4.66 17.71    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   8  0  1 15.40 326.0 299.5 3.88 3.37 14.55    5    6</span>
<span class="r-in"><span class="va">mtcars</span> |&gt; <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> |&gt; <span class="fu">fnth</span><span class="op">(</span><span class="fl">0.75</span>, TRA <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span>   <span class="co"># Divide by third quartile</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     cyl vs am       mpg      disp        hp      drat        wt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4             6  0  1 1.0000000 1.0000000 1.0000000 1.0000000 0.9458484</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag         6  0  1 1.0000000 1.0000000 1.0000000 1.0000000 1.0379061</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710            4  1  1 0.7500000 1.1356467 1.0000000 0.9367397 1.0545455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive        6  1  0 1.0541872 1.0683230 0.8943089 0.7857143 0.9318841</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout     8  0  0 1.1097923 0.8571429 0.7865169 0.9905660 0.7381974</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant               6  1  0 0.8916256 0.9316770 0.8536585 0.7040816 1.0028986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360            8  0  0 0.8486647 0.8571429 1.1011236 1.0094340 0.7660944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D             4  1  0 1.0701754 1.0419034 0.6526316 0.9972973 1.0126984</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230              4  1  0 1.0000000 1.0000000 1.0000000 1.0594595 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280              6  1  0 0.9458128 0.6939959 1.0000000 1.0000000 0.9971014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C             6  1  0 0.8768473 0.6939959 1.0000000 1.0000000 0.9971014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE            8  0  0 0.9732938 0.6566667 0.8089888 0.9654088 0.8733906</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL            8  0  0 1.0267062 0.6566667 0.8089888 0.9654088 0.8004292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC           8  0  0 0.9020772 0.6566667 0.8089888 0.9654088 0.8111588</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood    8  0  0 0.6172107 1.1238095 0.9213483 0.9213836 1.1266094</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental   8  0  0 0.6172107 1.0952381 0.9662921 0.9433962 1.1639485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial     8  0  0 0.8724036 1.0476190 1.0337079 1.0157233 1.1469957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128              4  1  1 1.0657895 0.8275499 0.7096774 0.9927007 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic           4  1  1 1.0000000 0.7960042 0.5591398 1.1995134 0.7340909</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla        4  1  1 1.1151316 0.7476341 0.6989247 1.0267640 0.8340909</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona         4  1  0 0.9429825 0.8529830 1.0210526 1.0000000 0.7825397</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger      8  0  0 0.9198813 0.7571429 0.6741573 0.8679245 0.7553648</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin           8  0  0 0.9020772 0.7238095 0.6741573 0.9905660 0.7371245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28            8  0  0 0.7893175 0.8333333 1.1011236 1.1729560 0.8240343</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird      8  0  0 1.1394659 0.9523810 0.7865169 0.9685535 0.8251073</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9             4  1  1 0.8980263 0.8307045 0.7096774 0.9927007 0.8795455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2         4  0  1 1.0000000 1.0000000 1.0000000 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa          4  1  1 1.0000000 1.0000000 1.2150538 0.9172749 0.6877273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L        8  0  1 1.0259740 1.0766871 0.8814691 1.0876289 0.9406528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino          6  0  1 0.9380952 0.9062500 1.5909091 0.9282051 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora         8  0  1 0.9740260 0.9233129 1.1185309 0.9123711 1.0593472</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E            4  1  1 0.7039474 1.2723449 1.1720430 1.0000000 1.2636364</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          qsec gear      carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           1.0000000 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       1.0340219 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          0.9846561 1.00 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      0.9803328 0.75 0.2500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout   0.9610390 1.00 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             1.0196672 0.75 0.2500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360          0.8944099 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           0.9995002 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            1.1444278 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            0.9228442 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           0.9531014 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          0.9824958 1.00 0.7500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          0.9937888 1.00 0.7500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         1.0163749 1.00 0.7500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood  1.0152456 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental 1.0062112 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial   0.9836251 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            1.0301587 1.00 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         0.9798942 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      1.0529101 1.00 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       1.0000000 0.75 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    0.9525692 1.00 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         0.9768492 1.00 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28          0.8701299 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird    0.9627329 1.00 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           1.0000000 1.00 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       1.0000000 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        0.8941799 1.25 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      0.9965636 1.00 0.6666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        0.9416768 1.25 1.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       1.0034364 1.00 1.3333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          0.9841270 1.00 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Grouped by:  cyl, vs, am  [7 | 5 (3.8) 1-12] </span>
<span class="r-in"><span class="va">mtcars</span> |&gt; <span class="fu"><a href="GRP.html">fgroup_by</a></span><span class="op">(</span><span class="va">cyl</span>,<span class="va">vs</span>,<span class="va">am</span><span class="op">)</span> |&gt; <span class="fu"><a href="select_replace_vars.html">fselect</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">hp</span><span class="op">)</span> |&gt;     <span class="co"># Faster selecting</span></span>
<span class="r-in">      <span class="fu">fnth</span><span class="op">(</span><span class="fl">0.75</span>, <span class="va">hp</span>, <span class="st">"/"</span><span class="op">)</span>  <span class="co"># Divide mpg by its third weighted group-quartile, using hp as weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      hp       mpg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           110 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       110 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710           93 0.7500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      110 1.1145833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout   175 1.1402439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             105 0.9427083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360          245 0.8719512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D            62 1.0701754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230             95 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            123 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           123 0.9270833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          180 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          180 1.0548780</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         180 0.9268293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood  205 0.6341463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental 215 0.6341463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial   230 0.8963415</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128             66 1.0657895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic          52 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla       65 1.1151316</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona        97 0.9429825</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    150 0.9451220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         150 0.9268293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28          245 0.8109756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird    175 1.1707317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9            66 0.8980263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2        91 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        113 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      264 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        175 0.9380952</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       335 0.9493671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          109 0.7039474</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Grouped by:  cyl, vs, am  [7 | 5 (3.8) 1-12] </span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>






  </body></html>

