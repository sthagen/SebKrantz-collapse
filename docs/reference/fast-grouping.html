<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head><link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fast Grouping and Ordering — A2-fast-grouping-ordering • collapse</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fast Grouping and Ordering — A2-fast-grouping-ordering" />
<meta property="og:description" content="collapse provides the following functions to efficiently group and order data:
radixorder, provides fast radix-ordering through direct access to the method order(..., method = &quot;radix&quot;), as well as the possibility to return some attributes very useful for grouping data and finding unique elements. radixorderv exists as a programmers alternative. The function roworder(v) efficiently reorders a data frame based on an ordering computed by radixorderv. 

GRP creates collapse grouping objects of class 'GRP' based on radixorderv. 'GRP' objects form the central building block for grouped operations and programming in collapse and are very efficient inputs to all collapse functions supporting grouped operations. A 'GRP' object provides information about (1) the number of groups, (2) which rows belong to which group, (3) the group sizes, (4) the unique groups, (5) the variables used for grouping, (6) whether the grouping and initial inputs were ordered and (7) (optionally) the output from radixorder containing the ordering vector with group starts and maximum group size attributes.
fgroup_by provides a fast replacement for dplyr::group_by, creating a grouped data frame with a 'GRP' object attached. This grouped data frame can however only be used for grouped operations using collapse fast functions. 
funique is a faster version of unique. The data frame method also allows selecting unique rows according to a subset of the columns.
qF, shorthand for 'quick-factor' implements very fast (ordered) factor generation from atomic vectors using either radix ordering method = &quot;radix&quot; or index hashing method = &quot;hash&quot;. Factors can also be used for efficient grouped programming with collapse functions, especially if they are generated using qF(x, na.exclude = FALSE) which assigns a level to missing values and attaches a class 'na.included' ensuring that no additional missing value checks are executed by collapse functions.
qG, shorthand for 'quick-group', generates a kind of factor-light without the levels attribute but instead an attribute providing the number of levels. Optionally the levels / groups can be attached, but without converting them to character. Objects have a class 'qG', which is also recognized in the collapse ecosystem.
fdroplevels is a substantially faster replacement for droplevels.
finteraction is a fast alternative to interaction implemented as a wrapper around as.factor_GRP(GRP(...)). It can be used to generate a factor from multiple vectors, factors or a list of vectors / factors. Unused factor levels are always dropped.
groupid is a generalization of data.table::rleid providing a run-length type group-id from atomic vectors. It is generalization as it also supports passing an ordering vector and skipping missing values. For example qF and qG with method = &quot;radix&quot; are essentially implemented using groupid(x, radixorder(x)).
seqid is a specialized function which creates a group-id from sequences of integer values. For any ordinary panel dataset groupid(id, order(id, time)) and seqid(time, order(id, time)) provide the same id variable. seqid is especially useful for identifying discontinuities in time-sequences and can help to perform operations such as iterated differences on such data.

" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" target="_blank">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/collapse_R" target="_blank">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" target="_blank">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast Grouping and Ordering</h1>
    
    <div class="hidden name"><code>fast-grouping.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><em>collapse</em> provides the following functions to efficiently group and order data:</p><ul>
<li><p><code><a href='radixorder.html'>radixorder</a></code>, provides fast radix-ordering through direct access to the method <code><a href='https://rdrr.io/r/base/order.html'>order(..., method = "radix")</a></code>, as well as the possibility to return some attributes very useful for grouping data and finding unique elements. <code><a href='radixorder.html'>radixorderv</a></code> exists as a programmers alternative. The function <code><a href='roworder.html'>roworder(v)</a></code> efficiently reorders a data frame based on an ordering computed by <code><a href='radixorder.html'>radixorderv</a></code>. <!-- %The source code for both \code{\link{radixorder}} and \code{\link{order(\dots, method = "radix")}, comes from \code{data.table:::forder}. -->
<!-- %\code{\link{radixorder}} was modified to optionally return either a vector of group starts, a vector of group sizes, or both as an attribute, and also an attribute providing the size of the largest group and a logical statement on whether the input was already ordered. The function \code{\link{radixorderv}} exists as a programmers alternative. --></p></li>
<li><p><code><a href='GRP, fgroup_by.html'>GRP</a></code> creates <em>collapse</em> grouping objects of class 'GRP' based on <code><a href='radixorder.html'>radixorderv</a></code>. 'GRP' objects form the central building block for grouped operations and programming in <em>collapse</em> and are very efficient inputs to all <em>collapse</em> functions supporting grouped operations. A 'GRP' object provides information about (1) the number of groups, (2) which rows belong to which group, (3) the group sizes, (4) the unique groups, (5) the variables used for grouping, (6) whether the grouping and initial inputs were ordered and (7) (optionally) the output from <code><a href='radixorder.html'>radixorder</a></code> containing the ordering vector with group starts and maximum group size attributes.</p></li>
<li><p><code><a href='GRP, fgroup_by.html'>fgroup_by</a></code> provides a fast replacement for <code><a href='https://dplyr.tidyverse.org/reference/group_by.html'>dplyr::group_by</a></code>, creating a grouped data frame with a 'GRP' object attached. This grouped data frame can however only be used for grouped operations using <em>collapse</em> fast functions. <!-- % \emph{dplyr} functions will treat this tibble like an ordinary (non-grouped) one. --></p></li>
<li><p><code><a href='funique.html'>funique</a></code> is a faster version of <code><a href='https://rdrr.io/r/base/unique.html'>unique</a></code>. The data frame method also allows selecting unique rows according to a subset of the columns.</p></li>
<li><p><code><a href='qF, qG, finteraction.html'>qF</a></code>, shorthand for 'quick-factor' implements very fast (ordered) factor generation from atomic vectors using either radix ordering <code>method = "radix"</code> or index hashing <code>method = "hash"</code>. Factors can also be used for efficient grouped programming with <em>collapse</em> functions, especially if they are generated using <code><a href='qF, qG, finteraction.html'>qF(x, na.exclude = FALSE)</a></code> which assigns a level to missing values and attaches a class 'na.included' ensuring that no additional missing value checks are executed by <em>collapse</em> functions.</p></li>
<li><p><code><a href='qF, qG, finteraction.html'>qG</a></code>, shorthand for 'quick-group', generates a kind of factor-light without the levels attribute but instead an attribute providing the number of levels. Optionally the levels / groups can be attached, but without converting them to character. Objects have a class 'qG', which is also recognized in the <em>collapse</em> ecosystem.</p></li>
<li><p><code><a href='fdroplevels.html'>fdroplevels</a></code> is a substantially faster replacement for <code><a href='https://rdrr.io/r/base/droplevels.html'>droplevels</a></code>.</p></li>
<li><p><code><a href='qF, qG, finteraction.html'>finteraction</a></code> is a fast alternative to <code><a href='https://rdrr.io/r/base/interaction.html'>interaction</a></code> implemented as a wrapper around <code><a href='GRP, fgroup_by.html'>as.factor_GRP(GRP(...))</a></code>. It can be used to generate a factor from multiple vectors, factors or a list of vectors / factors. Unused factor levels are always dropped.</p></li>
<li><p><code><a href='groupid.html'>groupid</a></code> is a generalization of <code><a href='https://rdrr.io/pkg/data.table/man/rleid.html'>data.table::rleid</a></code> providing a run-length type group-id from atomic vectors. It is generalization as it also supports passing an ordering vector and skipping missing values. For example <code><a href='qF, qG, finteraction.html'>qF</a></code> and <code><a href='qF, qG, finteraction.html'>qG</a></code> with <code>method = "radix"</code> are essentially implemented using <code><a href='groupid.html'>groupid(x, radixorder(x))</a></code>.</p></li>
<li><p><code><a href='seqid.html'>seqid</a></code> is a specialized function which creates a group-id from sequences of integer values. For any ordinary panel dataset <code><a href='groupid.html'>groupid(id, order(id, time))</a></code> and <code><a href='seqid.html'>seqid(time, order(id, time))</a></code> provide the same id variable. <code><a href='seqid.html'>seqid</a></code> is especially useful for identifying discontinuities in time-sequences and can help to perform operations such as iterated differences on such data.</p></li>
</ul>

    </div>



    <h2 class="hasAnchor" id="table-of-functions"><a class="anchor" href="#table-of-functions"></a>Table of Functions</h2>

    <p></p><table class='table'>
<tr><td><em> Function / S3 Generic </em></td><td></td><td><em> Methods </em></td><td></td><td><em> Description </em></td></tr>
<tr><td><code><a href='radixorder.html'>radixorder(v)</a></code></td><td></td><td>No methods, for data frames and vectors</td><td></td><td>Radix-based ordering + grouping information</td></tr>
<tr><td><code><a href='roworder.html'>roworder(v)</a></code></td><td></td><td>No methods, for data frames</td><td></td><td>Row sorting/reordering</td></tr>
<tr><td><code><a href='GRP, fgroup_by.html'>GRP</a></code></td><td></td><td><code>default, GRP, factor, qG, grouped_df, pseries, pdata.frame</code></td><td></td><td>Fast grouping and a flexible grouping object</td></tr>
<tr><td><code><a href='GRP, fgroup_by.html'>fgroup_by</a></code></td><td></td><td>No methods, for data frames</td><td></td><td>Fast grouped data frame</td></tr>
<tr><td><code><a href='funique.html'>funique</a></code></td><td></td><td><code>default, data.frame</code></td><td></td><td>Fast unique values/rows</td></tr>
<tr><td><code><a href='qF, qG, finteraction.html'>qF</a></code></td><td></td><td>No methods, for vectors</td><td></td><td>Quick factor generation</td></tr>
<tr><td><code><a href='qF, qG, finteraction.html'>qG</a></code></td><td></td><td>No methods, for vectors</td><td></td><td>Quick grouping of vectors and a 'factor-light' class</td></tr>
<tr><td><code><a href='fdroplevels.html'>fdroplevels</a></code></td><td></td><td><code>factor, data.frame, list</code></td><td></td><td>Fast removal of unused factor levels</td></tr>
<tr><td><code><a href='qF, qG, finteraction.html'>finteraction</a></code></td><td></td><td>No methods, for data frames and vectors</td><td></td><td>Fast interactions</td></tr>
<tr><td><code><a href='groupid.html'>groupid</a></code></td><td></td><td>No methods, for vectors</td><td></td><td>Run-length type group-id</td></tr>
<tr><td><code><a href='seqid.html'>seqid</a></code></td><td></td><td>No methods, for vectors</td><td></td><td>Run-length type integer sequence-id</td></tr>
</table>


    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='index.html'>Collapse Overview</a>, <a href='A3-fast-data-manipulation.html'>Data Frame Manipulation</a>, <a href='A1-fast-statistical-functions.html'>Fast Statistical Functions</a></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


