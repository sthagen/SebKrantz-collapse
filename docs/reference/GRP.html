<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head><link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fast Grouping / collapse Grouping Objects — GRP • collapse</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fast Grouping / collapse Grouping Objects — GRP" />
<meta property="og:description" content="GRP performs fast, ordered and unordered, groupings of vectors and data frames (or lists of vectors) using radixorderv or group. The output is a list-like object of class 'GRP' which can be printed, plotted and used as an efficient input to all of collapse's fast statistical and transformation functions and operators (see macros .FAST_FUN and .OPERATOR_FUN), as well as to collap, BY and TRA.
fgroup_by is similar to dplyr::group_by but faster and class-agnostic. It creates a grouped data frame with a 'GRP' object attached - for fast dplyr-like programming with collapse's fast functions.
There are also several conversion methods to and from 'GRP' objects. Notable among these is GRP.grouped_df, which returns a 'GRP' object from a grouped data frame created with dplyr::group_by or fgroup_by, and the duo GRP.factor and as_factor_GRP.
gsplit efficiently splits a vector based on a 'GRP' object, and greorder helps to recombine the results. These are the workhorses behind functions like BY, and collap, fsummarise and fmutate when evaluated with base R and user-defined functions." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/collapse_R">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast Grouping / <em>collapse</em> Grouping Objects</h1>
    
    <div class="hidden name"><code>GRP.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>GRP</code> performs fast, ordered and unordered, groupings of vectors and data frames (or lists of vectors) using <code><a href='radixorder.html'>radixorderv</a></code> or <code><a href='group.html'>group</a></code>. The output is a list-like object of class 'GRP' which can be printed, plotted and used as an efficient input to all of <em>collapse</em>'s fast statistical and transformation functions and operators (see macros <code>.FAST_FUN</code> and <code>.OPERATOR_FUN</code>), as well as to <code><a href='collap.html'>collap</a></code>, <code><a href='BY.html'>BY</a></code> and <code><a href='TRA.html'>TRA</a></code>.</p>
<p><code>fgroup_by</code> is similar to <code><a href='https://dplyr.tidyverse.org/reference/group_by.html'>dplyr::group_by</a></code> but faster and class-agnostic. It creates a grouped data frame with a 'GRP' object attached - for fast dplyr-like programming with <em>collapse</em>'s fast functions.</p>
<p>There are also several conversion methods to and from 'GRP' objects. Notable among these is <code>GRP.grouped_df</code>, which returns a 'GRP' object from a grouped data frame created with <code><a href='https://dplyr.tidyverse.org/reference/group_by.html'>dplyr::group_by</a></code> or <code>fgroup_by</code>, and the duo <code>GRP.factor</code> and <code>as_factor_GRP</code>.</p>
<p><code>gsplit</code> efficiently splits a vector based on a 'GRP' object, and <code>greorder</code> helps to recombine the results. These are the workhorses behind functions like <code><a href='BY.html'>BY</a></code>, and <code><a href='collap.html'>collap</a></code>, <code><a href='fsummarise.html'>fsummarise</a></code> and <code><a href='ftransform.html'>fmutate</a></code> when evaluated with base R and user-defined functions.</p>
    </div>

    <pre class="usage"><span class='fu'>GRP</span><span class='op'>(</span><span class='va'>X</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>GRP</span><span class='op'>(</span><span class='va'>X</span>, by <span class='op'>=</span> <span class='cn'>NULL</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span>, decreasing <span class='op'>=</span> <span class='cn'>FALSE</span>, na.last <span class='op'>=</span> <span class='cn'>TRUE</span>,
    return.groups <span class='op'>=</span> <span class='cn'>TRUE</span>, return.order <span class='op'>=</span> <span class='va'>sort</span>, method <span class='op'>=</span> <span class='st'>"auto"</span>,
    call <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for factor</span>
<span class='fu'>GRP</span><span class='op'>(</span><span class='va'>X</span>, <span class='va'>...</span>, group.sizes <span class='op'>=</span> <span class='cn'>TRUE</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span>, return.groups <span class='op'>=</span> <span class='cn'>TRUE</span>,
    call <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># S3 method for qG</span>
<span class='fu'>GRP</span><span class='op'>(</span><span class='va'>X</span>, <span class='va'>...</span>, group.sizes <span class='op'>=</span> <span class='cn'>TRUE</span>, return.groups <span class='op'>=</span> <span class='cn'>TRUE</span>, call <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># S3 method for pseries</span>
<span class='fu'>GRP</span><span class='op'>(</span><span class='va'>X</span>, effect <span class='op'>=</span> <span class='fl'>1L</span>, <span class='va'>...</span>, group.sizes <span class='op'>=</span> <span class='cn'>TRUE</span>, return.groups <span class='op'>=</span> <span class='cn'>TRUE</span>,
    call <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># S3 method for pdata.frame</span>
<span class='fu'>GRP</span><span class='op'>(</span><span class='va'>X</span>, effect <span class='op'>=</span> <span class='fl'>1L</span>, <span class='va'>...</span>, group.sizes <span class='op'>=</span> <span class='cn'>TRUE</span>, return.groups <span class='op'>=</span> <span class='cn'>TRUE</span>,
    call <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># S3 method for grouped_df</span>
<span class='fu'>GRP</span><span class='op'>(</span><span class='va'>X</span>, <span class='va'>...</span>, return.groups <span class='op'>=</span> <span class='cn'>TRUE</span>, call <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># Identify 'GRP' objects</span>
<span class='fu'>is_GRP</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S3 method for GRP</span>
<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>                          <span class='co'># Length of data being grouped</span>
<span class='fu'>GRPN</span><span class='op'>(</span><span class='va'>x</span>, expand <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span>        <span class='co'># Group sizes (default: expanded to match data length)</span>
<span class='fu'>GRPnames</span><span class='op'>(</span><span class='va'>x</span>, force.char <span class='op'>=</span> <span class='cn'>TRUE</span>, sep <span class='op'>=</span> <span class='st'>"."</span><span class='op'>)</span>  <span class='co'># Group names</span>
<span class='fu'>as_factor_GRP</span><span class='op'>(</span><span class='va'>x</span>, ordered <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>  <span class='co'># 'GRP'-object to (ordered) factor conversion</span>

<span class='co'># Efficiently split a vector using a 'GRP' object</span>
<span class='fu'>gsplit</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>g</span>, use.g.names <span class='op'>=</span> <span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># Efficiently reorder y = unlist(gsplit(x, g)) such that identical(greorder(y, g), x)</span>
<span class='fu'>greorder</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>g</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># Fast, class-agnostic pendant to dplyr::group_by for use with fast functions, see details</span>
<span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>.X</span>, <span class='va'>...</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span>, decreasing <span class='op'>=</span> <span class='cn'>FALSE</span>, na.last <span class='op'>=</span> <span class='cn'>TRUE</span>,
          return.order <span class='op'>=</span> <span class='va'>sort</span>, method <span class='op'>=</span> <span class='st'>"auto"</span><span class='op'>)</span>
<span class='co'># Shorthand for fgroup_by</span>
      <span class='fu'>gby</span><span class='op'>(</span><span class='va'>.X</span>, <span class='va'>...</span>, sort <span class='op'>=</span> <span class='cn'>TRUE</span>, decreasing <span class='op'>=</span> <span class='cn'>FALSE</span>, na.last <span class='op'>=</span> <span class='cn'>TRUE</span>,
          return.order <span class='op'>=</span> <span class='va'>sort</span>, method <span class='op'>=</span> <span class='st'>"auto"</span><span class='op'>)</span>

<span class='co'># Get grouping columns from a grouped data frame created with dplyr::group_by or fgroup_by</span>
<span class='fu'>fgroup_vars</span><span class='op'>(</span><span class='va'>X</span>, return <span class='op'>=</span> <span class='st'>"data"</span><span class='op'>)</span>

<span class='co'># Ungroup grouped data frame created with dplyr::group_by or fgroup_by</span>
<span class='fu'>fungroup</span><span class='op'>(</span><span class='va'>X</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for GRP</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>x</span>, n <span class='op'>=</span> <span class='fl'>6</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for GRP</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>x</span>, breaks <span class='op'>=</span> <span class='st'>"auto"</span>, type <span class='op'>=</span> <span class='st'>"s"</span>, horizontal <span class='op'>=</span> <span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>a vector, list of columns or data frame (default method), or a suitable object (conversion / extractor methods).</p></td>
    </tr>
    <tr>
      <th>.X</th>
      <td><p>a data frame or list.</p></td>
    </tr>
    <tr>
      <th>x, g</th>
      <td><p>a 'GRP' object. For <code>gsplit/greorder</code>, <code>x</code> can be a vector of any type, or <code>NULL</code> to return the integer indices of the groups. <code>gsplit/greorder/GRPN</code> also support vectors or data frames to be passed to <code>g/x</code>.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>if <code>X</code> is a data frame or list, <code>by</code> can indicate columns to use for the grouping (by default all columns are used). Columns must be passed using a vector of column names, indices, or using a one-sided formula i.e. <code>~ col1 + col2</code>.</p></td>
    </tr>
    <tr>
      <th>sort</th>
      <td><p>logical. If <code>FALSE</code>, groups are not ordered but simply grouped in the order of first appearance of unique elements / rows. This often provides a performance gain if the data was not sorted beforehand. See also <code>method</code>.</p></td>
    </tr>
    <tr>
      <th>ordered</th>
      <td><p>logical. <code>TRUE</code> adds a class 'ordered' i.e. generates an ordered factor.</p></td>
    </tr>
    <tr>
      <th>decreasing</th>
      <td><p>logical. Should the sort order be increasing or decreasing? Can be a vector of length equal to the number of arguments in <code>X</code> / <code>by</code> (argument passed to <code><a href='radixorder.html'>radixorderv</a></code>).</p></td>
    </tr>
    <tr>
      <th>na.last</th>
      <td><p>logical. If missing values are encountered in grouping vector/columns, assign them to the last group (argument passed to <code><a href='radixorder.html'>radixorderv</a></code>).</p></td>
    </tr>
    <tr>
      <th>return.groups</th>
      <td><p>logical. Include the unique groups in the created GRP object.</p></td>
    </tr>
    <tr>
      <th>return.order</th>
      <td><p>logical. If <code>sort = TRUE</code>, include the output from <code><a href='radixorder.html'>radixorderv</a></code> in the created GRP object. This brings performance improvements in <code>gsplit</code> (and thus also benefits grouped execution of base R functions).</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>character. The algorithm to use for grouping: either <code>"radix"</code>, <code>"hash"</code> or <code>"auto"</code>. <code>"auto"</code> will chose <code>"radix"</code> when <code>sort = TRUE</code>, yielding ordered grouping via <code><a href='radixorder.html'>radixorderv</a></code>, and <code>"hash"</code>-based grouping in first-appearance order via <code><a href='group.html'>group</a></code> otherwise. It is possibly to put <code>method = "radix"</code> and <code>sort = FALSE</code>, which will group character data in first appearance order but sort numeric data (a good hybrid option). <code>method = "hash"</code> currently does not support any sorting, thus putting <code>sort = TRUE</code> will simply be ignored.</p></td>
    </tr>
    <tr>
      <th>group.sizes</th>
      <td><p>logical. <code>TRUE</code> tabulates factor levels using <code><a href='https://rdrr.io/r/base/tabulate.html'>tabulate</a></code> to create a vector of group sizes; <code>FALSE</code> leaves that slot empty when converting from factors.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>logical. <code>TRUE</code> efficiently drops unused factor levels beforehand using <code><a href='fdroplevels.html'>fdroplevels</a></code>.</p></td>
    </tr>
    <tr>
      <th>call</th>
      <td><p>logical. <code>TRUE</code> calls <code><a href='https://rdrr.io/r/base/match.call.html'>match.call</a></code> and saves it in the final slot of the GRP object.</p></td>
    </tr>
    <tr>
      <th>expand</th>
      <td><p>logical. <code>TRUE</code> returns a vector the same length as the data. <code>FALSE</code> returns the group sizes (computed in first-appearance-order of groups if <code>x</code> is not already a 'GRP' object).</p></td>
    </tr>
    <tr>
      <th>force.char</th>
      <td><p>logical. Always output group names as character vector, even if a single numeric vector was passed to <code>GRP.default</code>.</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>character. The separator passed to <code><a href='https://rdrr.io/r/base/paste.html'>paste</a></code> when creating group names from multiple grouping variables by pasting them together.</p></td>
    </tr>
    <tr>
      <th>effect</th>
      <td><p><em>plm</em> / indexed data methods: Select which panel identifier should be used as grouping variable. 1L takes the first variable in the <a href='indexing.html'>index</a>, 2L the second etc., identifiers can also be passed as a character string. More than one variable can be supplied.</p></td>
    </tr>
    <tr>
      <th>return</th>
      <td><p>an integer or string specifying what <code>fgroup_vars</code> should return. The options are:</p><table class='table'>
<tr><td><em> Int. </em></td><td></td><td><em> String </em></td><td></td><td><em> Description </em></td></tr>
<tr><td>1</td><td></td><td>"data"</td><td></td><td>full grouping columns (default)</td></tr>
<tr><td>2</td><td></td><td>"unique"</td><td></td><td>unique rows of grouping columns</td></tr>
<tr><td>3</td><td></td><td>"names"</td><td></td><td>names of grouping columns</td></tr>
<tr><td>4</td><td></td><td>"indices"</td><td></td><td>integer indices of grouping columns</td></tr>
<tr><td>5</td><td></td><td>"named_indices"</td><td></td><td>named integer indices of grouping columns</td></tr>
<tr><td>6</td><td></td><td>"logical"</td><td></td><td>logical selection vector of grouping columns</td></tr>
<tr><td>7</td><td></td><td>"named_logical"</td><td></td><td>named logical selection vector of grouping columns</td></tr>
</table>
<p></p></td>
    </tr>
    <tr>
      <th>use.g.names</th>
      <td><p>logical. <code>TRUE</code> returns a named list, like <code><a href='https://rdrr.io/pkg/data.table/man/split.html'>split</a></code>. <code>FALSE</code> is slightly more efficient.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>integer. Number of groups to print out.</p></td>
    </tr>
    <tr>
      <th>breaks</th>
      <td><p>integer. Number of breaks in the histogram of group-sizes.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>linetype for plot.</p></td>
    </tr>
    <tr>
      <th>horizontal</th>
      <td><p>logical. <code>TRUE</code> arranges plots next to each other, instead of above each other.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>for <code>fgroup_by</code>: unquoted comma-separated column names, sequences of columns, expressions involving columns, and column names, indices, logical vectors or selector functions. See Examples. For <code>gsplit</code>, <code>greorder</code> and <code>GRPN</code>: further arguments passed to <code>GRP</code> (if <code>g/x</code> is not already a 'GRP' object). For example the <code>by</code> argument could be used if a data frame is passed.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>GRP</code> is a central function in the <em>collapse</em> package because it provides, in the form of integer vectors, some key pieces of information to efficiently perform grouped operations at the <code>C/C++</code> level.</p>
<p>Most statistical function require information about (1) the number of groups (2) an integer group-id indicating which values / rows belong to which group and (3) information about the size of each group. Provided with these, <em>collapse</em>'s <a href='fast-statistical-functions.html'>Fast Statistical Functions</a> pre-allocate intermediate and result vectors of the right sizes and (in most cases) perform grouped statistical computations in a single pass through the data.</p>
<p>The sorting functionality of <code>GRP.default</code> lets groups receive different integer-id's depending on whether the groups are sorted <code>sort = TRUE</code> (<code>FALSE</code> gives first-appearance order), and in which order (argument <code>decreasing</code>). This affects the order of values/rows in the output whenever an aggregation is performed. <!-- % \emph{Note} that \code{sort = FALSE} is only effective on character vectors, numeric grouping vectors will always produce ordered groupings. --></p>
<p><!-- %This in-turn changes the order of values/rows in the output of \emph{collapse} functions (the row/value corresponding to group 1 always comes out on top). The default setting with \code{sort = TRUE} and \code{decreasing = FALSE} results in groups being sorted in ascending order. This is equivalent to performing grouped operations in \emph{data.table} using \code{keyby}, whereas \code{sort = FALSE} is equivalent to \emph{data.table} grouping with \code{by}, however this only works if the \code{by} columns are character, numeric grouping columns are always ordered. --></p>
<p>Other elements in the object provide information about whether the data was sorted by the variables defining the grouping (6) and the ordering vector (7). These also feed into optimizations in <code>gsplit/greorder</code> that benefit the execution of base R functions across groups.</p>
<p>Complimentary to <code>GRP</code>, the function <code>fgroup_by</code> is a significantly faster and class-agnostic alternative to <code><a href='https://dplyr.tidyverse.org/reference/group_by.html'>dplyr::group_by</a></code> for programming with <em>collapse</em>. It creates a grouped data frame with a 'GRP' object attached in a <code>"groups"</code> attribute. This data frame has classes 'GRP_df', ..., 'grouped_df' and 'data.frame', where ... stands for any other classes the input frame inherits such as 'data.table', 'sf', 'tbl_df', 'indexed_frame' etc.. <em>collapse</em> functions with a 'grouped_df' method respond to 'grouped_df' objects created with either <code>fgroup_by</code> or <code><a href='https://dplyr.tidyverse.org/reference/group_by.html'>dplyr::group_by</a></code>. The method <code>GRP.grouped_df</code> takes the <code>"groups"</code> attribute from a 'grouped_df' and converts it to a 'GRP' object if created with <code><a href='https://dplyr.tidyverse.org/reference/group_by.html'>dplyr::group_by</a></code>. <!-- %If the grouped data frame was generated using \code{fgroup_by}, all work is done already. If it was created using \code{dplyr::group_by}, a C routine is called to efficiently convert the grouping object. --></p>
<p>The 'GRP_df' class in front responds to <code>print.GRP_df</code> which first calls <code><a href='https://rdrr.io/r/base/print.html'>print(fungroup(x), ...)</a></code> and prints one line below the object indicating the grouping variables, followed, in square brackets, by some statistics on the group sizes: <code>[N | Mean (SD) Min-Max]</code>. The mean is rounded to a full number and the standard deviation (SD) to one digit. Minimum and maximum are only displayed if the SD is non-zero. There also exist a method <code>[.GRP_df</code> which calls <code><a href='https://rdrr.io/r/base/UseMethod.html'>NextMethod</a></code> but makes sure that the grouping information is preserved or dropped depending on the dimensions of the result (subsetting rows or aggregation with <em>data.table</em> drops the grouping object).</p>
<p><!-- %Note that \code{fgroup_by} can only be used in combination with \emph{collapse} functions, not with \code{dplyr::summarize} or \code{dplyr::mutate} (the grouping object and method of computing results is different). The converse is not true, you can group data with \code{dplyr::group_by} and then apply \emph{collapse} functions. \code{fgroup_by} is class-agnostic, i.e. the classes of the data frame or list passed are preserved, and all standard methods (like subsetting with \code{`[`} or \code{print} methods) apply to the grouped object. --></p>
<p><!-- % Apart from the class 'grouped_df' which is added behind any classes the object might inherit (apart from 'data.frame'), a class 'GRP_df' is added in front. This class responds to a \code{print} method. Both first call the corresponding method for the object and then print / attach the grouping information. --></p>
<p><code>GRP.default</code> supports vector and list input and will also return 'GRP' objects if passed. There is also a hidden method <code>GRP.GRP</code> which simply returns grouping objects (no re-grouping functionality is offered).</p>
<p>Apart from <code>GRP.grouped_df</code> there are several further conversion methods:</p>
<p>The conversion of factors to 'GRP' objects by <code>GRP.factor</code> involves obtaining the number of groups calling <code>ng &lt;- fnlevels(f)</code> and then computing the count of each level using <code><a href='https://rdrr.io/r/base/tabulate.html'>tabulate(f, ng)</a></code>. The integer group-id (2) is already given by the factor itself after removing the levels and class attributes and replacing any missing values with <code>ng + 1L</code>. The levels are put in a list and moved to position (4) in the 'GRP' object, which is reserved for the unique groups. Finally, a sortedness check <code>!is.unsorted(id)</code> is run on the group-id to check if the data represented by the factor was sorted (6). <code>GRP.qG</code> works similarly (see also <code><a href='qF-qG-finteraction.html'>qG</a></code>), and the 'pseries' and 'pdata.frame' methods simply group one or more factors in the <a href='indexing.html'>index</a> (selected using the <code>effect</code> argument) .</p>
<p>Creating a factor from a 'GRP' object using <code>as_factor_GRP</code> does not involve any computations, but may involve interacting multiple grouping columns using the <code>paste</code> function to produce unique factor levels. <!-- %  or \code{\link{as.character}} conversions if the grouping column(s) were numeric (which are potentially expensive). --></p>


<p><!-- %\emph{Note}: For faster factor generation and a factor-light class 'qG' which avoids the coercion of factor levels to character also see \code{\link{qF}} and \code{\link{qG}}. --></p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list-like object of class `GRP' containing information about the number of groups, the observations (rows) belonging to each group, the size of each group, the unique group names / definitions, whether the groups are ordered and data grouped is sorted or not, the ordering vector used to perform the ordering and the group start positions. The object is structured as follows:</p><table class='table'>
<tr><td><em> List-index </em></td><td></td><td><em> Element-name </em></td><td></td><td><em> Content type </em></td><td></td><td><em> Content description</em></td></tr>
<tr><td></td><td>[[1]]</td><td></td><td>N.groups</td><td></td><td><code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code></td><td></td></tr>
<tr><td>Number of Groups</td><td></td><td>[[2]]</td><td></td><td>group.id</td><td></td><td><code><a href='https://rdrr.io/r/base/integer.html'>integer(NROW(X))</a></code></td></tr>
<tr><td></td><td>An integer group-identifier</td><td></td><td>[[3]]</td><td></td><td>group.sizes</td><td></td></tr>
<tr><td><code><a href='https://rdrr.io/r/base/integer.html'>integer(N.groups)</a></code></td><td></td><td>Vector of group sizes</td><td></td><td>[[4]]</td><td></td><td>groups</td></tr>
<tr><td></td><td><code><a href='https://rdrr.io/pkg/data.table/man/duplicated.html'>unique(X)</a></code> or <code>NULL</code></td><td></td><td>Unique groups (same format as input, except for <code>fgroup_by</code> which uses a plain list, sorted if <code>sort = TRUE</code>), or <code>NULL</code> if <code>return.groups = FALSE</code></td><td></td><td>[[5]]</td><td></td></tr>
<tr><td>group.vars</td><td></td><td><code>character</code></td><td></td><td>The names of the grouping variables</td><td></td><td>[[6]]</td></tr>
<tr><td></td><td>ordered</td><td></td><td><code><a href='https://rdrr.io/r/base/logical.html'>logical(2)</a></code></td><td></td><td><code>[1]</code> Whether the groups are ordered: equal to the <code>sort</code> argument in the default method, or <code>TRUE</code> if converted objects inherit a class <code>"ordered"</code> and <code>NA</code> otherwise, <code>[2]</code> Whether the data (<code>X</code>) is already sorted: the result of <code>!is.unsorted(group.id)</code>. If <code>sort = FALSE</code> (default method) the second entry is <code>NA</code>.</td><td></td></tr>
<tr><td>[[7]]</td><td></td><td>order</td><td></td><td><code><a href='https://rdrr.io/r/base/integer.html'>integer(NROW(X))</a></code> or <code>NULL</code></td><td></td><td>Ordering vector from <code>radixorderv</code> (with <code>"starts"</code> attribute), or <code>NULL</code> if <code>return.order = FALSE</code></td></tr>
<tr><td></td><td>[[8]]</td><td></td><td>group.starts</td><td></td><td><code><a href='https://rdrr.io/r/base/integer.html'>integer(N.groups)</a></code> or <code>NULL</code></td><td></td></tr>
<tr><td>The first-occurrence positions/rows of the groups. Useful e.g. with <code><a href='ffirst-flast.html'>ffirst(x, g, na.rm = FALSE)</a></code>. <code>NULL</code> if <code>return.groups = FALSE</code>.</td><td></td><td>[[9]]</td><td></td><td>call</td><td></td><td><code><a href='https://rdrr.io/r/base/match.call.html'>match.call()</a></code> or <code>NULL</code></td></tr>
</table>


    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='radixorder.html'>radixorder</a></code>, <code><a href='qF-qG-finteraction.html'>qF</a></code>, <a href='fast-grouping-ordering.html'>Fast Grouping and Ordering</a>, <a href='index.html'>Collapse Overview</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## default method</span>
<span class='fu'>GRP</span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span>
</div><div class='output co'>#&gt; collapse grouping object of length 32 with 3 ordered groups
#&gt; 
#&gt; Call: GRP.default(X = mtcars$cyl), X is unsorted
#&gt; 
#&gt; Distribution of group sizes: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;    7.00    9.00   11.00   10.67   12.50   14.00 
#&gt; 
#&gt; Groups with sizes: 
#&gt;  4  6  8 
#&gt; 11  7 14 </div><div class='input'><span class='fu'>GRP</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>~</span> <span class='va'>cyl</span> <span class='op'>+</span> <span class='va'>vs</span> <span class='op'>+</span> <span class='va'>am</span><span class='op'>)</span>       <span class='co'># Or GRP(mtcars, c("cyl","vs","am")) or GRP(mtcars, c(2,8:9))</span>
</div><div class='output co'>#&gt; collapse grouping object of length 32 with 7 ordered groups
#&gt; 
#&gt; Call: GRP.default(X = mtcars, by = ~cyl + vs + am), X is unsorted
#&gt; 
#&gt; Distribution of group sizes: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   1.000   2.500   3.000   4.571   5.500  12.000 
#&gt; 
#&gt; Groups with sizes: 
#&gt; 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 
#&gt;     1     3     7     3     4    12     2 </div><div class='input'><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'>GRP</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>~</span> <span class='va'>cyl</span> <span class='op'>+</span> <span class='va'>vs</span> <span class='op'>+</span> <span class='va'>am</span><span class='op'>)</span>  <span class='co'># Saving the object</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                           <span class='co'># Printing it</span>
</div><div class='output co'>#&gt; collapse grouping object of length 32 with 7 ordered groups
#&gt; 
#&gt; Call: GRP.default(X = mtcars, by = ~cyl + vs + am), X is unsorted
#&gt; 
#&gt; Distribution of group sizes: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   1.000   2.500   3.000   4.571   5.500  12.000 
#&gt; 
#&gt; Groups with sizes: 
#&gt; 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 
#&gt;     1     3     7     3     4    12     2 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                            <span class='co'># Plotting it</span>
</div><div class='img'><img src='GRP-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>GRPnames</span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                        <span class='co'># Retain group names</span>
</div><div class='output co'>#&gt; [1] "4.0.1" "4.1.0" "4.1.1" "6.0.1" "6.1.0" "8.0.0" "8.0.1"</div><div class='input'><span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>g</span><span class='op'>)</span>                    <span class='co'># Compute the sum of mtcars, grouped by variables cyl, vs and am</span>
</div><div class='output co'>#&gt;         mpg cyl   disp   hp  drat     wt   qsec vs am gear carb
#&gt; 4.0.1  26.0   4  120.3   91  4.43  2.140  16.70  0  1    5    2
#&gt; 4.1.0  68.7  12  407.6  254 11.31  8.805  62.91  3  0   11    5
#&gt; 4.1.1 198.6  28  628.6  564 29.04 14.198 130.90  7  7   29   10
#&gt; 6.0.1  61.7  18  465.0  395 11.42  8.265  48.98  0  3   13   14
#&gt; 6.1.0  76.5  24  818.2  461 13.68 13.555  76.86  4  0   14   10
#&gt; 8.0.0 180.6  96 4291.4 2330 37.45 49.249 205.71  0  0   36   37
#&gt; 8.0.1  30.8  16  652.0  599  7.76  6.740  29.10  0  2   10   12</div><div class='input'><span class='fu'>gsplit</span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>, <span class='va'>g</span><span class='op'>)</span>              <span class='co'># Use the object to split a vector</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 26
#&gt; 
#&gt; [[2]]
#&gt; [1] 24.4 22.8 21.5
#&gt; 
#&gt; [[3]]
#&gt; [1] 22.8 32.4 30.4 33.9 27.3 30.4 21.4
#&gt; 
#&gt; [[4]]
#&gt; [1] 21.0 21.0 19.7
#&gt; 
#&gt; [[5]]
#&gt; [1] 21.4 18.1 19.2 17.8
#&gt; 
#&gt; [[6]]
#&gt;  [1] 18.7 14.3 16.4 17.3 15.2 10.4 10.4 14.7 15.5 15.2 13.3 19.2
#&gt; 
#&gt; [[7]]
#&gt; [1] 15.8 15.0
#&gt; </div><div class='input'><span class='fu'>gsplit</span><span class='op'>(</span><span class='cn'>NULL</span>, <span class='va'>g</span><span class='op'>)</span>                    <span class='co'># The indices of the groups</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; [1] 27
#&gt; 
#&gt; [[2]]
#&gt; [1]  8  9 21
#&gt; 
#&gt; [[3]]
#&gt; [1]  3 18 19 20 26 28 32
#&gt; 
#&gt; [[4]]
#&gt; [1]  1  2 30
#&gt; 
#&gt; [[5]]
#&gt; [1]  4  6 10 11
#&gt; 
#&gt; [[6]]
#&gt;  [1]  5  7 12 13 14 15 16 17 22 23 24 25
#&gt; 
#&gt; [[7]]
#&gt; [1] 29 31
#&gt; </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>,              <span class='co'># greorder and unlist undo the effect of gsplit</span>
          <span class='fu'>greorder</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='fu'>gsplit</span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>mpg</span>, <span class='va'>g</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>g</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'>## Convert factor to GRP object and vice-versa</span>
<span class='fu'>GRP</span><span class='op'>(</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span><span class='op'>)</span>
</div><div class='output co'>#&gt; collapse grouping object of length 150 with 3 ordered groups
#&gt; 
#&gt; Call: GRP.factor(X = iris$Species), X is sorted
#&gt; 
#&gt; Distribution of group sizes: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;      50      50      50      50      50      50 
#&gt; 
#&gt; Groups with sizes: 
#&gt;     setosa versicolor  virginica 
#&gt;         50         50         50 </div><div class='input'><span class='fu'>as_factor_GRP</span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0
#&gt; [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0
#&gt; [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1
#&gt; Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</div><div class='input'> 
<span class='co'>## dplyr integration</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>cyl</span>,<span class='va'>vs</span>,<span class='va'>am</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>GRP</span><span class='op'>(</span><span class='op'>)</span>    <span class='co'># Get GRP object from a dplyr grouped tibble</span>
</div><div class='output co'>#&gt; collapse grouping object of length 32 with 7 ordered groups
#&gt; 
#&gt; Call: GRP.grouped_df(X = .), X is unsorted
#&gt; 
#&gt; Distribution of group sizes: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   1.000   2.500   3.000   4.571   5.500  12.000 
#&gt; 
#&gt; Groups with sizes: 
#&gt; 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 
#&gt;     1     3     7     3     4    12     2 </div><div class='input'><span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>cyl</span>,<span class='va'>vs</span>,<span class='va'>am</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='op'>)</span>  <span class='co'># Grouped mean using dplyr grouping</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 7 x 11</span><span>
#&gt;     cyl    vs    am   mpg  disp    hp  drat    wt  qsec  gear  carb
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>     4     0     1  26   120.   91    4.43  2.14  16.7  5     2   
#&gt; </span><span style='color: #BCBCBC;'>2</span><span>     4     1     0  22.9 136.   84.7  3.77  2.94  21.0  3.67  1.67
#&gt; </span><span style='color: #BCBCBC;'>3</span><span>     4     1     1  28.4  89.8  80.6  4.15  2.03  18.7  4.14  1.43
#&gt; </span><span style='color: #BCBCBC;'>4</span><span>     6     0     1  20.6 155   132.   3.81  2.76  16.3  4.33  4.67
#&gt; </span><span style='color: #BCBCBC;'>5</span><span>     6     1     0  19.1 205.  115.   3.42  3.39  19.2  3.5   2.5 
#&gt; </span><span style='color: #BCBCBC;'>6</span><span>     8     0     0  15.1 358.  194.   3.12  4.10  17.1  3     3.08
#&gt; </span><span style='color: #BCBCBC;'>7</span><span>     8     0     1  15.4 326   300.   3.88  3.37  14.6  5     6   </div><div class='input'><span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>cyl</span>,<span class='va'>vs</span>,<span class='va'>am</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='op'>)</span> <span class='co'># Faster alternative with collapse grouping</span>
</div><div class='output co'>#&gt;   cyl vs am      mpg     disp        hp     drat       wt     qsec     gear
#&gt; 1   4  0  1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000
#&gt; 2   4  1  0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667
#&gt; 3   4  1  1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857
#&gt; 4   6  0  1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333
#&gt; 5   6  1  0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000
#&gt; 6   8  0  0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000
#&gt; 7   8  0  1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000
#&gt;       carb
#&gt; 1 2.000000
#&gt; 2 1.666667
#&gt; 3 1.428571
#&gt; 4 4.666667
#&gt; 5 2.500000
#&gt; 6 3.083333
#&gt; 7 6.000000</div><div class='input'>
<span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>cyl</span>,<span class='va'>vs</span>,<span class='va'>am</span><span class='op'>)</span>            <span class='co'># Print method for grouped data frame</span>
</div><div class='output co'>#&gt;                    mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag     21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710        22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant           18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
#&gt; Duster 360        14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
#&gt; Merc 240D         24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230          22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 23 rows ]
#&gt; 
#&gt; Grouped by:  cyl, vs, am  [7 | 5 (3.8) 1-12] </div><div class='input'>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://magrittr.tidyverse.org'>magrittr</a></span><span class='op'>)</span>
<span class='co'>## Adding a column of group sizes</span>
<span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>cyl</span>,<span class='va'>vs</span>,<span class='va'>am</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span>Sizes <span class='op'>=</span> <span class='fu'>GRPN</span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                    mpg cyl  disp  hp drat    wt  qsec vs am gear carb Sizes
#&gt; Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4     3
#&gt; Mazda RX4 Wag     21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4     3
#&gt; Datsun 710        22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1     7
#&gt; Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1     4
#&gt; Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2    12
#&gt; Valiant           18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1     4
#&gt; Duster 360        14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4    12
#&gt; Merc 240D         24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2     3
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 24 rows ]
#&gt; 
#&gt; Grouped by:  cyl, vs, am  [7 | 5 (3.8) 1-12] </div><div class='input'><span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span>Sizes <span class='op'>=</span> <span class='fu'>GRPN</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>cyl</span>,<span class='va'>vs</span>,<span class='va'>am</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Same thing, slightly more efficient</span>
</div><div class='output co'>#&gt;                    mpg cyl  disp  hp drat    wt  qsec vs am gear carb Sizes
#&gt; Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4     3
#&gt; Mazda RX4 Wag     21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4     3
#&gt; Datsun 710        22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1     7
#&gt; Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1     4
#&gt; Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2    12
#&gt; Valiant           18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1     4
#&gt; Duster 360        14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4    12
#&gt; Merc 240D         24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2     3
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 24 rows ]</div><div class='input'>
<span class='co'>## Various options for programming and interactive use</span>
<span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>GGDC10S</span>, <span class='va'>Variable</span>, Decade <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>floor</a></span><span class='op'>(</span><span class='va'>Year</span> <span class='op'>/</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT
#&gt; 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA
#&gt; 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA
#&gt; 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA
#&gt;   TRA FIRE GOV OTH SUM
#&gt; 1  NA   NA  NA  NA  NA
#&gt; 2  NA   NA  NA  NA  NA
#&gt; 3  NA   NA  NA  NA  NA</div><div class='input'><span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>GGDC10S</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='fl'>5</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT
#&gt; 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA
#&gt; 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA
#&gt; 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA
#&gt;   TRA FIRE GOV OTH SUM
#&gt; 1  NA   NA  NA  NA  NA
#&gt; 2  NA   NA  NA  NA  NA
#&gt; 3  NA   NA  NA  NA  NA</div><div class='input'><span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>GGDC10S</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Variable"</span>, <span class='st'>"Country"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT
#&gt; 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA
#&gt; 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA
#&gt; 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA
#&gt;   TRA FIRE GOV OTH SUM
#&gt; 1  NA   NA  NA  NA  NA
#&gt; 2  NA   NA  NA  NA  NA
#&gt; 3  NA   NA  NA  NA  NA</div><div class='input'><span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>GGDC10S</span>, <span class='va'>is.character</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT
#&gt; 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA
#&gt; 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA
#&gt; 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA
#&gt;   TRA FIRE GOV OTH SUM
#&gt; 1  NA   NA  NA  NA  NA
#&gt; 2  NA   NA  NA  NA  NA
#&gt; 3  NA   NA  NA  NA  NA</div><div class='input'><span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>GGDC10S</span>, <span class='va'>Country</span><span class='op'>:</span><span class='va'>Variable</span>, <span class='va'>Year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT
#&gt; 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA
#&gt; 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA
#&gt; 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA
#&gt;   TRA FIRE GOV OTH SUM
#&gt; 1  NA   NA  NA  NA  NA
#&gt; 2  NA   NA  NA  NA  NA
#&gt; 3  NA   NA  NA  NA  NA</div><div class='input'><span class='fu'>fgroup_by</span><span class='op'>(</span><span class='va'>GGDC10S</span>, <span class='va'>Country</span><span class='op'>:</span><span class='va'>Region</span>, Var <span class='op'>=</span> <span class='va'>Variable</span>, <span class='va'>Year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   Country Regioncode             Region Variable Year AGR MIN MAN PU CON WRT
#&gt; 1     BWA        SSA Sub-saharan Africa       VA 1960  NA  NA  NA NA  NA  NA
#&gt; 2     BWA        SSA Sub-saharan Africa       VA 1961  NA  NA  NA NA  NA  NA
#&gt; 3     BWA        SSA Sub-saharan Africa       VA 1962  NA  NA  NA NA  NA  NA
#&gt;   TRA FIRE GOV OTH SUM
#&gt; 1  NA   NA  NA  NA  NA
#&gt; 2  NA   NA  NA  NA  NA
#&gt; 3  NA   NA  NA  NA  NA</div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


