<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head><link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Data Apply — dapply • collapse</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Data Apply — dapply" />
<meta property="og:description" content="dapply efficiently applies functions to columns or rows of matrix-like objects and by default returns an object of the same type and with the same attributes. Alternatively it is possible to return the result in a plain matrix or data.frame. A simple parallelism is also available." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" target="_blank">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/collapse_R" target="_blank">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" target="_blank">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Data Apply</h1>
    
    <div class="hidden name"><code>dapply.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>dapply</code> efficiently applies functions to columns or rows of matrix-like objects and by default returns an object of the same type and with the same attributes. Alternatively it is possible to return the result in a plain matrix or data.frame. A simple parallelism is also available.</p>
    </div>

    <pre class="usage"><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>X</span>, <span class='va'>FUN</span>, <span class='va'>...</span>, MARGIN <span class='op'>=</span> <span class='fl'>2</span>, parallel <span class='op'>=</span> <span class='cn'>FALSE</span>, mc.cores <span class='op'>=</span> <span class='fl'>1L</span>,
       return <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"same"</span>, <span class='st'>"matrix"</span>, <span class='st'>"data.frame"</span><span class='op'>)</span>, drop <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>a matrix, data frame or alike object.</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>a function, can be scalar- or vector-valued.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments to <code>FUN</code>.</p></td>
    </tr>
    <tr>
      <th>MARGIN</th>
      <td><p>integer. The margin which <code>FUN</code> will be applied over. Default <code>2</code> indicates columns while <code>1</code> indicates rows. See also Details.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>logical. <code>TRUE</code> implements simple parallel execution by internally calling <code>mclapply</code> instead of <code><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></code>.</p></td>
    </tr>
    <tr>
      <th>mc.cores</th>
      <td><p>integer. Argument to <code>mclapply</code> indicating the number of cores to use for parallel execution. Can use <code>detectCores()</code> to select all available cores.</p></td>
    </tr>
    <tr>
      <th>return</th>
      <td><p>an integer or string indicating the type of object to return. The default <code>1 - "same"</code> returns the same object type (i.e. class and other attributes are retained, just the names for the dimensions are adjusted). <code>2 - "matrix"</code> always returns the output as matrix and <code>3 - "data.frame"</code> always returns a data frame.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>logical. If the result has only one row or one column, <code>drop = TRUE</code> will drop dimensions and return a (named) atomic vector.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>dapply</code> is an efficient command to apply functions to rows or columns of data without loosing information (attributes) about the data or changing the classes or format of the data. It is principally an efficient wrapper around <code><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></code> and works as follows:</p>
<ul>
<li><p>Save the attributes of <code>X</code>.</p></li>
<li><p>If <code>MARGIN = 2</code> (columns), convert matrices to plain lists of columns using <code><a href='quick-conversion.html'>mctl</a></code> and remove all attributes from data frames.</p></li>
<li><p>If <code>MARGIN = 1</code> (rows), convert matrices to plain lists of rows using <code><a href='quick-conversion.html'>mrtl</a></code>. For data frames remove all attributes, efficiently convert to matrix using <code><a href='https://rdrr.io/r/base/do.call.html'>do.call(rbind, X)</a></code> and also convert to list of rows using <code><a href='quick-conversion.html'>mrtl</a></code>.</p></li>
<li><p>Call <code><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></code> or <code>mclapply</code> on these plain lists (which is faster than calling <code>lapply</code> on an object with attributes).</p></li>
<li><p>depending on the requested output type, use <code><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></code>, <code><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></code> or <code><a href='https://rdrr.io/r/base/do.call.html'>do.call(cbind, ...)</a></code> to convert the result back to a matrix or list of columns.</p></li>
<li><p>modify the relevant attributes accordingly and efficiently attach to the object again (no further checks). <!-- % , non essential attributes are kept and added at the end of the attribute list --></p></li>
</ul>

<p>The performance gain from working with plain lists makes <code>dapply</code> not much slower than calling <code>lapply</code> itself on a data frame. Because of the conversions involved, row-operations require some memory, but are still faster than <code><a href='https://rdrr.io/r/base/apply.html'>apply</a></code>.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>X</code> where <code>FUN</code> was applied to every row or column.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='BY.html'>BY</a></code>, <code><a href='collap.html'>collap</a></code>, <a href='fast-statistical-functions.html'>Fast Statistical Functions</a>, <a href='data-transformations.html'>Data Transformations</a>, <a href='index.html'>Collapse Overview</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>log</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Take natural log of each variable</span>
</div><div class='output co'>#&gt;                        mpg      cyl     disp       hp     drat        wt
#&gt; Mazda RX4         3.044522 1.791759 5.075174 4.700480 1.360977 0.9631743
#&gt; Mazda RX4 Wag     3.044522 1.791759 5.075174 4.700480 1.360977 1.0560527
#&gt; Datsun 710        3.126761 1.386294 4.682131 4.532599 1.348073 0.8415672
#&gt; Hornet 4 Drive    3.063391 1.791759 5.552960 4.700480 1.124930 1.1678274
#&gt; Hornet Sportabout 2.928524 2.079442 5.886104 5.164786 1.147402 1.2354715
#&gt; Valiant           2.895912 1.791759 5.416100 4.653960 1.015231 1.2412686
#&gt;                       qsec   vs   am     gear      carb
#&gt; Mazda RX4         2.800933 -Inf    0 1.386294 1.3862944
#&gt; Mazda RX4 Wag     2.834389 -Inf    0 1.386294 1.3862944
#&gt; Datsun 710        2.923699    0    0 1.386294 0.0000000
#&gt; Hornet 4 Drive    2.967333    0 -Inf 1.098612 0.0000000
#&gt; Hornet Sportabout 2.834389 -Inf -Inf 1.098612 0.6931472
#&gt; Valiant           3.006672    0 -Inf 1.098612 0.0000000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>log</span>, return <span class='op'>=</span> <span class='st'>"matrix"</span><span class='op'>)</span><span class='op'>)</span>   <span class='co'># Return as matrix</span>
</div><div class='output co'>#&gt;                        mpg      cyl     disp       hp     drat        wt
#&gt; Mazda RX4         3.044522 1.791759 5.075174 4.700480 1.360977 0.9631743
#&gt; Mazda RX4 Wag     3.044522 1.791759 5.075174 4.700480 1.360977 1.0560527
#&gt; Datsun 710        3.126761 1.386294 4.682131 4.532599 1.348073 0.8415672
#&gt; Hornet 4 Drive    3.063391 1.791759 5.552960 4.700480 1.124930 1.1678274
#&gt; Hornet Sportabout 2.928524 2.079442 5.886104 5.164786 1.147402 1.2354715
#&gt; Valiant           2.895912 1.791759 5.416100 4.653960 1.015231 1.2412686
#&gt;                       qsec   vs   am     gear      carb
#&gt; Mazda RX4         2.800933 -Inf    0 1.386294 1.3862944
#&gt; Mazda RX4 Wag     2.834389 -Inf    0 1.386294 1.3862944
#&gt; Datsun 710        2.923699    0    0 1.386294 0.0000000
#&gt; Hornet 4 Drive    2.967333    0 -Inf 1.098612 0.0000000
#&gt; Hornet Sportabout 2.834389 -Inf -Inf 1.098612 0.6931472
#&gt; Valiant           3.006672    0 -Inf 1.098612 0.0000000</div><div class='input'><span class='va'>m</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>m</span>, <span class='va'>log</span><span class='op'>)</span><span class='op'>)</span>                           <span class='co'># Same thing</span>
</div><div class='output co'>#&gt;                        mpg      cyl     disp       hp     drat        wt
#&gt; Mazda RX4         3.044522 1.791759 5.075174 4.700480 1.360977 0.9631743
#&gt; Mazda RX4 Wag     3.044522 1.791759 5.075174 4.700480 1.360977 1.0560527
#&gt; Datsun 710        3.126761 1.386294 4.682131 4.532599 1.348073 0.8415672
#&gt; Hornet 4 Drive    3.063391 1.791759 5.552960 4.700480 1.124930 1.1678274
#&gt; Hornet Sportabout 2.928524 2.079442 5.886104 5.164786 1.147402 1.2354715
#&gt; Valiant           2.895912 1.791759 5.416100 4.653960 1.015231 1.2412686
#&gt;                       qsec   vs   am     gear      carb
#&gt; Mazda RX4         2.800933 -Inf    0 1.386294 1.3862944
#&gt; Mazda RX4 Wag     2.834389 -Inf    0 1.386294 1.3862944
#&gt; Datsun 710        2.923699    0    0 1.386294 0.0000000
#&gt; Hornet 4 Drive    2.967333    0 -Inf 1.098612 0.0000000
#&gt; Hornet Sportabout 2.834389 -Inf -Inf 1.098612 0.6931472
#&gt; Valiant           3.006672    0 -Inf 1.098612 0.0000000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>m</span>, <span class='va'>log</span>, return <span class='op'>=</span> <span class='st'>"data.frame"</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># Return data frame from matrix</span>
</div><div class='output co'>#&gt;                        mpg      cyl     disp       hp     drat        wt
#&gt; Mazda RX4         3.044522 1.791759 5.075174 4.700480 1.360977 0.9631743
#&gt; Mazda RX4 Wag     3.044522 1.791759 5.075174 4.700480 1.360977 1.0560527
#&gt; Datsun 710        3.126761 1.386294 4.682131 4.532599 1.348073 0.8415672
#&gt; Hornet 4 Drive    3.063391 1.791759 5.552960 4.700480 1.124930 1.1678274
#&gt; Hornet Sportabout 2.928524 2.079442 5.886104 5.164786 1.147402 1.2354715
#&gt; Valiant           2.895912 1.791759 5.416100 4.653960 1.015231 1.2412686
#&gt;                       qsec   vs   am     gear      carb
#&gt; Mazda RX4         2.800933 -Inf    0 1.386294 1.3862944
#&gt; Mazda RX4 Wag     2.834389 -Inf    0 1.386294 1.3862944
#&gt; Datsun 710        2.923699    0    0 1.386294 0.0000000
#&gt; Hornet 4 Drive    2.967333    0 -Inf 1.098612 0.0000000
#&gt; Hornet Sportabout 2.834389 -Inf -Inf 1.098612 0.6931472
#&gt; Valiant           3.006672    0 -Inf 1.098612 0.0000000</div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sum</span><span class='op'>)</span>; <span class='fu'>dapply</span><span class='op'>(</span><span class='va'>m</span>, <span class='va'>sum</span><span class='op'>)</span>            <span class='co'># Computing sum of each column, return as vector</span>
</div><div class='output co'>#&gt;      mpg      cyl     disp       hp     drat       wt     qsec       vs 
#&gt;  642.900  198.000 7383.100 4694.000  115.090  102.952  571.160   14.000 
#&gt;       am     gear     carb 
#&gt;   13.000  118.000   90.000 </div><div class='output co'>#&gt;      mpg      cyl     disp       hp     drat       wt     qsec       vs 
#&gt;  642.900  198.000 7383.100 4694.000  115.090  102.952  571.160   14.000 
#&gt;       am     gear     carb 
#&gt;   13.000  118.000   90.000 </div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sum</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>              <span class='co'># This returns a data frame of 1 row</span>
</div><div class='output co'>#&gt;     mpg cyl   disp   hp   drat      wt   qsec vs am gear carb
#&gt; 1 642.9 198 7383.1 4694 115.09 102.952 571.16 14 13  118   90</div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sum</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>                <span class='co'># Compute row-sum of each column, return as vector</span>
</div><div class='output co'>#&gt;           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive 
#&gt;             328.980             329.795             259.580             426.135 
#&gt;   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
#&gt;             590.310             385.540             656.920             270.980 
#&gt;            Merc 230            Merc 280           Merc 280C          Merc 450SE 
#&gt;             299.570             350.460             349.660             510.740 
#&gt;          Merc 450SL         Merc 450SLC  Cadillac Fleetwood Lincoln Continental 
#&gt;             511.500             509.850             728.560             726.644 
#&gt;   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
#&gt;             725.695             213.850             195.165             206.955 
#&gt;       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28 
#&gt;             273.775             519.650             506.085             646.280 
#&gt;    Pontiac Firebird           Fiat X1-9       Porsche 914-2        Lotus Europa 
#&gt;             631.175             208.215             272.570             273.683 
#&gt;      Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo 142E 
#&gt;             670.690             379.590             694.710             288.890 </div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>m</span>, <span class='va'>sum</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>                     <span class='co'># Same thing for matrices, faster t. apply(m, 1, sum)</span>
</div><div class='output co'>#&gt;           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive 
#&gt;             328.980             329.795             259.580             426.135 
#&gt;   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
#&gt;             590.310             385.540             656.920             270.980 
#&gt;            Merc 230            Merc 280           Merc 280C          Merc 450SE 
#&gt;             299.570             350.460             349.660             510.740 
#&gt;          Merc 450SL         Merc 450SLC  Cadillac Fleetwood Lincoln Continental 
#&gt;             511.500             509.850             728.560             726.644 
#&gt;   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
#&gt;             725.695             213.850             195.165             206.955 
#&gt;       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28 
#&gt;             273.775             519.650             506.085             646.280 
#&gt;    Pontiac Firebird           Fiat X1-9       Porsche 914-2        Lotus Europa 
#&gt;             631.175             208.215             272.570             273.683 
#&gt;      Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo 142E 
#&gt;             670.690             379.590             694.710             288.890 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>m</span>, <span class='va'>sum</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Gives matrix with one column</span>
</div><div class='output co'>#&gt;                       sum
#&gt; Mazda RX4         328.980
#&gt; Mazda RX4 Wag     329.795
#&gt; Datsun 710        259.580
#&gt; Hornet 4 Drive    426.135
#&gt; Hornet Sportabout 590.310
#&gt; Valiant           385.540</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>m</span>, <span class='va'>quantile</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>          <span class='co'># Compute row-quantiles</span>
</div><div class='output co'>#&gt;                   0%    25%   50%    75% 100%
#&gt; Mazda RX4          0 3.2600 4.000 18.730  160
#&gt; Mazda RX4 Wag      0 3.3875 4.000 19.010  160
#&gt; Datsun 710         1 1.6600 4.000 20.705  108
#&gt; Hornet 4 Drive     0 2.0000 3.215 20.420  258
#&gt; Hornet Sportabout  0 2.5000 3.440 17.860  360
#&gt; Valiant            0 1.8800 3.460 19.160  225</div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>m</span>, <span class='va'>quantile</span><span class='op'>)</span>                            <span class='co'># Column-quantiles</span>
</div><div class='output co'>#&gt;         mpg cyl    disp    hp  drat      wt    qsec vs am gear carb
#&gt; 0%   10.400   4  71.100  52.0 2.760 1.51300 14.5000  0  0    3    1
#&gt; 25%  15.425   4 120.825  96.5 3.080 2.58125 16.8925  0  0    3    2
#&gt; 50%  19.200   6 196.300 123.0 3.695 3.32500 17.7100  0  0    4    2
#&gt; 75%  22.800   8 326.000 180.0 3.920 3.61000 18.9000  1  1    4    4
#&gt; 100% 33.900   8 472.000 335.0 4.930 5.42400 22.9000  1  1    5    8</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>quantile</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Same for data frames, output is also a data.frame</span>
</div><div class='output co'>#&gt;                   0%    25%   50%    75% 100%
#&gt; Mazda RX4          0 3.2600 4.000 18.730  160
#&gt; Mazda RX4 Wag      0 3.3875 4.000 19.010  160
#&gt; Datsun 710         1 1.6600 4.000 20.705  108
#&gt; Hornet 4 Drive     0 2.0000 3.215 20.420  258
#&gt; Hornet Sportabout  0 2.5000 3.440 17.860  360
#&gt; Valiant            0 1.8800 3.460 19.160  225</div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>quantile</span><span class='op'>)</span>
</div><div class='output co'>#&gt;         mpg cyl    disp    hp  drat      wt    qsec vs am gear carb
#&gt; 0%   10.400   4  71.100  52.0 2.760 1.51300 14.5000  0  0    3    1
#&gt; 25%  15.425   4 120.825  96.5 3.080 2.58125 16.8925  0  0    3    2
#&gt; 50%  19.200   6 196.300 123.0 3.695 3.32500 17.7100  0  0    4    2
#&gt; 75%  22.800   8 326.000 180.0 3.920 3.61000 18.9000  1  1    4    4
#&gt; 100% 33.900   8 472.000 335.0 4.930 5.42400 22.9000  1  1    5    8</div><div class='input'>
<span class='co'># With classed objects, we have to be a bit careful</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'>dapply</span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, <span class='va'>quantile</span><span class='op'>)</span>  <span class='co'># This gives an error because the tsp attribute is misspecified</span>
<span class='op'>}</span>
<span class='fu'>dapply</span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, <span class='va'>quantile</span>, return <span class='op'>=</span> <span class='st'>"matrix"</span><span class='op'>)</span>    <span class='co'># These both work fine..</span>
</div><div class='output co'>#&gt;           DAX      SMI     CAC     FTSE
#&gt; 0%   1402.340 1587.400 1611.00 2281.000
#&gt; 25%  1744.102 2165.625 1875.15 2843.150
#&gt; 50%  2140.565 2796.350 1992.30 3246.600
#&gt; 75%  2722.367 3812.425 2274.35 3993.575
#&gt; 100% 6186.090 8412.000 4388.50 6179.000</div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, <span class='va'>quantile</span>, return <span class='op'>=</span> <span class='st'>"data.frame"</span><span class='op'>)</span>
</div><div class='output co'>#&gt;           DAX      SMI     CAC     FTSE
#&gt; 0%   1402.340 1587.400 1611.00 2281.000
#&gt; 25%  1744.102 2165.625 1875.15 2843.150
#&gt; 50%  2140.565 2796.350 1992.30 3246.600
#&gt; 75%  2722.367 3812.425 2274.35 3993.575
#&gt; 100% 6186.090 8412.000 4388.50 6179.000</div><div class='input'> 
<span class='co'># Similarly for grouped tibbles and other data frame based classes</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>gmtcars</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>mtcars</span>,<span class='va'>cyl</span>,<span class='va'>vs</span>,<span class='va'>am</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>gmtcars</span>, <span class='va'>log</span><span class='op'>)</span><span class='op'>)</span>               <span class='co'># Still gives a grouped tibble back</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 6 x 11</span><span>
#&gt; </span><span style='color: #949494;'># Groups:   cyl, vs, am [4]</span><span>
#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>  3.04  1.79  5.08  4.70  1.36 0.963  2.80  -</span><span style='color: #BB0000;'>Inf</span><span>     0  1.39 1.39 
#&gt; </span><span style='color: #BCBCBC;'>2</span><span>  3.04  1.79  5.08  4.70  1.36 1.06   2.83  -</span><span style='color: #BB0000;'>Inf</span><span>     0  1.39 1.39 
#&gt; </span><span style='color: #BCBCBC;'>3</span><span>  3.13  1.39  4.68  4.53  1.35 0.842  2.92     0     0  1.39 0    
#&gt; </span><span style='color: #BCBCBC;'>4</span><span>  3.06  1.79  5.55  4.70  1.12 1.17   2.97     0  -</span><span style='color: #BB0000;'>Inf</span><span>  1.10 0    
#&gt; </span><span style='color: #BCBCBC;'>5</span><span>  2.93  2.08  5.89  5.16  1.15 1.24   2.83  -</span><span style='color: #BB0000;'>Inf</span><span>  -</span><span style='color: #BB0000;'>Inf</span><span>  1.10 0.693
#&gt; </span><span style='color: #BCBCBC;'>6</span><span>  2.90  1.79  5.42  4.65  1.02 1.24   3.01     0  -</span><span style='color: #BB0000;'>Inf</span><span>  1.10 0    </div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>gmtcars</span>, <span class='va'>quantile</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>    <span class='co'># Here it makes sense to keep the groups attribute</span>
</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 32 x 5</span><span>
#&gt; </span><span style='color: #949494;'># Groups:   cyl, vs, am [7]</span><span>
#&gt;     `0%` `25%` `50%` `75%` `100%`
#&gt;  </span><span style='color: #BCBCBC;'>*</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span>     0  3.26  4     18.7   160 
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span>     0  3.39  4     19.0   160 
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span>     1  1.66  4     20.7   108 
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span>     0  2     3.22  20.4   258 
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span>     0  2.5   3.44  17.9   360 
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span>     0  1.88  3.46  19.2   225 
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span>     0  3.10  4     15.1   360 
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span>     0  2.60  4     22.2   147.
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span>     0  2.58  4     22.8   141.
#&gt; </span><span style='color: #BCBCBC;'>10</span><span>     0  3.68  4     18.8   168.
#&gt; </span><span style='color: #949494;'># ... with 22 more rows</span><span></div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>gmtcars</span>, <span class='va'>quantile</span><span class='op'>)</span>                <span class='co'># This does not make much sense, ...</span>
</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 5 x 11</span><span>
#&gt; </span><span style='color: #949494;'># Groups:   cyl, vs, am [7]</span><span>
#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
#&gt; </span><span style='color: #BCBCBC;'>*</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>  10.4     4  71.1  52    2.76  1.51  14.5     0     0     3     1
#&gt; </span><span style='color: #BCBCBC;'>2</span><span>  15.4     4 121.   96.5  3.08  2.58  16.9     0     0     3     2
#&gt; </span><span style='color: #BCBCBC;'>3</span><span>  19.2     6 196.  123    3.70  3.32  17.7     0     0     4     2
#&gt; </span><span style='color: #BCBCBC;'>4</span><span>  22.8     8 326   180    3.92  3.61  18.9     1     1     4     4
#&gt; </span><span style='color: #BCBCBC;'>5</span><span>  33.9     8 472   335    4.93  5.42  22.9     1     1     5     8</div><div class='input'><span class='fu'>dapply</span><span class='op'>(</span><span class='va'>gmtcars</span>, <span class='va'>quantile</span>,                <span class='co'># better convert to plain data.frame:</span>
       return <span class='op'>=</span> <span class='st'>"data.frame"</span><span class='op'>)</span>
</div><div class='output co'>#&gt;         mpg cyl    disp    hp  drat      wt    qsec vs am gear carb
#&gt; 0%   10.400   4  71.100  52.0 2.760 1.51300 14.5000  0  0    3    1
#&gt; 25%  15.425   4 120.825  96.5 3.080 2.58125 16.8925  0  0    3    2
#&gt; 50%  19.200   6 196.300 123.0 3.695 3.32500 17.7100  0  0    4    2
#&gt; 75%  22.800   8 326.000 180.0 3.920 3.61000 18.9000  1  1    4    4
#&gt; 100% 33.900   8 472.000 335.0 4.930 5.42400 22.9000  1  1    5    8</div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


