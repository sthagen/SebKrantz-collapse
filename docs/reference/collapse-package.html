<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head><link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>
Advanced and Fast Data Transformation — collapse-package • collapse</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="
Advanced and Fast Data Transformation — collapse-package" />
<meta property="og:description" content="collapse is a C/C++ based package for data transformation and statistical computing in R. It's aims are:
To facilitate complex data transformation, exploration and computing tasks in R.
To help make R code fast, flexible, parsimonious and programmer friendly. 

It is made compatible with dplyr, data.table and the plm approach to panel data, and non-destructively handles other classes." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" target="_blank">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/collapse_R" target="_blank">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" target="_blank">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1><!-- %   \code{collapse:} -->
Advanced and Fast Data Transformation</h1>
    
    <div class="hidden name"><code>collapse-package.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><em>collapse</em> is a C/C++ based package for data transformation and statistical computing in R. It's aims are:</p><ul>
<li><p>To facilitate complex data transformation, exploration and computing tasks in R.</p></li>
<li><p>To help make R code fast, flexible, parsimonious and programmer friendly. <!-- % \emph{collapse} is a fast  %to facilitate (advanced) data manipulation in R   % To achieve the latter, -->
<!-- % collapse provides a broad set.. -&gt; Nah, it's not a misc package --></p></li>
</ul><p>It is made compatible with <em>dplyr</em>, <em>data.table</em> and the <em>plm</em> approach to panel data, and non-destructively handles other classes.</p>
    </div>



    <h2 class="hasAnchor" id="getting-started"><a class="anchor" href="#getting-started"></a>Getting Started</h2>

    <p>See <a href='index.html'>Collapse Documentation &amp; Overview</a>, or read the <a href='https://sebkrantz.github.io/collapse/articles/collapse_intro.html'>introductory vignette</a>. All vignettes can be accessed on the <a href='https://sebkrantz.github.io/collapse/'>package website</a>. A cheatsheet is available at <a href='https://raw.githubusercontent.com/rstudio/cheatsheets/master/collapse.pdf'>Rstudio</a>.
A compact introduction for quick-starters is provided in the examples section below.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><!-- % Put this below bullet points ?? % \emph{collapse} provides a carefully conceived % \emph{collapse} provides a compact set of functions % organized roughly into several topics -->
<em>collapse</em> provides an integrated suite of statistical and data manipulation functions. These improve, complement and extend the capabilities of base R and packages like <em>dplyr</em>, <em>data.table</em>, <em>plm</em>, <em>matrixStats</em>, <em>Rfast</em> etc.. Key Highlights:</p>
<ul>
<li><p>Fast C/C++ based (grouped, weighted) computations embedded in highly optimized R code.</p></li>
<li><p>More complex statistical, time series / panel data and recursive (list-processing) operations.</p></li>
<li><p>A flexible and generic approach supporting and preserving many R objects. <!-- % standard  % (S3 generic statistical functions, class/attribute preservation). % , compatibility with \emph{dplyr}, \emph{plm} and \emph{data.table} --></p></li>
<li><p>Optimized programming in standard and non-standard evaluation.</p></li>
</ul><p><!-- % To explain this a bit: -->
The statistical functions in <em>collapse</em> are S3 generic with core methods for vectors, matrices and data frames, and internally support grouped and weighted computations carried out in C/C++. <!-- %Thus functions need only be called once for column-wise and/or grouped computations, providing a lot of extra speed and full support for sampling weights. -->
R code is strongly optimized and inputs are swiftly passed to compiled C/C++ code, <!-- %, with further checks run at that level. -->
where various efficient algorithms are implemented. <!-- %This approach enables flexible and parsimonious programming and data manipulation in R at high speeds. --></p>
<p><!-- %when passed to a \emph{collapse} statistical function together with a suitable data object % To provide extra speed and programmability -->
To facilitate efficient programming, core S3 methods, grouping and ordering functionality and some C-level helper functions can be accessed by the user.</p>
<p><!-- %For example \code{GRP()} creates grouping objects directly passed to C++ by statistical functions. \code{fgroup_by()} attaches these objects to a data frame, yielding efficient chained calls when combined with \emph{magrittr} pipes, \link[=A3-fast-data-manipulation]{fast manipulation functions} and \link[=A1-fast-statistical-functions]{fast statistical functions}. --></p>
<p><!-- %Performance gains are also realized when grouping with factors, or computing on grouped (\emph{dplyr}) or panel data (\emph{plm}) frames. --></p>
<p><!-- %Hence \emph{collapse} enables optimized programming and data manipulation in both standard and non-standard evaluation. --></p>
<p><!-- %The function \code{fgroup_by} can be used to efficiently create a grouped tibble inside dplyr-like chained calls (constructed with \emph{magrittr} pipes, fast manipulation functions like \code{fselect}, \code{fsubset}, \code{ftransform} and fast statistical functions). Thus \emph{collapse} enables optimized programming in both standard and non-standard evaluation. --></p>

<p><!-- % attributes of atomic objects are preserved if the dimensions are unaltered by the computation, and data frame attributes are always preserved, --></p>
<p>Additional (hidden) S3 methods provide broad based compatibility with <em>dplyr</em> (grouped tibble), <em>data.table</em> and <em>plm</em> panel data classes. Functions and core methods also seek to preserve object attributes (including column attributes such as variable labels), ensuring flexibility and non-destructive workflows with a very broad range of R objects (including most time-series classes).</p>
<p>Missing values are efficiently skipped at C/C++ level. The package default is <code>na.rm = TRUE</code>, whereas <code>na.rm = FALSE</code> also yields efficient checking and early termination. Missing weights are supported. Core functionality and all statistical functions / computations are tested with 10,000 unit tests for Base R equivalence, exempting some improvements (e.g. <code><a href='fsum.html'>fsum(NA, na.rm = TRUE)</a></code> evaluates to <code>NA</code>, not 0, similarly for <code>fmin</code> and <code>fmax</code>; no <code>NaN</code> values are generated from computations involving <code>NA</code> values). Generic functions provide some <a href='collapse-options.html'>security</a> against silent swallowing of arguments.</p>
<p><!-- %Hence they also handle various date and time series classes etc., and can easily be integreated into most approaches to data transformation. --></p>
<p><!-- %A global \code{option("collapse_unused_arg_action")} can be set to regulate the behavior when unused arguments are passed to a generic function. The default is to issue a warning. --></p>

<p><em>collapse</em> installs with a built-in hierarchical <a href='index.html'>documentation</a> facilitating the use of the package. The vignettes are complimentary and also follow a more structured approach. <!-- % and \code{base/stats}. % extra methods warrant, provide ? --></p>
<p><!-- %Apart from general performance considerations, \emph{collapse} excels at applications involving fast panel data transformations and techniques, fast weighted computations (e.g. weighted aggregation), fast programming and aggregation with categorical and mixed-type data, fast programming with (multivariate) time series, and programming with lists of data objects. --></p>
<p><!-- %Other broad areas are fast grouped and weighted programming to implement new statistical techniques and packages, and fast data manipulation code (i.e. server-side for \code{shiny} apps). --></p>
<p><!-- % The package largely avoids non-standard evaluation and exports core methods for maximum programmability.  % Most are S3 generic with methods for common \code{R} objects (vectors, matrices, data frames, \dots) % high computation  %(aggregation and transformations ~10x \emph{data.table} on data &lt;1 Mio obs.). --></p>
<p><!-- % Beyond speed, flexibility and parsimony in coding, a central objective of \emph{collapse} is to facilitate advanced / complex operations on data. -->
The package is mainly coded in C++ and built with <em>Rcpp</em>, but also uses C functions from <em>data.table</em> (grouping, ordering, subsetting, row-binding), <em>fixest</em> (centering on multiple factors), <em>weights</em> (weighted pairwise correlations), <em>stats</em> (ACF and PACF) and <em>RcppArmadillo / RcppEigen</em> (fast linear fitting methods). For the moment <em>collapse</em> does not utilize low-level parallelism (such as OpenMP).
<!-- % \emph{collapse} is built with \code{Rcpp} and imports \code{C} functions from \emph{data.table}, \emph{lfe} and \emph{stats}. %, and uses \code{ggplot2} visualizations. --></p>


    <h2 class="hasAnchor" id="author-s-"><a class="anchor" href="#author-s-"></a>Author(s)</h2>

    <p><!-- % \author{ -->
<b>Maintainer</b>: Sebastian Krantz <a href='mailto:sebastian.krantz@graduateinstitute.ch'>sebastian.krantz@graduateinstitute.ch</a></p>
<p>Other contributors from packages <em>collapse</em> utilizes:</p><ul>
<li><p>Matt Dowle, Arun Srinivasan and contributors worldwide (<em>data.table</em>)</p></li>
<li><p>Dirk Eddelbuettel and contributors worldwide (<em>Rcpp</em>, <em>RcppArmadillo</em>, <em>RcppEigen</em>)</p></li>
<li><p>Laurent Berge (<em>fixest</em>)</p></li>
<li><p>Josh Pasek (<em>weights</em>)</p></li>
<li><p>R Core Team and contributors worldwide (<em>stats</em>)</p></li>
</ul><p>I thank Ralf Stubner, Joseph Wood and Dirk Eddelbuettel for helpful answers on Stackoverflow, Joris Meys for encouraging me and helping to set up the <a href='https://github.com/SebKrantz/collapse'>Github repository</a> for <em>collapse</em>, Matthieu Stigler, Patrice Kiener, Zhiyi Xu and Kevin Tappe for feature requests and helpful suggestions.</p>
    <h2 class="hasAnchor" id="developing-feature-requests-bug-reporting"><a class="anchor" href="#developing-feature-requests-bug-reporting"></a>Developing / Feature Requests / Bug Reporting</h2>

    
<ul>
<li><p>If you are interested in extending or optimizing this package, see the source code at <a href='https://github.com/SebKrantz/collapse/tree/master'>https://github.com/SebKrantz/collapse/tree/master</a>, fork and send pull-requests, or e-mail me.</p></li>
<li><p>Please send feature requests via e-mail.</p></li>
<li><p>Please report issues at <a href='https://github.com/SebKrantz/collapse/issues'>https://github.com/SebKrantz/collapse/issues</a> or e-mail me.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Let's start with some statistical programming</span>
<span class='va'>v</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>$</span><span class='va'>Sepal.Length</span>
<span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span>    <span class='co'># Saving numeric variables</span>
<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span>      <span class='co'># Factor</span>

<span class='co'># Simple statistics</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span>               <span class='co'># vector</span>
</div><div class='output co'>#&gt; [1] 5.843333</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># matrix (qM is a faster as.matrix)</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.843333     3.057333     3.758000     1.199333 </div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span>               <span class='co'># data.frame</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.843333     3.057333     3.758000     1.199333 </div><div class='input'>
<span class='co'># Preserving data structure</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>     <span class='co'># Still a matrix</span>
</div><div class='output co'>#&gt;      Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; [1,]     5.843333    3.057333        3.758    1.199333</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>         <span class='co'># Still a data.frame</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.843333    3.057333        3.758    1.199333</div><div class='input'>
<span class='co'># Weighted statistics, supported by most functions...</span>
<span class='va'>w</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='small-helper.html'>fnrow</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, w <span class='op'>=</span> <span class='va'>w</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.787364     3.112572     3.623407     1.169427 </div><div class='input'>
<span class='co'># Grouped statistics...</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; setosa            5.006       3.428        1.462       0.246
#&gt; versicolor        5.936       2.770        4.260       1.326
#&gt; virginica         6.588       2.974        5.552       2.026</div><div class='input'>
<span class='co'># Groupwise-weighted statistics...</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; setosa         5.056369    3.504091     1.478278   0.2617041
#&gt; versicolor     5.894575    2.734289     4.242304   1.3342519
#&gt; virginica      6.504715    3.001173     5.469777   2.0332594</div><div class='input'>
<span class='co'># Simple Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmode.html'>fmode</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># Replacing values with the mode</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1            5           3          1.5         0.2
#&gt; 2            5           3          1.5         0.2
#&gt; 3            5           3          1.5         0.2
#&gt; 4            5           3          1.5         0.2
#&gt; 5            5           3          1.5         0.2
#&gt; 6            5           3          1.5         0.2</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Subtracting the median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1         -0.7         0.5        -2.95        -1.1
#&gt; 2         -0.9         0.0        -2.95        -1.1
#&gt; 3         -1.1         0.2        -3.05        -1.1
#&gt; 4         -1.2         0.1        -2.85        -1.1
#&gt; 5         -0.8         0.6        -2.95        -1.1
#&gt; 6         -0.4         0.9        -2.65        -0.9</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"%"</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># Computing percentages</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    0.5818597   0.7631923    0.2483591   0.1111729
#&gt; 2    0.5590416   0.6541648    0.2483591   0.1111729
#&gt; 3    0.5362236   0.6977758    0.2306191   0.1111729
#&gt; 4    0.5248146   0.6759703    0.2660990   0.1111729
#&gt; 5    0.5704507   0.7849978    0.2483591   0.1111729
#&gt; 6    0.6160867   0.8504143    0.3015789   0.2223457</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>            <span class='co'># Dividing by the standard-deviation (scaling), etc...</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     6.158928    8.029986    0.7930671   0.2623854
#&gt; 2     5.917402    6.882845    0.7930671   0.2623854
#&gt; 3     5.675875    7.341701    0.7364195   0.2623854
#&gt; 4     5.555112    7.112273    0.8497148   0.2623854
#&gt; 5     6.038165    8.259414    0.7930671   0.2623854
#&gt; 6     6.521218    8.947698    0.9630101   0.5247707</div><div class='input'>
<span class='co'># Weighted Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='fl'>0.75</span>, w <span class='op'>=</span> <span class='va'>w</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Replacing by the weighted 3rd quartile</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          6.3         3.4          5.1         1.8
#&gt; 2          6.3         3.4          5.1         1.8
#&gt; 3          6.3         3.4          5.1         1.8
#&gt; 4          6.3         3.4          5.1         1.8
#&gt; 5          6.3         3.4          5.1         1.8
#&gt; 6          6.3         3.4          5.1         1.8</div><div class='input'>
<span class='co'># Grouped Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar_fsd.html'>fvar</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Replacing values with the group variance</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 2     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 3     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 4     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 5     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 6     0.124249   0.1436898   0.03015918  0.01110612</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Grouped scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     14.46851    9.233260     8.061544    1.897793
#&gt; 2     13.90112    7.914223     8.061544    1.897793
#&gt; 3     13.33372    8.441838     7.485720    1.897793
#&gt; 4     13.05003    8.178031     8.637369    1.897793
#&gt; 5     14.18481    9.497068     8.061544    1.897793
#&gt; 6     15.31960   10.288490     9.789018    3.795585</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmin_fmax.html'>fmin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Setting the minimum value in each species to 0</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.8         1.2          0.4         0.1
#&gt; 2          0.6         0.7          0.4         0.1
#&gt; 3          0.4         0.9          0.3         0.1
#&gt; 4          0.3         0.8          0.5         0.1
#&gt; 5          0.7         1.3          0.4         0.1
#&gt; 6          1.1         1.6          0.7         0.3</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Dividing by the sum (proportions)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   0.02037555  0.02042007   0.01915185  0.01626016
#&gt; 2   0.01957651  0.01750292   0.01915185  0.01626016
#&gt; 3   0.01877747  0.01866978   0.01778386  0.01626016
#&gt; 4   0.01837795  0.01808635   0.02051984  0.01626016
#&gt; 5   0.01997603  0.02100350   0.01915185  0.01626016
#&gt; 6   0.02157411  0.02275379   0.02325581  0.03252033</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Groupwise de-median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.1         0.1         -0.1         0.0
#&gt; 2         -0.1        -0.4         -0.1         0.0
#&gt; 3         -0.3        -0.2         -0.2         0.0
#&gt; 4         -0.4        -0.3          0.0         0.0
#&gt; 5          0.0         0.2         -0.1         0.0
#&gt; 6          0.4         0.5          0.2         0.2</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ffirst_flast.html'>ffirst</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"%%"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Taking modulus of first group-value, etc. ...</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.0         0.0          0.0           0
#&gt; 2          4.9         3.0          0.0           0
#&gt; 3          4.7         3.2          1.3           0
#&gt; 4          4.6         3.1          0.1           0
#&gt; 5          5.0         0.1          0.0           0
#&gt; 6          0.3         0.4          0.3           0</div><div class='input'>
<span class='co'># Grouped and weighted transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"/"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span>         <span class='co'># weighted scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     14.43269   10.969324     7.791239    1.686259
#&gt; 2     13.86671    9.402278     7.791239    1.686259
#&gt; 3     13.30072   10.029096     7.234722    1.686259</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"-"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span>     <span class='co'># subtracting the weighted group-median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.1         0.0         -0.1           0
#&gt; 2         -0.1        -0.5         -0.1           0
#&gt; 3         -0.3        -0.3         -0.2           0</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmode.html'>fmode</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"replace"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span> <span class='co'># replace with weighted statistical mode</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1            5         3.4          1.4         0.2
#&gt; 2            5         3.4          1.4         0.2
#&gt; 3            5         3.4          1.4         0.2</div><div class='input'>
<span class='co'>## Some more advanced transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>fbetween</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                             <span class='co'># Averaging (faster t.: fmean(d, TRA = "replace"))</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.843333    3.057333        3.758    1.199333
#&gt; 2     5.843333    3.057333        3.758    1.199333
#&gt; 3     5.843333    3.057333        3.758    1.199333
#&gt; 4     5.843333    3.057333        3.758    1.199333
#&gt; 5     5.843333    3.057333        3.758    1.199333
#&gt; 6     5.843333    3.057333        3.758    1.199333</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                              <span class='co'># Centering (faster than: fmean(d, TRA = "-"))</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   -0.7433333  0.44266667       -2.358  -0.9993333
#&gt; 2   -0.9433333 -0.05733333       -2.358  -0.9993333
#&gt; 3   -1.1433333  0.14266667       -2.458  -0.9993333
#&gt; 4   -1.2433333  0.04266667       -2.258  -0.9993333
#&gt; 5   -0.8433333  0.54266667       -2.358  -0.9993333
#&gt; 6   -0.4433333  0.84266667       -2.058  -0.7993333</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span><span class='op'>)</span>                        <span class='co'># Grouped and weighted (same as fmean(d, f, w, "-"))</span>
</div><div class='output co'>#&gt;   Sepal.Length  Sepal.Width Petal.Length Petal.Width
#&gt; 1   0.04363065 -0.004090797  -0.07827839 -0.06170405
#&gt; 2  -0.15636935 -0.504090797  -0.07827839 -0.06170405
#&gt; 3  -0.35636935 -0.304090797  -0.17827839 -0.06170405
#&gt; 4  -0.45636935 -0.404090797   0.02172161 -0.06170405
#&gt; 5  -0.05636935  0.095909203  -0.07827839 -0.06170405
#&gt; 6   0.34363065  0.395909203   0.22172161  0.13829595</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>              <span class='co'># Setting a custom mean</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.043631    4.995909     4.921722    4.938296
#&gt; 2     4.843631    4.495909     4.921722    4.938296
#&gt; 3     4.643631    4.695909     4.821722    4.938296
#&gt; 4     4.543631    4.595909     5.021722    4.938296
#&gt; 5     4.943631    5.095909     4.921722    4.938296
#&gt; 6     5.343631    5.395909     5.221722    5.138296</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, theta <span class='op'>=</span> <span class='fl'>0.76</span><span class='op'>)</span><span class='op'>)</span>          <span class='co'># Quasi-centering i.e. d - theta*fbetween(d, f, w)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    1.2571593    0.836891    0.2765084 0.001104919
#&gt; 2    1.0571593    0.336891    0.2765084 0.001104919
#&gt; 3    0.8571593    0.536891    0.1765084 0.001104919
#&gt; 4    0.7571593    0.436891    0.3765084 0.001104919
#&gt; 5    1.1571593    0.936891    0.2765084 0.001104919
#&gt; 6    1.5571593    1.236891    0.5765084 0.201104919</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Preserving the overall mean of the data</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.830995    3.108481     3.545128    1.107723
#&gt; 2     5.630995    2.608481     3.545128    1.107723
#&gt; 3     5.430995    2.808481     3.445128    1.107723
#&gt; 4     5.330995    2.708481     3.645128    1.107723
#&gt; 5     5.730995    3.208481     3.545128    1.107723
#&gt; 6     6.130995    3.508481     3.845128    1.307723</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                               <span class='co'># Scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   -0.8976739  1.01560199    -1.335752   -1.311052
#&gt; 2   -1.1392005 -0.13153881    -1.335752   -1.311052
#&gt; 3   -1.3807271  0.32731751    -1.392399   -1.311052
#&gt; 4   -1.5014904  0.09788935    -1.279104   -1.311052
#&gt; 5   -1.0184372  1.24503015    -1.335752   -1.311052
#&gt; 6   -0.5353840  1.93331463    -1.165809   -1.048667</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, mean <span class='op'>=</span> <span class='fl'>5</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>             <span class='co'># Custom scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    2.3069784    8.046806    0.9927451    1.066844
#&gt; 2    1.5823985    4.605384    0.9927451    1.066844
#&gt; 3    0.8578187    5.981953    0.8228021    1.066844
#&gt; 4    0.4955288    5.293668    1.1626881    1.066844
#&gt; 5    1.9446885    8.735090    0.9927451    1.066844
#&gt; 6    3.3938481   10.799944    1.5025740    1.854000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, mean <span class='op'>=</span> <span class='cn'>FALSE</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Mean preserving scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     3.150312    6.104139  -0.24925490   -2.733823
#&gt; 2     2.425732    2.662717  -0.24925490   -2.733823
#&gt; 3     1.701152    4.039286  -0.41919786   -2.733823
#&gt; 4     1.338862    3.351001  -0.07931195   -2.733823
#&gt; 5     2.788022    6.792424  -0.24925490   -2.733823
#&gt; 6     4.237181    8.857277   0.26057397   -1.946667</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span><span class='op'>)</span>                         <span class='co'># Grouped and weighted scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    0.1234721 -0.01282094   -0.4356326  -0.5202449
#&gt; 2   -0.4425159 -1.57986719   -0.4356326  -0.5202449
#&gt; 3   -1.0085039 -0.95304869   -0.9921497  -0.5202449
#&gt; 4   -1.2914979 -1.26645794    0.1208845  -0.5202449
#&gt; 5   -0.1595219  0.30058831   -0.4356326  -0.5202449
#&gt; 6    0.9724542  1.24081607    1.2339187   1.1660136</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='fl'>5</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>       <span class='co'># Custom grouped and weighted scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.370416   4.9615372     3.693102    3.439265
#&gt; 2     3.672452   0.2603984     3.693102    3.439265
#&gt; 3     1.974488   2.1408539     2.023551    3.439265
#&gt; 4     1.125506   1.2006262     5.362653    3.439265
#&gt; 5     4.521434   5.9017649     3.693102    3.439265
#&gt; 6     7.917363   8.7224482     8.701756    8.498041</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='cn'>FALSE</span>,            <span class='co'># Preserving group means</span>
            sd <span class='op'>=</span> <span class='st'>"within.sd"</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># and setting group-sd to fsd(fwithin(d, f, w), w = w)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.118143    3.500154     1.285450   0.1498163
#&gt; 2     4.834977    3.019011     1.285450   0.1498163
#&gt; 3     4.551810    3.211468     1.039112   0.1498163
#&gt; 4     4.410227    3.115240     1.531787   0.1498163
#&gt; 5     4.976560    3.596383     1.285450   0.1498163
#&gt; 6     5.542893    3.885069     2.024461   0.5124757</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span>,   <span class='co'># Full harmonization of group means and variances,</span>
            sd <span class='op'>=</span> <span class='st'>"within.sd"</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># while preserving the level and scale of the data.</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.849138    3.108635     3.430578    1.057539
#&gt; 2     5.565972    2.627492     3.430578    1.057539
#&gt; 3     5.282805    2.819949     3.184241    1.057539
#&gt; 4     5.141222    2.723720     3.676915    1.057539
#&gt; 5     5.707555    3.204864     3.430578    1.057539
#&gt; 6     6.273888    3.493550     4.169589    1.420199</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Use get_vars for fast selecting, gv is shortcut</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1          5.1         3.5
#&gt; 2          4.9         3.0
#&gt; 3          4.7         3.2
#&gt; 4          4.6         3.1
#&gt; 5          5.0         3.6
#&gt; 6          5.4         3.9</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fhdbetween_fhdwithin.html'>fhdbetween</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Linear prediction with factors and covariates</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1     4.950107    3.389732
#&gt; 2     4.950107    3.389732
#&gt; 3     4.859513    3.374264
#&gt; 4     5.040702    3.405199
#&gt; 5     4.950107    3.389732
#&gt; 6     5.220692    3.560823</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fhdbetween_fhdwithin.html'>fhdwithin</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Linear partialling out factors and covariates</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1   0.14989286   0.1102684
#&gt; 2  -0.05010714  -0.3897316
#&gt; 3  -0.15951256  -0.1742640
#&gt; 4  -0.44070173  -0.3051992
#&gt; 5   0.04989286   0.2102684
#&gt; 6   0.17930818   0.3391766</div><div class='input'><span class='fu'><a href='fsubset.html'>ss</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>                            <span class='co'># Similarly fsubset/ss for fast subsetting rows</span>
</div><div class='output co'>#&gt;    Sepal.Length Sepal.Width
#&gt; 1           5.1         3.5
#&gt; 2           4.9         3.0
#&gt; 3           4.7         3.2
#&gt; 4           4.6         3.1
#&gt; 5           5.0         3.6
#&gt; 6           5.4         3.9
#&gt; 7           4.6         3.4
#&gt; 8           5.0         3.4
#&gt; 9           4.4         2.9
#&gt; 10          4.9         3.1</div><div class='input'>
<span class='co'># Simple Time-Computations..</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='va'>AirPassengers</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># One lead and three lags</span>
</div><div class='output co'>#&gt;       F1  --  L1  L2  L3
#&gt; [1,] 118 112  NA  NA  NA
#&gt; [2,] 132 118 112  NA  NA
#&gt; [3,] 129 132 118 112  NA
#&gt; [4,] 121 129 132 118 112
#&gt; [5,] 135 121 129 132 118
#&gt; [6,] 148 135 121 129 132</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>,                     <span class='co'># Suitably lagged first and second differences</span>
      <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/stats/time.html'>frequency</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span><span class='op'>)</span><span class='op'>)</span>, diff <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      D1.DAX D2.DAX L260D1.DAX L260D2.DAX D1.SMI D2.SMI L260D1.SMI L260D2.SMI
#&gt; [1,]     NA     NA         NA         NA     NA     NA         NA         NA
#&gt; [2,] -15.12     NA         NA         NA   10.4     NA         NA         NA
#&gt; [3,]  -7.12   8.00         NA         NA   -9.9  -20.3         NA         NA
#&gt; [4,]  14.53  21.65         NA         NA    5.5   15.4         NA         NA
#&gt; [5,]  -2.88 -17.41         NA         NA    2.5   -3.0         NA         NA
#&gt; [6,]  -7.55  -4.67         NA         NA  -15.0  -17.5         NA         NA
#&gt;      D1.CAC D2.CAC L260D1.CAC L260D2.CAC D1.FTSE D2.FTSE L260D1.FTSE
#&gt; [1,]     NA     NA         NA         NA      NA      NA          NA
#&gt; [2,]  -22.3     NA         NA         NA    16.6      NA          NA
#&gt; [3,]  -32.5  -10.2         NA         NA   -12.0   -28.6          NA
#&gt; [4,]   -9.9   22.6         NA         NA    22.2    34.2          NA
#&gt; [5,]   15.0   24.9         NA         NA    14.3    -7.9          NA
#&gt; [6,]   -8.8  -23.8         NA         NA   -17.9   -32.2          NA
#&gt;      L260D2.FTSE
#&gt; [1,]          NA
#&gt; [2,]          NA
#&gt; [3,]          NA
#&gt; [4,]          NA
#&gt; [5,]          NA
#&gt; [6,]          NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, rho <span class='op'>=</span> <span class='fl'>0.87</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Quasi-differences (x_t - rho*x_t-1)</span>
</div><div class='output co'>#&gt;           DAX     SMI     CAC    FTSE
#&gt; [1,]       NA      NA      NA      NA
#&gt; [2,] 196.6175 228.553 208.164 334.268
#&gt; [3,] 202.6519 209.605 195.065 307.826
#&gt; [4,] 223.3763 223.718 213.440 340.466
#&gt; [5,] 207.8552 221.433 237.053 335.452
#&gt; [6,] 202.8108 204.258 215.203 305.111</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, log <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Log-differences</span>
</div><div class='output co'>#&gt;               DAX          SMI          CAC         FTSE
#&gt; [1,]           NA           NA           NA           NA
#&gt; [2,] -0.009326550  0.006178360 -0.012658756  0.006770286
#&gt; [3,] -0.004422175 -0.005880448 -0.018740638 -0.004889587
#&gt; [4,]  0.009003794  0.003271184 -0.005779182  0.009027020
#&gt; [5,] -0.001778217  0.001483372  0.008743353  0.005771847
#&gt; [6,] -0.004676712 -0.008933417 -0.005120160 -0.007230164</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span><span class='op'>)</span><span class='op'>)</span>                  <span class='co'># Exact growth rates (percentage change)</span>
</div><div class='output co'>#&gt;             DAX        SMI        CAC       FTSE
#&gt; [1,]         NA         NA         NA         NA
#&gt; [2,] -0.9283193  0.6197485 -1.2578971  0.6793256
#&gt; [3,] -0.4412412 -0.5863192 -1.8566124 -0.4877652
#&gt; [4,]  0.9044450  0.3276540 -0.5762515  0.9067887
#&gt; [5,] -0.1776637  0.1484472  0.8781687  0.5788536
#&gt; [6,] -0.4665793 -0.8893632 -0.5107074 -0.7204089</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, logdiff <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Log-difference growth rates (percentage change)</span>
</div><div class='output co'>#&gt;             DAX        SMI        CAC       FTSE
#&gt; [1,]         NA         NA         NA         NA
#&gt; [2,] -0.9326550  0.6178360 -1.2658756  0.6770286
#&gt; [3,] -0.4422175 -0.5880448 -1.8740638 -0.4889587
#&gt; [4,]  0.9003794  0.3271184 -0.5779182  0.9027020
#&gt; [5,] -0.1778217  0.1483372  0.8743353  0.5771847
#&gt; [6,] -0.4676712 -0.8933417 -0.5120160 -0.7230164</div><div class='input'><span class='co'># Note that it is not necessary to use factors for grouping.</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span> <span class='co'># Can also use vector (internally converted using qF())</span>
</div><div class='output co'>#&gt;        mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4 26.66364 105.1364  82.63636 4.070909 2.285727 19.13727 4.090909 1.545455
#&gt; 6 19.74286 183.3143 122.28571 3.585714 3.117143 17.97714 3.857143 3.428571
#&gt; 8 15.10000 353.1000 209.21429 3.229286 3.999214 16.77214 3.285714 3.500000</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>,
      <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>              <span class='co'># or a list of vector (internally grouped using GRP())</span>
</div><div class='output co'>#&gt;            mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4.0.1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000 2.000000
#&gt; 4.1.0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667 1.666667
#&gt; 4.1.1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857 1.428571
#&gt; 6.0.1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333 4.666667
#&gt; 6.1.0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000 2.500000
#&gt; 8.0.0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000 3.083333
#&gt; 8.0.1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000 6.000000</div><div class='input'><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'><a href='GRP, fgroup_by.html'>GRP</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>~</span> <span class='va'>cyl</span> <span class='op'>+</span> <span class='va'>vs</span> <span class='op'>+</span> <span class='va'>am</span><span class='op'>)</span>        <span class='co'># It is also possible to create grouping objects</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                                 <span class='co'># These are instructive to learn about the grouping,</span>
</div><div class='output co'>#&gt; collapse grouping object of length 32 with 7 ordered groups
#&gt; 
#&gt; Call: GRP.default(X = mtcars, by = ~cyl + vs + am), X is unordered
#&gt; 
#&gt; Distribution of group sizes: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   1.000   2.500   3.000   4.571   5.500  12.000 
#&gt; 
#&gt; Groups with sizes: 
#&gt; 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 
#&gt;     1     3     7     3     4    12     2 </div><div class='input'><span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                                  <span class='co'># and are directly handed down to C++ code</span>
</div><div class='img'><img src='collapse-package-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>g</span><span class='op'>)</span>          <span class='co'># This can speed up multiple computations over same groups</span>
</div><div class='output co'>#&gt;            mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4.0.1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000 2.000000
#&gt; 4.1.0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667 1.666667
#&gt; 4.1.1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857 1.428571
#&gt; 6.0.1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333 4.666667
#&gt; 6.1.0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000 2.500000
#&gt; 8.0.0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000 3.083333
#&gt; 8.0.1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000 6.000000</div><div class='input'><span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>g</span><span class='op'>)</span>
</div><div class='output co'>#&gt;             mpg      disp       hp      drat        wt       qsec      gear
#&gt; 4.0.1        NA        NA       NA        NA        NA         NA        NA
#&gt; 4.1.0 1.4525839 13.969371 19.65536 0.1300000 0.4075230 1.67143651 0.5773503
#&gt; 4.1.1 4.7577005 18.802128 24.14441 0.3783926 0.4400840 0.94546285 0.3779645
#&gt; 6.0.1 0.7505553  8.660254 37.52777 0.1616581 0.1281601 0.76872188 0.5773503
#&gt; 6.1.0 1.6317169 44.742634  9.17878 0.5919459 0.1162164 0.81590441 0.5773503
#&gt; 8.0.0 2.7743959 71.823494 33.35984 0.2302749 0.7683069 0.80164745 0.0000000
#&gt; 8.0.1 0.5656854 35.355339 50.20458 0.4808326 0.2828427 0.07071068 0.0000000
#&gt;            carb
#&gt; 4.0.1        NA
#&gt; 4.1.0 0.5773503
#&gt; 4.1.1 0.5345225
#&gt; 6.0.1 1.1547005
#&gt; 6.1.0 1.7320508
#&gt; 8.0.0 0.9003366
#&gt; 8.0.1 2.8284271</div><div class='input'>
<span class='co'># Factors can efficiently be created using qF()</span>
<span class='va'>f1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span>                     <span class='co'># Unlike GRP objects, factors are checked for NA's</span>
<span class='va'>f2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span>, na.exclude <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># This can however be avoided through this option</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>f2</span><span class='op'>)</span>                                <span class='co'># Note the added class</span>
</div><div class='output co'>#&gt; [1] "factor"      "na.included"</div><div class='input'> 
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/joshuaulrich/microbenchmark/'>microbenchmark</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html'>microbenchmark</a></span><span class='op'>(</span><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f1</span><span class='op'>)</span>, <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># A minor difference, larger on larger data</span>
</div><div class='output co'>#&gt; Unit: microseconds
#&gt;               expr    min      lq     mean median     uq     max neval cld
#&gt;  fmean(mtcars, f1) 19.635 21.4200 25.30691 23.651 24.990 103.976   100   a
#&gt;  fmean(mtcars, f2) 19.635 20.9735 24.13773 22.759 24.097  45.963   100   a</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/with.html'>with</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='qF, qG, finteraction.html'>finteraction</a></span><span class='op'>(</span><span class='va'>cyl</span>, <span class='va'>vs</span>, <span class='va'>am</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Efficient interactions of vectors and/or factors</span>
</div><div class='output co'>#&gt;  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0
#&gt; [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0
#&gt; [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1
#&gt; Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</div><div class='input'><span class='fu'><a href='qF, qG, finteraction.html'>finteraction</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>       <span class='co'># .. or lists of vectors/factors</span>
</div><div class='output co'>#&gt;  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0
#&gt; [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0
#&gt; [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1
#&gt; Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</div><div class='input'>
<span class='co'># Simple row- or column-wise computations on matrices or data frames with dapply()</span>
<span class='fu'><a href='dapply.html'>dapply</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>quantile</span><span class='op'>)</span>                 <span class='co'># column quantiles</span>
</div><div class='output co'>#&gt;         mpg cyl    disp    hp  drat      wt    qsec vs am gear carb
#&gt; 0%   10.400   4  71.100  52.0 2.760 1.51300 14.5000  0  0    3    1
#&gt; 25%  15.425   4 120.825  96.5 3.080 2.58125 16.8925  0  0    3    2
#&gt; 50%  19.200   6 196.300 123.0 3.695 3.32500 17.7100  0  0    4    2
#&gt; 75%  22.800   8 326.000 180.0 3.920 3.61000 18.9000  1  1    4    4
#&gt; 100% 33.900   8 472.000 335.0 4.930 5.42400 22.9000  1  1    5    8</div><div class='input'><span class='fu'><a href='dapply.html'>dapply</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>quantile</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>     <span class='co'># Row-quantiles</span>
</div><div class='output co'>#&gt;                     0%    25%   50%    75%  100%
#&gt; Mazda RX4            0 3.2600 4.000 18.730 160.0
#&gt; Mazda RX4 Wag        0 3.3875 4.000 19.010 160.0
#&gt; Datsun 710           1 1.6600 4.000 20.705 108.0
#&gt; Hornet 4 Drive       0 2.0000 3.215 20.420 258.0
#&gt; Hornet Sportabout    0 2.5000 3.440 17.860 360.0
#&gt; Valiant              0 1.8800 3.460 19.160 225.0
#&gt; Duster 360           0 3.1050 4.000 15.070 360.0
#&gt; Merc 240D            0 2.5950 4.000 22.200 146.7
#&gt; Merc 230             0 2.5750 4.000 22.850 140.8
#&gt; Merc 280             0 3.6800 4.000 18.750 167.6
#&gt; Merc 280C            0 3.6800 4.000 18.350 167.6
#&gt; Merc 450SE           0 3.0000 4.070 16.900 275.8
#&gt; Merc 450SL           0 3.0000 3.730 17.450 275.8
#&gt; Merc 450SLC          0 3.0000 3.780 16.600 275.8
#&gt; Cadillac Fleetwood   0 2.9650 5.250 14.190 472.0
#&gt; Lincoln Continental  0 3.0000 5.424 14.110 460.0
#&gt; Chrysler Imperial    0 3.1150 5.345 16.060 440.0
#&gt; Fiat 128             1 1.6000 4.000 25.935  78.7
#&gt; Honda Civic          1 1.8075 4.000 24.460  75.7
#&gt; Toyota Corolla       1 1.4175 4.000 26.900  71.1
#&gt; Toyota Corona        0 1.7325 3.700 20.755 120.1
#&gt; Dodge Challenger     0 2.3800 3.520 16.185 318.0
#&gt; AMC Javelin          0 2.5000 3.435 16.250 304.0
#&gt; Camaro Z28           0 3.3650 4.000 14.355 350.0
#&gt; Pontiac Firebird     0 2.5000 3.845 18.125 400.0
#&gt; Fiat X1-9            1 1.4675 4.000 23.100  79.0
#&gt; Porsche 914-2        0 2.0700 4.430 21.350 120.3
#&gt; Lotus Europa         1 1.7565 4.000 23.650 113.0
#&gt; Ford Pantera L       0 3.5850 5.000 15.150 351.0
#&gt; Ferrari Dino         0 3.1950 6.000 17.600 175.0
#&gt; Maserati Bora        0 3.5550 8.000 14.800 335.0
#&gt; Volvo 142E           1 2.3900 4.000 20.000 121.0</div><div class='input'>  <span class='co'># dapply preserves the data structure of any matrices / data frames passed</span>
  <span class='co'># Some fast matrix row/column functions are also provided by the matrixStats package</span>
<span class='co'># Similarly, BY performs grouped comptations</span>
<span class='fu'><a href='BY.html'>BY</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span>, <span class='va'>quantile</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          mpg cyl   disp     hp  drat      wt    qsec vs  am gear carb
#&gt; 4.0%   21.40   4  71.10  52.00 3.690 1.51300 16.7000  0 0.0  3.0 1.00
#&gt; 4.25%  22.80   4  78.85  65.50 3.810 1.88500 18.5600  1 0.5  4.0 1.00
#&gt; 4.50%  26.00   4 108.00  91.00 4.080 2.20000 18.9000  1 1.0  4.0 2.00
#&gt; 4.75%  30.40   4 120.65  96.00 4.165 2.62250 19.9500  1 1.0  4.0 2.00
#&gt; 4.100% 33.90   4 146.70 113.00 4.930 3.19000 22.9000  1 1.0  5.0 2.00
#&gt; 6.0%   17.80   6 145.00 105.00 2.760 2.62000 15.5000  0 0.0  3.0 1.00
#&gt; 6.25%  18.65   6 160.00 110.00 3.350 2.82250 16.7400  0 0.0  3.5 2.50
#&gt; 6.50%  19.70   6 167.60 110.00 3.900 3.21500 18.3000  1 0.0  4.0 4.00
#&gt; 6.75%  21.00   6 196.30 123.00 3.910 3.44000 19.1700  1 1.0  4.0 4.00
#&gt; 6.100% 21.40   6 258.00 175.00 3.920 3.46000 20.2200  1 1.0  5.0 6.00
#&gt; 8.0%   10.40   8 275.80 150.00 2.760 3.17000 14.5000  0 0.0  3.0 2.00
#&gt; 8.25%  14.40   8 301.75 176.25 3.070 3.53250 16.0975  0 0.0  3.0 2.25
#&gt; 8.50%  15.20   8 350.50 192.50 3.115 3.75500 17.1750  0 0.0  3.0 3.50
#&gt; 8.75%  16.25   8 390.00 241.25 3.225 4.01375 17.5550  0 0.0  3.0 4.00
#&gt; 8.100% 19.20   8 472.00 335.00 4.220 5.42400 18.0000  0 1.0  5.0 8.00</div><div class='input'><span class='fu'><a href='BY.html'>BY</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span>, <span class='va'>quantile</span>, expand.wide <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   mpg.0% mpg.25% mpg.50% mpg.75% mpg.100% cyl.0% cyl.25% cyl.50% cyl.75%
#&gt; 4   21.4   22.80    26.0   30.40     33.9      4       4       4       4
#&gt; 6   17.8   18.65    19.7   21.00     21.4      6       6       6       6
#&gt; 8   10.4   14.40    15.2   16.25     19.2      8       8       8       8
#&gt;   cyl.100% disp.0% disp.25% disp.50% disp.75% disp.100% hp.0% hp.25% hp.50%
#&gt; 4        4    71.1    78.85    108.0   120.65     146.7    52  65.50   91.0
#&gt; 6        6   145.0   160.00    167.6   196.30     258.0   105 110.00  110.0
#&gt; 8        8   275.8   301.75    350.5   390.00     472.0   150 176.25  192.5
#&gt;   hp.75% hp.100% drat.0% drat.25% drat.50% drat.75% drat.100% wt.0% wt.25%
#&gt; 4  96.00     113    3.69     3.81    4.080    4.165      4.93 1.513 1.8850
#&gt; 6 123.00     175    2.76     3.35    3.900    3.910      3.92 2.620 2.8225
#&gt; 8 241.25     335    2.76     3.07    3.115    3.225      4.22 3.170 3.5325
#&gt;   wt.50%  wt.75% wt.100% qsec.0% qsec.25% qsec.50% qsec.75% qsec.100% vs.0%
#&gt; 4  2.200 2.62250   3.190    16.7  18.5600   18.900   19.950     22.90     0
#&gt; 6  3.215 3.44000   3.460    15.5  16.7400   18.300   19.170     20.22     0
#&gt; 8  3.755 4.01375   5.424    14.5  16.0975   17.175   17.555     18.00     0
#&gt;   vs.25% vs.50% vs.75% vs.100% am.0% am.25% am.50% am.75% am.100% gear.0%
#&gt; 4      1      1      1       1     0    0.5      1      1       1       3
#&gt; 6      0      1      1       1     0    0.0      0      1       1       3
#&gt; 8      0      0      0       0     0    0.0      0      0       1       3
#&gt;   gear.25% gear.50% gear.75% gear.100% carb.0% carb.25% carb.50% carb.75%
#&gt; 4      4.0        4        4         5       1     1.00      2.0        2
#&gt; 6      3.5        4        4         5       1     2.50      4.0        4
#&gt; 8      3.0        3        3         5       2     2.25      3.5        4
#&gt;   carb.100%
#&gt; 4         2
#&gt; 6         6
#&gt; 8         8</div><div class='input'><span class='co'># For efficient (grouped) replacing and sweeping out computed statistics, use TRA()</span>
<span class='va'>sds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Simple scaling (if sd's not needed, use fsd(mtcars, TRA = "/"))</span>
</div><div class='output co'>#&gt;                        mpg     cyl      disp       hp     drat       wt
#&gt; Mazda RX4         3.484351 3.35961 1.2909608 1.604367 7.294100 2.677684
#&gt; Mazda RX4 Wag     3.484351 3.35961 1.2909608 1.604367 7.294100 2.938298
#&gt; Datsun 710        3.783009 2.23974 0.8713986 1.356419 7.200586 2.371079
#&gt; Hornet 4 Drive    3.550719 3.35961 2.0816744 1.604367 5.760468 3.285784
#&gt; Hornet Sportabout 3.102731 4.47948 2.9046619 2.552402 5.891388 3.515738
#&gt; Valiant           3.003178 3.35961 1.8154137 1.531441 5.161978 3.536178
#&gt;                        qsec       vs       am     gear      carb
#&gt; Mazda RX4          9.211261 0.000000 2.004044 5.421494 2.4764735
#&gt; Mazda RX4 Wag      9.524645 0.000000 2.004044 5.421494 2.4764735
#&gt; Datsun 710        10.414433 1.984063 2.004044 5.421494 0.6191184
#&gt; Hornet 4 Drive    10.878913 1.984063 0.000000 4.066120 0.6191184
#&gt; Hornet Sportabout  9.524645 0.000000 0.000000 4.066120 1.2382368
#&gt; Valiant           11.315413 1.984063 0.000000 4.066120 0.6191184</div><div class='input'> 
<span class='fu'><a href='https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html'>microbenchmark</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/sweep.html'>sweep</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fl'>2</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># A remarkable performance gain..</span>
</div><div class='output co'>#&gt; Unit: microseconds
#&gt;                        expr      min       lq       mean    median        uq
#&gt;       TRA(mtcars, sds, "/")   11.602   15.172   25.71748   24.3205   34.3615
#&gt;  sweep(mtcars, 2, sds, "/") 1127.220 1187.018 1309.09284 1266.2260 1399.2080
#&gt;       max neval cld
#&gt;    95.944   100  a 
#&gt;  1965.272   100   b</div><div class='input'>
<span class='va'>sds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span>, <span class='va'>f2</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Groupd scaling (if sd's not needed: fsd(mtcars, f2, TRA = "/"))</span>
</div><div class='output co'>#&gt;                         mpg cyl     disp       hp      drat       wt      qsec
#&gt; Mazda RX4         14.447218 Inf 3.849628 4.534121  8.192327 7.352414  9.643407
#&gt; Mazda RX4 Wag     14.447218 Inf 3.849628 4.534121  8.192327 8.068012  9.971493
#&gt; Datsun 710         5.055626 Inf 4.019114 4.442421 10.534350 4.073293 11.061282
#&gt; Hornet 4 Drive    14.722403 Inf 6.207525 4.534121  6.469838 9.022142 11.389297
#&gt; Hornet Sportabout  7.304550 Inf 5.311981 3.432928  8.459515 4.529864 14.230606
#&gt; Valiant           12.452126 Inf 5.413539 4.328025  5.797647 9.709677 11.846275
#&gt;                         vs       am     gear      carb
#&gt; Mazda RX4         0.000000 1.870829 5.796551 2.2067091
#&gt; Mazda RX4 Wag     0.000000 1.870829 5.796551 2.2067091
#&gt; Datsun 710        3.316625 2.140872 7.416198 1.9148542
#&gt; Hornet 4 Drive    1.870829 0.000000 4.347413 0.5516773
#&gt; Hornet Sportabout      NaN 0.000000 4.130678 1.2848321
#&gt; Valiant           1.870829 0.000000 4.347413 0.5516773</div><div class='input'>
<span class='co'># All functions above perserve the structure of matrices / data frames</span>
<span class='co'># If conversions are required, use these efficient functions:</span>
<span class='va'>mtcarsM</span> <span class='op'>&lt;-</span> <span class='fu'><a href='quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>                      <span class='co'># Matrix from data.frame</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qDF</a></span><span class='op'>(</span><span class='va'>mtcarsM</span><span class='op'>)</span><span class='op'>)</span>                         <span class='co'># data.frame from matrix columns</span>
</div><div class='output co'>#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>mrtl</a></span><span class='op'>(</span><span class='va'>mtcarsM</span>, <span class='cn'>TRUE</span>, <span class='st'>"data.frame"</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># data.frame from matrix rows, etc..</span>
</div><div class='output co'>#&gt;      Mazda RX4 Mazda RX4 Wag Datsun 710 Hornet 4 Drive Hornet Sportabout
#&gt; mpg      21.00        21.000      22.80         21.400             18.70
#&gt; cyl       6.00         6.000       4.00          6.000              8.00
#&gt; disp    160.00       160.000     108.00        258.000            360.00
#&gt; hp      110.00       110.000      93.00        110.000            175.00
#&gt; drat      3.90         3.900       3.85          3.080              3.15
#&gt; wt        2.62         2.875       2.32          3.215              3.44
#&gt;      Valiant Duster 360 Merc 240D Merc 230 Merc 280 Merc 280C Merc 450SE
#&gt; mpg    18.10      14.30     24.40    22.80    19.20     17.80      16.40
#&gt; cyl     6.00       8.00      4.00     4.00     6.00      6.00       8.00
#&gt; disp  225.00     360.00    146.70   140.80   167.60    167.60     275.80
#&gt; hp    105.00     245.00     62.00    95.00   123.00    123.00     180.00
#&gt; drat    2.76       3.21      3.69     3.92     3.92      3.92       3.07
#&gt; wt      3.46       3.57      3.19     3.15     3.44      3.44       4.07
#&gt;      Merc 450SL Merc 450SLC Cadillac Fleetwood Lincoln Continental
#&gt; mpg       17.30       15.20              10.40              10.400
#&gt; cyl        8.00        8.00               8.00               8.000
#&gt; disp     275.80      275.80             472.00             460.000
#&gt; hp       180.00      180.00             205.00             215.000
#&gt; drat       3.07        3.07               2.93               3.000
#&gt; wt         3.73        3.78               5.25               5.424
#&gt;      Chrysler Imperial Fiat 128 Honda Civic Toyota Corolla Toyota Corona
#&gt; mpg             14.700    32.40      30.400         33.900        21.500
#&gt; cyl              8.000     4.00       4.000          4.000         4.000
#&gt; disp           440.000    78.70      75.700         71.100       120.100
#&gt; hp             230.000    66.00      52.000         65.000        97.000
#&gt; drat             3.230     4.08       4.930          4.220         3.700
#&gt; wt               5.345     2.20       1.615          1.835         2.465
#&gt;      Dodge Challenger AMC Javelin Camaro Z28 Pontiac Firebird Fiat X1-9
#&gt; mpg             15.50      15.200      13.30           19.200    27.300
#&gt; cyl              8.00       8.000       8.00            8.000     4.000
#&gt; disp           318.00     304.000     350.00          400.000    79.000
#&gt; hp             150.00     150.000     245.00          175.000    66.000
#&gt; drat             2.76       3.150       3.73            3.080     4.080
#&gt; wt               3.52       3.435       3.84            3.845     1.935
#&gt;      Porsche 914-2 Lotus Europa Ford Pantera L Ferrari Dino Maserati Bora
#&gt; mpg          26.00       30.400          15.80        19.70         15.00
#&gt; cyl           4.00        4.000           8.00         6.00          8.00
#&gt; disp        120.30       95.100         351.00       145.00        301.00
#&gt; hp           91.00      113.000         264.00       175.00        335.00
#&gt; drat          4.43        3.770           4.22         3.62          3.54
#&gt; wt            2.14        1.513           3.17         2.77          3.57
#&gt;      Volvo 142E
#&gt; mpg       21.40
#&gt; cyl        4.00
#&gt; disp     121.00
#&gt; hp       109.00
#&gt; drat       4.11
#&gt; wt         2.78</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qDT</a></span><span class='op'>(</span><span class='va'>mtcarsM</span>, <span class='st'>"cars"</span><span class='op'>)</span><span class='op'>)</span>                 <span class='co'># Saving row.names when converting matrix to data.table</span>
</div><div class='output co'>#&gt;                 cars  mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; 1:         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; 2:     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; 3:        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; 4:    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; 5: Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; 6:           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qDT</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"cars"</span><span class='op'>)</span><span class='op'>)</span>                  <span class='co'># Same use a data.frame</span>
</div><div class='output co'>#&gt;                 cars  mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; 1:         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; 2:     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; 3:        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; 4:    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; 5: Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; 6:           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'>
 
<span class='co'>## Now let's get some real data and see how we can use this power for data manipulation</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://magrittr.tidyverse.org'>magrittr</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='co'># World Bank World Development Data: 216 countries, 61 years, 5 series (columns 9-13)</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;   LIFEEX GINI       ODA     POP
#&gt; 1 32.446   NA 116769997 8996973
#&gt; 2 32.962   NA 232080002 9169410
#&gt; 3 33.471   NA 112839996 9351441
#&gt; 4 33.971   NA 237720001 9543205
#&gt; 5 34.463   NA 295920013 9744781
#&gt; 6 34.948   NA 341839996 9956320</div><div class='input'>
<span class='co'># Starting with some discriptive tools...</span>
<span class='fu'><a href='small-helper.html'>namlab</a></span><span class='op'>(</span><span class='va'>wlddev</span>, class <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>           <span class='co'># Show variable names, labels and classes</span>
</div><div class='output co'>#&gt;    Variable     Class
#&gt; 1   country character
#&gt; 2     iso3c    factor
#&gt; 3      date      Date
#&gt; 4      year   integer
#&gt; 5    decade   integer
#&gt; 6    region    factor
#&gt; 7    income    factor
#&gt; 8      OECD   logical
#&gt; 9     PCGDP   numeric
#&gt; 10   LIFEEX   numeric
#&gt; 11     GINI   numeric
#&gt; 12      ODA   numeric
#&gt; 13      POP   numeric
#&gt;                                                                                Label
#&gt; 1                                                                       Country Name
#&gt; 2                                                                       Country Code
#&gt; 3                                                         Date Recorded (Fictitious)
#&gt; 4                                                                               Year
#&gt; 5                                                                             Decade
#&gt; 6                                                                             Region
#&gt; 7                                                                       Income Level
#&gt; 8                                                            Is OECD Member Country?
#&gt; 9                                                 GDP per capita (constant 2010 US$)
#&gt; 10                                           Life expectancy at birth, total (years)
#&gt; 11                                                  Gini index (World Bank estimate)
#&gt; 12 Net official development assistance and official aid received (constant 2018 US$)
#&gt; 13                                                                 Population, total</div><div class='input'><span class='fu'><a href='fnobs.html'>fnobs</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                          <span class='co'># Observation count</span>
</div><div class='output co'>#&gt; country   iso3c    date    year  decade  region  income    OECD   PCGDP  LIFEEX 
#&gt;   13176   13176   13176   13176   13176   13176   13176   13176    9470   11670 
#&gt;    GINI     ODA     POP 
#&gt;    1744    8608   12919 </div><div class='input'><span class='fu'><a href='pwcor_pwcov_pwnobs.html'>pwnobs</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                         <span class='co'># Pairwise observation count</span>
</div><div class='output co'>#&gt;         country iso3c  date  year decade region income  OECD PCGDP LIFEEX GINI
#&gt; country   13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744
#&gt; iso3c     13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744
#&gt; date      13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744
#&gt; year      13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744
#&gt; decade    13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744
#&gt; region    13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744
#&gt; income    13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744
#&gt; OECD      13176 13176 13176 13176  13176  13176  13176 13176  9470  11670 1744
#&gt; PCGDP      9470  9470  9470  9470   9470   9470   9470  9470  9470   9022 1735
#&gt; LIFEEX    11670 11670 11670 11670  11670  11670  11670 11670  9022  11670 1742
#&gt; GINI       1744  1744  1744  1744   1744   1744   1744  1744  1735   1742 1744
#&gt; ODA        8608  8608  8608  8608   8608   8608   8608  8608  7128   8142 1109
#&gt; POP       12919 12919 12919 12919  12919  12919  12919 12919  9470  11659 1744
#&gt;          ODA   POP
#&gt; country 8608 12919
#&gt; iso3c   8608 12919
#&gt; date    8608 12919
#&gt; year    8608 12919
#&gt; decade  8608 12919
#&gt; region  8608 12919
#&gt; income  8608 12919
#&gt; OECD    8608 12919
#&gt; PCGDP   7128  9470
#&gt; LIFEEX  8142 11659
#&gt; GINI    1109  1744
#&gt; ODA     8608  8597
#&gt; POP     8597 12919</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fnobs.html'>fnobs</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># Grouped observation count</span>
</div><div class='output co'>#&gt;                country iso3c date year decade region income OECD PCGDP LIFEEX
#&gt; Afghanistan         61    61   61   61     61     61     61   61    18     60
#&gt; Albania             61    61   61   61     61     61     61   61    40     60
#&gt; Algeria             61    61   61   61     61     61     61   61    60     60
#&gt; American Samoa      61    61   61   61     61     61     61   61    17      0
#&gt; Andorra             61    61   61   61     61     61     61   61    50      0
#&gt; Angola              61    61   61   61     61     61     61   61    40     60
#&gt;                GINI ODA POP
#&gt; Afghanistan       0  60  60
#&gt; Albania           9  32  60
#&gt; Algeria           3  60  60
#&gt; American Samoa    0   0  60
#&gt; Andorra           0   0  60
#&gt; Angola            3  58  60</div><div class='input'><span class='fu'><a href='fndistinct.html'>fndistinct</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                     <span class='co'># Distinct values</span>
</div><div class='output co'>#&gt; country   iso3c    date    year  decade  region  income    OECD   PCGDP  LIFEEX 
#&gt;     216     216      61      61       7       7       4       2    9470   10548 
#&gt;    GINI     ODA     POP 
#&gt;     368    7832   12877 </div><div class='input'><span class='fu'><a href='descr.html'>descr</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                          <span class='co'># Describe data</span>
</div><div class='output co'>#&gt; Dataset: wlddev, 13 Variables, N = 13176
#&gt; --------------------------------------------------------------------------------
#&gt; country (character): Country Name
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   13176    216
#&gt; Table: 
#&gt;                      Freq  Perc
#&gt; Afghanistan            61  0.46
#&gt; Albania                61  0.46
#&gt; Algeria                61  0.46
#&gt; American Samoa         61  0.46
#&gt; Andorra                61  0.46
#&gt; Angola                 61  0.46
#&gt; Antigua and Barbuda    61  0.46
#&gt;   ---
#&gt;                        Freq  Perc
#&gt; Vanuatu                  61  0.46
#&gt; Venezuela, RB            61  0.46
#&gt; Vietnam                  61  0.46
#&gt; Virgin Islands (U.S.)    61  0.46
#&gt; West Bank and Gaza       61  0.46
#&gt; Yemen, Rep.              61  0.46
#&gt; Zambia                   61  0.46
#&gt; Zimbabwe                 61  0.46
#&gt; 
#&gt; Summary of Table: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;      61      61      61      61      61      61 
#&gt; --------------------------------------------------------------------------------
#&gt; iso3c (factor): Country Code
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   13176    216
#&gt; Table: 
#&gt;      Freq  Perc
#&gt; ABW    61  0.46
#&gt; AFG    61  0.46
#&gt; AGO    61  0.46
#&gt; ALB    61  0.46
#&gt; AND    61  0.46
#&gt; ARE    61  0.46
#&gt; ARG    61  0.46
#&gt;   ---
#&gt;      Freq  Perc
#&gt; VNM    61  0.46
#&gt; VUT    61  0.46
#&gt; WSM    61  0.46
#&gt; XKX    61  0.46
#&gt; YEM    61  0.46
#&gt; ZAF    61  0.46
#&gt; ZMB    61  0.46
#&gt; ZWE    61  0.46
#&gt; 
#&gt; Summary of Table: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;      61      61      61      61      61      61 
#&gt; --------------------------------------------------------------------------------
#&gt; date (Date): Date Recorded (Fictitious)
#&gt; Stats: 
#&gt;       N  Ndist    Min    Max
#&gt;   13176     61  -3287  18628
#&gt; --------------------------------------------------------------------------------
#&gt; year (integer): Year
#&gt; Stats: 
#&gt;       N  Ndist  Mean     SD   Min   Max  Skew  Kurt
#&gt;   13176     61  1990  17.61  1960  2020    -0   1.8
#&gt; Quant: 
#&gt;     1%    5%   25%   50%   75%   95%   99%
#&gt;   1960  1963  1975  1990  2005  2017  2020
#&gt; --------------------------------------------------------------------------------
#&gt; decade (integer): Decade
#&gt; Stats: 
#&gt;       N  Ndist     Mean     SD   Min   Max  Skew  Kurt
#&gt;   13176      7  1985.57  17.51  1960  2020  0.03  1.79
#&gt; Quant: 
#&gt;     1%    5%   25%   50%   75%   95%   99%
#&gt;   1960  1960  1970  1990  2000  2010  2020
#&gt; --------------------------------------------------------------------------------
#&gt; region (factor): Region
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   13176      7
#&gt; Table: 
#&gt;                             Freq   Perc
#&gt; East Asia &amp; Pacific         2196  16.67
#&gt; Europe &amp; Central Asia       3538  26.85
#&gt; Latin America &amp; Caribbean   2562  19.44
#&gt; Middle East &amp; North Africa  1281   9.72
#&gt; North America                183   1.39
#&gt; South Asia                   488   3.70
#&gt; Sub-Saharan Africa          2928  22.22
#&gt; --------------------------------------------------------------------------------
#&gt; income (factor): Income Level
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   13176      4
#&gt; Table: 
#&gt;                      Freq   Perc
#&gt; High income          4819  36.57
#&gt; Low income           1830  13.89
#&gt; Lower middle income  2867  21.76
#&gt; Upper middle income  3660  27.78
#&gt; --------------------------------------------------------------------------------
#&gt; OECD (logical): Is OECD Member Country?
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   13176      2
#&gt; Table: 
#&gt;         Freq   Perc
#&gt; FALSE  10980  83.33
#&gt; TRUE    2196  16.67
#&gt; --------------------------------------------------------------------------------
#&gt; PCGDP (numeric): GDP per capita (constant 2010 US$)
#&gt; Stats: 
#&gt;      N  Ndist      Mean        SD     Min        Max  Skew   Kurt
#&gt;   9470   9470  12048.78  19077.64  132.08  196061.42  3.13  17.12
#&gt; Quant: 
#&gt;       1%      5%      25%      50%       75%       95%       99%
#&gt;   227.71  399.62  1303.19  3767.16  14787.03  48507.84  92340.28
#&gt; --------------------------------------------------------------------------------
#&gt; LIFEEX (numeric): Life expectancy at birth, total (years)
#&gt; Stats: 
#&gt;       N  Ndist  Mean     SD    Min    Max   Skew  Kurt
#&gt;   11670  10548  64.3  11.48  18.91  85.42  -0.67  2.67
#&gt; Quant: 
#&gt;      1%     5%    25%    50%    75%    95%    99%
#&gt;   35.83  42.77  56.36  67.44  72.95  79.34  82.36
#&gt; --------------------------------------------------------------------------------
#&gt; GINI (numeric): Gini index (World Bank estimate)
#&gt; Stats: 
#&gt;      N  Ndist   Mean   SD   Min   Max  Skew  Kurt
#&gt;   1744    368  38.53  9.2  20.7  65.8   0.6  2.53
#&gt; Quant: 
#&gt;     1%    5%   25%   50%  75%    95%   99%
#&gt;   24.6  26.3  31.5  36.4   45  55.98  60.5
#&gt; --------------------------------------------------------------------------------
#&gt; ODA (numeric): Net official development assistance and official aid received (constant 2018 US$)
#&gt; Stats: 
#&gt;      N  Ndist        Mean          SD          Min             Max  Skew
#&gt;   8608   7832  454,720131  868,712654  -997,679993  2.56715605e+10  6.98
#&gt;     Kurt
#&gt;   114.89
#&gt; Quant: 
#&gt;             1%           5%          25%         50%         75%
#&gt;   -12,593999.7  1,363500.01  44,887499.8  165,970001  495,042503
#&gt;              95%             99%
#&gt;   1.93281696e+09  3.73380782e+09
#&gt; --------------------------------------------------------------------------------
#&gt; POP (numeric): Population, total
#&gt; Stats: 
#&gt;       N  Ndist         Mean          SD   Min             Max  Skew    Kurt
#&gt;   12919  12877  24,245971.6  102,120674  2833  1.39771500e+09  9.75  108.91
#&gt; Quant: 
#&gt;        1%       5%     25%       50%        75%          95%         99%
#&gt;   8698.84  31083.3  443791  4,072517  12,816178  81,177252.5  308,862641
#&gt; --------------------------------------------------------------------------------</div><div class='input'><span class='fu'><a href='varying.html'>varying</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span><span class='op'>)</span>             <span class='co'># Show which variables vary within countries</span>
</div><div class='output co'>#&gt;  iso3c   date   year decade region income   OECD  PCGDP LIFEEX   GINI    ODA 
#&gt;  FALSE   TRUE   TRUE   TRUE  FALSE  FALSE  FALSE   TRUE   TRUE   TRUE   TRUE 
#&gt;    POP 
#&gt;   TRUE </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, pid <span class='op'>=</span> <span class='op'>~</span> <span class='va'>country</span>,           <span class='co'># Panel-summarize columns 9 though 12 of this data</span>
    cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, vlabels <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>       <span class='co'># (between and within countries)</span>
</div><div class='output co'>#&gt; , , PCGDP: GDP per capita (constant 2010 US$)
#&gt; 
#&gt;              N/T        Mean          SD          Min         Max
#&gt; Overall     9470   12048.778  19077.6416     132.0776  196061.417
#&gt; Between      206  12962.6054  20189.9007     253.1886   141200.38
#&gt; Within   45.9709   12048.778   6723.6808  -33504.8721  76767.5254
#&gt; 
#&gt; , , LIFEEX: Life expectancy at birth, total (years)
#&gt; 
#&gt;              N/T     Mean       SD      Min      Max
#&gt; Overall    11670  64.2963  11.4764   18.907  85.4171
#&gt; Between      207  64.9537   9.8936  40.9663  85.4171
#&gt; Within   56.3768  64.2963   6.0842  32.9068  84.4198
#&gt; 
#&gt; , , GINI: Gini index (World Bank estimate)
#&gt; 
#&gt;              N/T     Mean      SD      Min      Max
#&gt; Overall     1744  38.5341  9.2006     20.7     65.8
#&gt; Between      167  39.4233  8.1356  24.8667  61.7143
#&gt; Within   10.4431  38.5341  2.9277  25.3917  55.3591
#&gt; 
#&gt; , , ODA: Net official development assistance and official aid received (constant 2018 US$)
#&gt; 
#&gt;              N/T        Mean          SD              Min             Max
#&gt; Overall     8608  454,720131  868,712654      -997,679993  2.56715605e+10
#&gt; Between      178  439,168412  569,049959       468717.916  3.62337432e+09
#&gt; Within   48.3596  454,720131  650,709624  -2.44379420e+09  2.45610972e+10
#&gt; </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>region</span>, <span class='op'>~</span> <span class='va'>country</span>,       <span class='co'># Do all of that by region and also compute higher moments</span>
    cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, higher <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>        <span class='co'># -&gt; returns a 4D array</span>
</div><div class='output co'>#&gt; , , Overall, PCGDP
#&gt; 
#&gt;                              N/T        Mean          SD         Min
#&gt; East Asia &amp; Pacific         1467  10513.2441  14383.5507    132.0776
#&gt; Europe &amp; Central Asia       2243  25992.9618  26435.1316    366.9354
#&gt; Latin America &amp; Caribbean   1976   7628.4477   8818.5055   1005.4085
#&gt; Middle East &amp; North Africa   842  13878.4213  18419.7912    578.5996
#&gt; North America                180    48699.76  24196.2855  16405.9053
#&gt; South Asia                   382   1235.9256   1611.2232    265.9625
#&gt; Sub-Saharan Africa          2380   1840.0259   2596.0104    164.3366
#&gt;                                    Max    Skew     Kurt
#&gt; East Asia &amp; Pacific         71992.1517  1.6392   4.7419
#&gt; Europe &amp; Central Asia       196061.417  2.2022  10.1977
#&gt; Latin America &amp; Caribbean   88391.3331  4.1702  29.3739
#&gt; Middle East &amp; North Africa  116232.753  2.4178   9.7669
#&gt; North America               113236.091   0.938   2.9688
#&gt; South Asia                    8476.564  2.7874  10.3402
#&gt; Sub-Saharan Africa          20532.9523  3.1161  14.4175
#&gt; 
#&gt; , , Between, PCGDP
#&gt; 
#&gt;                             N/T        Mean          SD         Min         Max
#&gt; East Asia &amp; Pacific          34  10513.2441   12771.742    444.2899  39722.0077
#&gt; Europe &amp; Central Asia        56  25992.9618   24051.035    809.4753   141200.38
#&gt; Latin America &amp; Caribbean    38   7628.4477   8470.9708   1357.3326  77403.7443
#&gt; Middle East &amp; North Africa   20  13878.4213  17251.6962   1069.6596  64878.4021
#&gt; North America                 3    48699.76  18604.4369  35260.4708  74934.5874
#&gt; South Asia                    8   1235.9256   1488.3669      413.68   6621.5002
#&gt; Sub-Saharan Africa           47   1840.0259   2234.3254    253.1886   9922.0052
#&gt;                               Skew     Kurt
#&gt; East Asia &amp; Pacific         1.1488   2.7089
#&gt; Europe &amp; Central Asia       2.0026   9.0733
#&gt; Latin America &amp; Caribbean   4.4548  32.4956
#&gt; Middle East &amp; North Africa  1.9508   6.0796
#&gt; North America               0.7065      1.5
#&gt; South Asia                  3.0546  11.3083
#&gt; Sub-Saharan Africa          2.1442   6.8259
#&gt; 
#&gt; , , Within, PCGDP
#&gt; 
#&gt;                                 N/T       Mean          SD          Min
#&gt; East Asia &amp; Pacific         43.1471  12048.778   6615.8248  -11964.6472
#&gt; Europe &amp; Central Asia       40.0536  12048.778  10971.0483  -33504.8721
#&gt; Latin America &amp; Caribbean        52  12048.778   2451.2636    -354.1639
#&gt; Middle East &amp; North Africa     42.1  12048.778   6455.0512  -18674.4049
#&gt; North America                    60  12048.778  15470.4609  -29523.1017
#&gt; South Asia                    47.75  12048.778    617.0934   10026.9155
#&gt; Sub-Saharan Africa          50.6383  12048.778    1321.764    4846.3834
#&gt;                                    Max     Skew     Kurt
#&gt; East Asia &amp; Pacific          49541.463    0.824   8.9418
#&gt; Europe &amp; Central Asia       76767.5254   0.4307   7.4139
#&gt; Latin America &amp; Caribbean   23036.3668   0.1259   7.1939
#&gt; Middle East &amp; North Africa  63665.0446   1.8525  23.0457
#&gt; North America               50350.2816  -0.2451   3.2075
#&gt; South Asia                  14390.3768   0.9846   5.6366
#&gt; Sub-Saharan Africa          24883.1246   1.3879  28.0186
#&gt; 
#&gt; , , Overall, LIFEEX
#&gt; 
#&gt;                              N/T     Mean       SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific         1807  65.9445  10.1633   18.907   85.078   -0.856
#&gt; Europe &amp; Central Asia       3046  72.1625   5.7602   45.369  85.4171  -0.5594
#&gt; Latin America &amp; Caribbean   2107  68.3486   7.3768   41.762  82.1902  -1.0357
#&gt; Middle East &amp; North Africa  1226  66.2508   9.8306   29.919  82.8049  -0.8782
#&gt; North America                144  76.2867   3.5734  68.8978  82.0488  -0.1963
#&gt; South Asia                   480  57.5585  11.3004   32.446   78.921  -0.2623
#&gt; Sub-Saharan Africa          2860   51.581   8.6876   26.172  74.5146   0.1452
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         4.3125
#&gt; Europe &amp; Central Asia       4.0434
#&gt; Latin America &amp; Caribbean   3.9379
#&gt; Middle East &amp; North Africa  3.3054
#&gt; North America                1.976
#&gt; South Asia                  2.1147
#&gt; Sub-Saharan Africa          2.7245
#&gt; 
#&gt; , , Between, LIFEEX
#&gt; 
#&gt;                             N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific          32  65.9445  7.6833  49.7995  77.9008  -0.3832
#&gt; Europe &amp; Central Asia        55  72.1625  4.4378  60.1129  85.4171  -0.6584
#&gt; Latin America &amp; Caribbean    40  68.3486  4.9199  53.4918  82.1902  -0.9947
#&gt; Middle East &amp; North Africa   21  66.2508   5.922  52.5371  76.7395  -0.3181
#&gt; North America                 3  76.2867  1.3589  74.8065  78.4175   0.1467
#&gt; South Asia                    8  57.5585  5.6158  49.1972  69.3429   0.6643
#&gt; Sub-Saharan Africa           48   51.581   5.657  40.9663  71.5749   1.1333
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         2.4322
#&gt; Europe &amp; Central Asia       2.8874
#&gt; Latin America &amp; Caribbean   4.1617
#&gt; Middle East &amp; North Africa  3.0331
#&gt; North America               1.6356
#&gt; South Asia                  3.1288
#&gt; Sub-Saharan Africa           4.974
#&gt; 
#&gt; , , Within, LIFEEX
#&gt; 
#&gt;                                 N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific         56.4688  64.2963  6.6528  32.9068  83.9918  -0.3949
#&gt; Europe &amp; Central Asia       55.3818  64.2963  3.6723  46.3045  78.6265  -0.0307
#&gt; Latin America &amp; Caribbean    52.675  64.2963  5.4965  46.7831  79.5026  -0.3827
#&gt; Middle East &amp; North Africa   58.381  64.2963  7.8467  41.6187  78.8872  -0.6216
#&gt; North America                    48  64.2963  3.3049  54.7766  69.4306  -0.4327
#&gt; South Asia                       60  64.2963  9.8062  41.4342  83.0122  -0.0946
#&gt; Sub-Saharan Africa          59.5833  64.2963  6.5933  41.5678  84.4198   0.0811
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         3.9528
#&gt; Europe &amp; Central Asia       3.7576
#&gt; Latin America &amp; Caribbean   2.9936
#&gt; Middle East &amp; North Africa   2.808
#&gt; North America               2.3027
#&gt; South Asia                  2.1035
#&gt; Sub-Saharan Africa          2.7821
#&gt; 
#&gt; , , Overall, GINI
#&gt; 
#&gt;                             N/T     Mean      SD   Min   Max     Skew    Kurt
#&gt; East Asia &amp; Pacific         154  37.7571  5.0318  27.8  49.1   0.3631  2.3047
#&gt; Europe &amp; Central Asia       798  31.9114  4.5809  20.7  48.4   0.2989  2.5254
#&gt; Latin America &amp; Caribbean   413  49.9557  5.4821  34.4  63.3  -0.0386  2.3631
#&gt; Middle East &amp; North Africa   91  36.0143  5.2073    26  47.4   0.0241  1.9209
#&gt; North America                49  37.4816  3.6972    31  41.5  -0.4282  1.4577
#&gt; South Asia                   46  33.8804  3.9898  25.9  43.8   0.4205  2.7748
#&gt; Sub-Saharan Africa          193  44.6606  8.2003  29.8  65.8   0.6598  2.8451
#&gt; 
#&gt; , , Between, GINI
#&gt; 
#&gt;                             N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific          23  37.7571  4.3005     30.8  45.8857   0.4912
#&gt; Europe &amp; Central Asia        49  31.9114  4.0611  24.8667   40.935   0.3323
#&gt; Latin America &amp; Caribbean    25  49.9557  4.0492     41.1     57.9     0.03
#&gt; Middle East &amp; North Africa   15  36.0143  4.7002    29.05     42.7  -0.2035
#&gt; North America                 2  37.4816  3.3563  33.1222  40.0129  -0.5503
#&gt; South Asia                    7  33.8804  3.0052  30.3556     38.8   0.2786
#&gt; Sub-Saharan Africa           46  44.6606  6.8844    34.52  61.7143   0.9464
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific          2.213
#&gt; Europe &amp; Central Asia        2.291
#&gt; Latin America &amp; Caribbean   2.2573
#&gt; Middle East &amp; North Africa  1.6815
#&gt; North America               1.3029
#&gt; South Asia                  1.4817
#&gt; Sub-Saharan Africa          3.2302
#&gt; 
#&gt; , , Within, GINI
#&gt; 
#&gt;                                 N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific          6.6957  38.5341  2.6125  31.0187  45.8901  -0.0585
#&gt; Europe &amp; Central Asia       16.2857  38.5341  2.1195  31.2841  50.1387   0.6622
#&gt; Latin America &amp; Caribbean     16.52  38.5341  3.6955  25.3917  48.8341  -0.0506
#&gt; Middle East &amp; North Africa   6.0667  38.5341  2.2415  31.7675   45.777   0.0408
#&gt; North America                  24.5  38.5341  1.5507  33.0212  42.7119  -1.3213
#&gt; South Asia                   6.5714  38.5341  2.6244  32.8341  45.0675  -0.1055
#&gt; Sub-Saharan Africa           4.1957  38.5341  4.4553  27.9452  55.3591   0.6338
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         3.0933
#&gt; Europe &amp; Central Asia       6.1763
#&gt; Latin America &amp; Caribbean   2.7603
#&gt; Middle East &amp; North Africa  4.7415
#&gt; North America               6.8321
#&gt; South Asia                  2.6885
#&gt; Sub-Saharan Africa          4.4174
#&gt; 
#&gt; , , Overall, ODA
#&gt; 
#&gt;                              N/T            Mean              SD           Min
#&gt; East Asia &amp; Pacific         1537      352,017964      622,847624   -997,679993
#&gt; Europe &amp; Central Asia        787      402,455286      568,237036   -322,070007
#&gt; Latin America &amp; Caribbean   1972      172,880081      260,781049   -444,040009
#&gt; Middle East &amp; North Africa  1105      732,380009  1.52108993e+09   -141,789993
#&gt; North America                 39      468717.916     10,653560.8  -15,869999.9
#&gt; South Asia                   466  1.27049955e+09  1.61492889e+09   -247,369995
#&gt; Sub-Saharan Africa          2702      486,371750      656,336230  -18,409999.8
#&gt;                                        Max    Skew     Kurt
#&gt; East Asia &amp; Pacific         4.04487988e+09   2.722  11.5221
#&gt; Europe &amp; Central Asia       4.34612988e+09  3.1305  15.2525
#&gt; Latin America &amp; Caribbean   2.99568994e+09  3.3259  22.4569
#&gt; Middle East &amp; North Africa  2.56715605e+10  6.6304  79.2238
#&gt; North America                  61,509998.3  4.8602  29.3092
#&gt; South Asia                  8.75425977e+09  1.7923    6.501
#&gt; Sub-Saharan Africa          1.18790801e+10  4.5456  48.8447
#&gt; 
#&gt; , , Between, ODA
#&gt; 
#&gt;                             N/T            Mean              SD          Min
#&gt; East Asia &amp; Pacific          31      352,017964      457,183279  1,654615.38
#&gt; Europe &amp; Central Asia        32      402,455286      438,074771  12,516000.1
#&gt; Latin America &amp; Caribbean    37      172,880081      167,160838  2,225483.88
#&gt; Middle East &amp; North Africa   21      732,380009      775,418887   3,112820.5
#&gt; North America                 1      468717.916               0   468717.916
#&gt; South Asia                    8  1.27049955e+09  1.18347893e+09  27,152499.9
#&gt; Sub-Saharan Africa           48      486,371750      397,995105  28,801206.9
#&gt;                                        Max    Skew    Kurt
#&gt; East Asia &amp; Pacific         1.63585532e+09  1.7771  5.1361
#&gt; Europe &amp; Central Asia       2.05456932e+09  2.0449  7.2489
#&gt; Latin America &amp; Caribbean       538,386665  0.8981  2.4954
#&gt; Middle East &amp; North Africa  2.86174883e+09  1.1363  3.6377
#&gt; North America                   468717.916       -       -
#&gt; South Asia                  3.62337432e+09  0.7229  2.4072
#&gt; Sub-Saharan Africa          1.55049113e+09  0.9871  3.1513
#&gt; 
#&gt; , , Within, ODA
#&gt; 
#&gt;                                 N/T        Mean              SD
#&gt; East Asia &amp; Pacific         49.5806  454,720131      422,992450
#&gt; Europe &amp; Central Asia       24.5938  454,720131      361,916875
#&gt; Latin America &amp; Caribbean   53.2973  454,720131      200,159960
#&gt; Middle East &amp; North Africa   52.619  454,720131  1.30860235e+09
#&gt; North America                    39  454,720131     10,653560.8
#&gt; South Asia                    58.25  454,720131  1.09880524e+09
#&gt; Sub-Saharan Africa          56.2917  454,720131      521,897637
#&gt;                                         Min             Max    Skew     Kurt
#&gt; East Asia &amp; Pacific         -2.04042108e+09  3.59673152e+09  0.2908  14.4428
#&gt; Europe &amp; Central Asia       -1.08796786e+09  3.30549004e+09  2.3283  18.6937
#&gt; Latin America &amp; Caribbean       -527,706542  3.28976141e+09  3.7015  41.7506
#&gt; Middle East &amp; North Africa  -2.34610870e+09  2.45610972e+10  7.8663  117.987
#&gt; North America                    438,381413      515,761411  4.8602  29.3092
#&gt; South Asia                  -2.44379420e+09  5.58560558e+09  1.8418   9.4588
#&gt; Sub-Saharan Africa              -952,168698  1.12814455e+10  5.2349  86.1042
#&gt; </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>region</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>,
    higher <span class='op'>=</span> <span class='cn'>TRUE</span>, array <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>                           <span class='co'># Return as a list of matrices..</span>
<span class='fu'><a href='unlist2d.html'>unlist2d</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Variable"</span>,<span class='st'>"Trans"</span><span class='op'>)</span>, row.names <span class='op'>=</span> <span class='st'>"Region"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>  <span class='co'># and turn into a tidy data.frame</span>
</div><div class='output co'>#&gt;   Variable   Trans                     Region    N      Mean        SD
#&gt; 1    PCGDP Overall        East Asia &amp; Pacific 1467 10513.244 14383.551
#&gt; 2    PCGDP Overall      Europe &amp; Central Asia 2243 25992.962 26435.132
#&gt; 3    PCGDP Overall  Latin America &amp; Caribbean 1976  7628.448  8818.505
#&gt; 4    PCGDP Overall Middle East &amp; North Africa  842 13878.421 18419.791
#&gt; 5    PCGDP Overall              North America  180 48699.760 24196.285
#&gt; 6    PCGDP Overall                 South Asia  382  1235.926  1611.223
#&gt;          Min        Max      Skew      Kurt
#&gt; 1   132.0776  71992.152 1.6392248  4.741856
#&gt; 2   366.9354 196061.417 2.2022472 10.197685
#&gt; 3  1005.4085  88391.333 4.1701769 29.373869
#&gt; 4   578.5996 116232.753 2.4177586  9.766883
#&gt; 5 16405.9053 113236.091 0.9380056  2.968769
#&gt; 6   265.9625   8476.564 2.7873830 10.340176</div><div class='input'><span class='fu'><a href='pwcor_pwcov_pwnobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>                           <span class='co'># Pairwise correlations with p-value</span>
</div><div class='output co'>#&gt;          year decade  PCGDP LIFEEX   GINI    ODA    POP
#&gt; year      1     .99*   .16*   .47*  -.20*   .14*   .06*
#&gt; decade   .99*    1     .15*   .46*  -.20*   .14*   .06*
#&gt; PCGDP    .16*   .15*    1     .57*  -.44*  -.16*  -.06*
#&gt; LIFEEX   .47*   .46*   .57*    1    -.35*  -.02    .03*
#&gt; GINI    -.20*  -.20*  -.44*  -.35*    1    -.20*   .04 
#&gt; ODA      .14*   .14*  -.16*  -.02   -.20*    1     .31*
#&gt; POP      .06*   .06*  -.06*   .03*   .04    .31*    1  </div><div class='input'><span class='fu'><a href='pwcor_pwcov_pwnobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>    <span class='co'># Correlating country means</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: the standard deviation is zero</span></div><div class='output co'>#&gt;           year  decade   PCGDP  LIFEEX    GINI     ODA     POP
#&gt; year       NA      NA      NA      NA      NA      NA      NA 
#&gt; decade     NA      NA      NA      NA      NA      NA      NA 
#&gt; PCGDP      NA      NA      1      .60*   -.42*   -.25*   -.07 
#&gt; LIFEEX     NA      NA     .60*     1     -.40*   -.21*   -.02 
#&gt; GINI       NA      NA    -.42*   -.40*     1     -.19*   -.04 
#&gt; ODA        NA      NA    -.25*   -.21*   -.19*     1      .50*
#&gt; POP        NA      NA    -.07    -.02    -.04     .50*     1  </div><div class='input'><span class='fu'><a href='pwcor_pwcov_pwnobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>  <span class='co'># Within-country correlations</span>
</div><div class='output co'>#&gt;          year decade  PCGDP LIFEEX   GINI    ODA    POP
#&gt; year      1     .99*   .44*   .84*  -.21*   .19*   .24*
#&gt; decade   .99*    1     .44*   .83*  -.19*   .18*   .24*
#&gt; PCGDP    .44*   .44*    1     .31*  -.01   -.01    .06*
#&gt; LIFEEX   .84*   .83*   .31*    1    -.16*   .17*   .29*
#&gt; GINI    -.21*  -.19*  -.01   -.16*    1    -.08*   .01 
#&gt; ODA      .19*   .18*  -.01    .17*  -.08*    1    -.11*
#&gt; POP      .24*   .24*   .06*   .29*   .01   -.11*    1  </div><div class='input'><span class='fu'><a href='psacf.html'>psacf</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>                 <span class='co'># Panel-data Autocorrelation function</span>
</div><div class='img'><img src='collapse-package-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='psacf.html'>pspacf</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>                <span class='co'># Partial panel-autocorrelations</span>
</div><div class='img'><img src='collapse-package-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='psmat.html'>psmat</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>iso3c</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>plot</span>          <span class='co'># Convert panel to 3D array and plot</span>
</div><div class='img'><img src='collapse-package-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## collapse offers a few very efficent functions for data manipulation:</span>
<span class='co'># Fast selecting and replacing columns</span>
<span class='va'>series</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>     <span class='co'># Same as wlddev[9:12] but 2x faster</span>
<span class='va'>series</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='co'># Same thing: &gt; 100x faster than dplyr::select</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>series</span>     <span class='co'># Replace, 8x faster wlddev[9:12] &lt;- series + replaces names</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>series</span> <span class='co'># Same thing</span>

<span class='co'># Fast subsetting</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span> <span class='op'>==</span> <span class='st'>"Ireland"</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='op'>-</span><span class='va'>iso3c</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;         date year decade                region      income OECD PCGDP   LIFEEX
#&gt; 1 1961-01-01 1960   1960 Europe &amp; Central Asia High income TRUE    NA 69.79651
#&gt; 2 1962-01-01 1961   1960 Europe &amp; Central Asia High income TRUE    NA 69.97827
#&gt; 3 1963-01-01 1962   1960 Europe &amp; Central Asia High income TRUE    NA 70.13407
#&gt; 4 1964-01-01 1963   1960 Europe &amp; Central Asia High income TRUE    NA 70.27293
#&gt; 5 1965-01-01 1964   1960 Europe &amp; Central Asia High income TRUE    NA 70.40129
#&gt; 6 1966-01-01 1965   1960 Europe &amp; Central Asia High income TRUE    NA 70.52315
#&gt;   GINI ODA     POP
#&gt; 1   NA  NA 2828600
#&gt; 2   NA  NA 2824400
#&gt; 3   NA  NA 2836050
#&gt; 4   NA  NA 2852650
#&gt; 5   NA  NA 2866550
#&gt; 6   NA  NA 2877300</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span> <span class='op'>==</span> <span class='st'>"Ireland"</span> <span class='op'>&amp;</span> <span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   year    PCGDP   LIFEEX GINI ODA
#&gt; 1 1991 24642.11 75.00527   NA  NA
#&gt; 2 1992 25292.81 75.18095   NA  NA
#&gt; 3 1993 25844.34 75.33612   NA  NA
#&gt; 4 1994 27224.37 75.47680 36.9  NA
#&gt; 5 1995 29694.65 75.61756 37.0  NA
#&gt; 6 1996 31644.89 75.83171 35.6  NA</div><div class='input'><span class='fu'><a href='fsubset.html'>ss</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span><span class='op'>)</span> <span class='co'># This is an order of magnitude faster than wlddev[1:10, 1:10]</span>
</div><div class='output co'>#&gt;        country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1  Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2  Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3  Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4  Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5  Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6  Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt; 7  Afghanistan   AFG 1967-01-01 1966   1960 South Asia Low income FALSE    NA
#&gt; 8  Afghanistan   AFG 1968-01-01 1967   1960 South Asia Low income FALSE    NA
#&gt; 9  Afghanistan   AFG 1969-01-01 1968   1960 South Asia Low income FALSE    NA
#&gt; 10 Afghanistan   AFG 1970-01-01 1969   1960 South Asia Low income FALSE    NA
#&gt;    LIFEEX
#&gt; 1  32.446
#&gt; 2  32.962
#&gt; 3  33.471
#&gt; 4  33.971
#&gt; 5  34.463
#&gt; 6  34.948
#&gt; 7  35.430
#&gt; 8  35.914
#&gt; 9  36.403
#&gt; 10 36.900</div><div class='input'>
<span class='co'># Fast transforming</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, ODA_GDP <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>/</span> <span class='va'>PCGDP</span>, ODA_LIFEEX <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>LIFEEX</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;   LIFEEX GINI       ODA     POP ODA_GDP ODA_LIFEEX
#&gt; 1 32.446   NA 116769997 8996973      NA   333.0462
#&gt; 2 32.962   NA 232080002 9169410      NA   462.1738
#&gt; 3 33.471   NA 112839996 9351441      NA   317.3678
#&gt; 4 33.971   NA 237720001 9543205      NA   453.8627
#&gt; 5 34.463   NA 295920013 9744781      NA   499.1535
#&gt; 6 34.948   NA 341839996 9956320      NA   529.0407</div><div class='input'><span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, ODA_GDP <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>/</span> <span class='va'>PCGDP</span>, ODA_LIFEEX <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='co'># by reference</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, PCGDP <span class='op'>=</span> <span class='cn'>NULL</span>, ODA <span class='op'>=</span> <span class='cn'>NULL</span>, GINI_sum <span class='op'>=</span> <span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>GINI</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD LIFEEX
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE 32.446
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE 32.962
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE 33.471
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE 33.971
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE 34.463
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE 34.948
#&gt;   GINI     POP ODA_GDP ODA_LIFEEX GINI_sum
#&gt; 1   NA 8996973      NA   333.0462  67203.5
#&gt; 2   NA 9169410      NA   462.1738  67203.5
#&gt; 3   NA 9351441      NA   317.3678  67203.5
#&gt; 4   NA 9543205      NA   453.8627  67203.5
#&gt; 5   NA 9744781      NA   499.1535  67203.5
#&gt; 6   NA 9956320      NA   529.0407  67203.5</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>log</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># Can also transform with lists of columns</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;     LIFEEX GINI      ODA     POP ODA_GDP ODA_LIFEEX
#&gt; 1 3.479577   NA 18.57572 8996973      NA   333.0462
#&gt; 2 3.495355   NA 19.26259 9169410      NA   462.1738
#&gt; 3 3.510679   NA 18.54148 9351441      NA   317.3678
#&gt; 4 3.525507   NA 19.28660 9543205      NA   453.8627
#&gt; 5 3.539886   NA 19.50560 9744781      NA   499.1535
#&gt; 6 3.553861   NA 19.64985 9956320      NA   529.0407</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># apply = FALSE invokes fscale.data.frame</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI        ODA     POP ODA_GDP ODA_LIFEEX
#&gt; 1 -2.775283   NA -0.3890241 8996973      NA   333.0462
#&gt; 2 -2.730321   NA -0.2562874 9169410      NA   462.1738
#&gt; 3 -2.685969   NA -0.3935480 9351441      NA   317.3678
#&gt; 4 -2.642402   NA -0.2497951 9543205      NA   453.8627
#&gt; 5 -2.599531   NA -0.1827994 9744781      NA   499.1535
#&gt; 6 -2.557271   NA -0.1299396 9956320      NA   529.0407</div><div class='input'><span class='fu'><a href='ftransform.html'>settransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>     <span class='co'># Changing the data by reference</span>
<span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Same thing (using replacement method)</span>
 
<span class='va'>wlddev</span> <span class='op'>%&lt;&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># Same thing, using magrittr</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span>              <span class='co'># With compound pipes: Scaling and lagging</span>
                        <span class='va'>fscale</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>iso3c</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI        ODA     POP ODA_GDP ODA_LIFEEX L1.PCGDP L2.PCGDP
#&gt; 1 -2.775283   NA -0.3890241 8996973      NA   333.0462       NA       NA
#&gt; 2 -2.730321   NA -0.2562874 9169410      NA   462.1738       NA       NA
#&gt; 3 -2.685969   NA -0.3935480 9351441      NA   317.3678       NA       NA
#&gt; 4 -2.642402   NA -0.2497951 9543205      NA   453.8627       NA       NA
#&gt; 5 -2.599531   NA -0.1827994 9744781      NA   499.1535       NA       NA
#&gt; 6 -2.557271   NA -0.1299396 9956320      NA   529.0407       NA       NA
#&gt;   L1.LIFEEX L2.LIFEEX L1.GINI L2.GINI     L1.ODA     L2.ODA
#&gt; 1        NA        NA      NA      NA         NA         NA
#&gt; 2 -2.775283        NA      NA      NA -0.3890241         NA
#&gt; 3 -2.730321 -2.775283      NA      NA -0.2562874 -0.3890241
#&gt; 4 -2.685969 -2.730321      NA      NA -0.3935480 -0.2562874
#&gt; 5 -2.642402 -2.685969      NA      NA -0.2497951 -0.3935480
#&gt; 6 -2.599531 -2.642402      NA      NA -0.1827994 -0.2497951</div><div class='input'>
<span class='co'># Fast reordering</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='roworder.html'>roworder</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    country iso3c       date year decade             region              income
#&gt; 1 Zimbabwe   ZWE 1961-01-01 1960   1960 Sub-Saharan Africa Lower middle income
#&gt; 2 Zimbabwe   ZWE 1962-01-01 1961   1960 Sub-Saharan Africa Lower middle income
#&gt; 3 Zimbabwe   ZWE 1963-01-01 1962   1960 Sub-Saharan Africa Lower middle income
#&gt; 4 Zimbabwe   ZWE 1964-01-01 1963   1960 Sub-Saharan Africa Lower middle income
#&gt; 5 Zimbabwe   ZWE 1965-01-01 1964   1960 Sub-Saharan Africa Lower middle income
#&gt; 6 Zimbabwe   ZWE 1966-01-01 1965   1960 Sub-Saharan Africa Lower middle income
#&gt;    OECD      PCGDP     LIFEEX GINI        ODA     POP     ODA_GDP ODA_LIFEEX
#&gt; 1 FALSE -0.5794259 -0.9826503   NA         NA 3776681          NA         NA
#&gt; 2 FALSE -0.5779547 -0.9422195   NA -0.5233262 3905034    97.77415   5.912678
#&gt; 3 FALSE -0.5789920 -0.9018759   NA         NA 4039201          NA         NA
#&gt; 4 FALSE -0.5775741 -0.8620551   NA -0.4094221 4178726 96162.61027 182.938198
#&gt; 5 FALSE -0.5799516 -0.8231928   NA -0.4776495 4322861 40399.38026 114.990952
#&gt; 6 FALSE -0.5792133 -0.7861604   NA -0.4885737 4471177 30327.77618  99.570055</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='colorder.html'>colorder</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year iso3c       date decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan 1960   AFG 1961-01-01   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan 1961   AFG 1962-01-01   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan 1962   AFG 1963-01-01   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan 1963   AFG 1964-01-01   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan 1964   AFG 1965-01-01   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan 1965   AFG 1966-01-01   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI        ODA     POP ODA_GDP ODA_LIFEEX
#&gt; 1 -2.775283   NA -0.3890241 8996973      NA   333.0462
#&gt; 2 -2.730321   NA -0.2562874 9169410      NA   462.1738
#&gt; 3 -2.685969   NA -0.3935480 9351441      NA   317.3678
#&gt; 4 -2.642402   NA -0.2497951 9543205      NA   453.8627
#&gt; 5 -2.599531   NA -0.1827994 9744781      NA   499.1535
#&gt; 6 -2.557271   NA -0.1299396 9956320      NA   529.0407</div><div class='input'>
<span class='co'># Fast renaming</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='frename.html'>frename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, country <span class='op'>=</span> <span class='va'>Ctry</span>, year <span class='op'>=</span> <span class='va'>Yr</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          Ctry iso3c       date   Yr decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI        ODA     POP ODA_GDP ODA_LIFEEX
#&gt; 1 -2.775283   NA -0.3890241 8996973      NA   333.0462
#&gt; 2 -2.730321   NA -0.2562874 9169410      NA   462.1738
#&gt; 3 -2.685969   NA -0.3935480 9351441      NA   317.3678
#&gt; 4 -2.642402   NA -0.2497951 9543205      NA   453.8627
#&gt; 5 -2.599531   NA -0.1827994 9744781      NA   499.1535
#&gt; 6 -2.557271   NA -0.1299396 9956320      NA   529.0407</div><div class='input'><span class='fu'><a href='frename.html'>setrename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, country <span class='op'>=</span> <span class='va'>Ctry</span>, year <span class='op'>=</span> <span class='va'>Yr</span><span class='op'>)</span>     <span class='co'># By reference</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='frename.html'>frename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>tolower</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          Ctry iso3c       date   Yr decade     region     income  OECD pcgdp
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      lifeex gini        oda     POP ODA_GDP ODA_LIFEEX
#&gt; 1 -2.775283   NA -0.3890241 8996973      NA   333.0462
#&gt; 2 -2.730321   NA -0.2562874 9169410      NA   462.1738
#&gt; 3 -2.685969   NA -0.3935480 9351441      NA   317.3678
#&gt; 4 -2.642402   NA -0.2497951 9543205      NA   453.8627
#&gt; 5 -2.599531   NA -0.1827994 9744781      NA   499.1535
#&gt; 6 -2.557271   NA -0.1299396 9956320      NA   529.0407</div><div class='input'> 
<span class='co'># Fast grouping</span>
<span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>Ctry</span>, <span class='va'>decade</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fgroup_vars</span> <span class='op'>%&gt;%</span> <span class='va'>head</span> <span class='co'># fgroup_by is faster than dplyr::group_by</span>
</div><div class='output co'>#&gt;          Ctry decade
#&gt; 1 Afghanistan   1960
#&gt; 2 Afghanistan   1960
#&gt; 3 Afghanistan   1960
#&gt; 4 Afghanistan   1960
#&gt; 5 Afghanistan   1960
#&gt; 6 Afghanistan   1960</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                                       <span class='co'># .. but only works with collapse functions</span>

<span class='co'>## Now lets start putting things together</span>
 
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fmean</span>            <span class='co'># Fast aggregation using the mean</span>
</div><div class='output co'>#&gt;                        region              income      PCGDP   LIFEEX     GINI
#&gt; 1         East Asia &amp; Pacific         High income 32671.0522 78.21996 32.95000
#&gt; 2         East Asia &amp; Pacific Lower middle income  1738.5111 65.45647 36.51972
#&gt; 3         East Asia &amp; Pacific Upper middle income  4575.8695 70.87431 40.64815
#&gt; 4       Europe &amp; Central Asia         High income 40814.1215 77.67583 30.94218
#&gt; 5       Europe &amp; Central Asia          Low income   695.7951 65.04128 32.13333
#&gt; 6       Europe &amp; Central Asia Lower middle income  1779.7149 68.79873 30.66176
#&gt; 7       Europe &amp; Central Asia Upper middle income  5182.1800 71.30199 34.85362
#&gt; 8   Latin America &amp; Caribbean         High income 19864.5057 75.55674 48.35714
#&gt; 9   Latin America &amp; Caribbean          Low income  1189.8492 58.97359 41.10000
#&gt; 10  Latin America &amp; Caribbean Lower middle income  1987.5292 69.31612 50.58125
#&gt; 11  Latin America &amp; Caribbean Upper middle income  6224.6674 72.58127 49.88547
#&gt; 12 Middle East &amp; North Africa         High income 31438.6945 76.08925 33.10833
#&gt; 13 Middle East &amp; North Africa          Low income  1072.0132 67.51003 35.82000
#&gt; 14 Middle East &amp; North Africa Lower middle income  2630.8175 69.16114 35.98621
#&gt; 15 Middle East &amp; North Africa Upper middle income  5133.0663 72.17521 37.54091
#&gt; 16              North America         High income 60992.4577 78.93975 37.97381
#&gt; 17                 South Asia          Low income   520.4656 61.37648 37.26667
#&gt; 18                 South Asia Lower middle income  1138.2392 64.91331 33.14400
#&gt; 19                 South Asia Upper middle income  4358.4117 72.89226 37.82222
#&gt; 20         Sub-Saharan Africa         High income 10552.5283 72.50278 39.45000
#&gt; 21         Sub-Saharan Africa          Low income   553.4952 53.62325 42.05778
#&gt; 22         Sub-Saharan Africa Lower middle income  1692.8126 56.68968 45.61857
#&gt; 23         Sub-Saharan Africa Upper middle income  7454.2220 60.25884 55.04737
#&gt;           ODA
#&gt; 1   112194118
#&gt; 2   509965862
#&gt; 3   219146704
#&gt; 4   321907195
#&gt; 5   244539286
#&gt; 6   395371417
#&gt; 7   463652924
#&gt; 8    31307379
#&gt; 9   753747928
#&gt; 10  559540257
#&gt; 11  188305879
#&gt; 12  224029999
#&gt; 13 1495994830
#&gt; 14 1164234681
#&gt; 15  918072014
#&gt; 16   -3727143
#&gt; 17 1780284306
#&gt; 18 1517807416
#&gt; 19  259162414
#&gt; 20   23040371
#&gt; 21  811282623
#&gt; 22  679166286
#&gt; 23  230775466</div><div class='input'>
<span class='co'># Same thing using dplyr manipulation verbs</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>region</span>,<span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fmean</span>       <span class='co'># This is already a lot faster than summarize_all(mean)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 23 x 6</span><span>
#&gt;    region                    income               PCGDP LIFEEX  GINI        ODA
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>                     </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>                </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>      </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> East Asia &amp; Pacific       High income         </span><span style='text-decoration: underline;'>32</span><span>671.   78.2  32.9 112</span><span style='text-decoration: underline;'>194</span><span>118.
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> East Asia &amp; Pacific       Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>739.   65.5  36.5 509</span><span style='text-decoration: underline;'>965</span><span>862.
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> East Asia &amp; Pacific       Upper middle income  </span><span style='text-decoration: underline;'>4</span><span>576.   70.9  40.6 219</span><span style='text-decoration: underline;'>146</span><span>704.
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> Europe &amp; Central Asia     High income         </span><span style='text-decoration: underline;'>40</span><span>814.   77.7  30.9 321</span><span style='text-decoration: underline;'>907</span><span>195.
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> Europe &amp; Central Asia     Low income            696.   65.0  32.1 244</span><span style='text-decoration: underline;'>539</span><span>286.
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> Europe &amp; Central Asia     Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>780.   68.8  30.7 395</span><span style='text-decoration: underline;'>371</span><span>417.
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> Europe &amp; Central Asia     Upper middle income  </span><span style='text-decoration: underline;'>5</span><span>182.   71.3  34.9 463</span><span style='text-decoration: underline;'>652</span><span>924.
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> Latin America &amp; Caribbean High income         </span><span style='text-decoration: underline;'>19</span><span>865.   75.6  48.4  31</span><span style='text-decoration: underline;'>307</span><span>379.
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> Latin America &amp; Caribbean Low income           </span><span style='text-decoration: underline;'>1</span><span>190.   59.0  41.1 753</span><span style='text-decoration: underline;'>747</span><span>928.
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> Latin America &amp; Caribbean Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>988.   69.3  50.6 559</span><span style='text-decoration: underline;'>540</span><span>257.
#&gt; </span><span style='color: #949494;'># ... with 13 more rows</span><span></div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>POP</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>POP</span><span class='op'>)</span>     <span class='co'># Weighted group means</span>
</div><div class='output co'>#&gt;                        region              income     sum.POP      PCGDP
#&gt; 1         East Asia &amp; Pacific         High income  6165902760 37889.3406
#&gt; 2         East Asia &amp; Pacific Lower middle income 13784998066  2135.6182
#&gt; 3         East Asia &amp; Pacific Upper middle income 40150644873  3769.4215
#&gt; 4       Europe &amp; Central Asia         High income 13923291507 34583.4203
#&gt; 5       Europe &amp; Central Asia          Low income   203224216   722.7351
#&gt; 6       Europe &amp; Central Asia Lower middle income  2399154808  2145.1352
#&gt; 7       Europe &amp; Central Asia Upper middle income  8919358306  8238.8391
#&gt; 8   Latin America &amp; Caribbean         High income   842939686 13068.1667
#&gt; 9   Latin America &amp; Caribbean          Low income   267125746  1193.5889
#&gt; 10  Latin America &amp; Caribbean Lower middle income   815192217  2011.6260
#&gt; 11  Latin America &amp; Caribbean Upper middle income 14126371984  8503.4441
#&gt; 12 Middle East &amp; North Africa         High income  1313005541 26494.8475
#&gt; 13 Middle East &amp; North Africa          Low income  1095032398  1050.7812
#&gt; 14 Middle East &amp; North Africa Lower middle income  3528901639  2465.5586
#&gt; 15 Middle East &amp; North Africa Upper middle income  4294115593  5054.6118
#&gt; 16              North America         High income  9475038249 46392.0914
#&gt; 17                 South Asia          Low income  1465439791   530.9589
#&gt; 18                 South Asia Lower middle income 41743646777  1141.6986
#&gt; 19                 South Asia Upper middle income   577589599  2530.3916
#&gt; 20         Sub-Saharan Africa         High income     2439161 10731.3048
#&gt; 21         Sub-Saharan Africa          Low income 11174374325   510.2309
#&gt; 22         Sub-Saharan Africa Lower middle income  9810447547  1679.5810
#&gt; 23         Sub-Saharan Africa Upper middle income  1607236689  6807.4483
#&gt;      LIFEEX     GINI        ODA
#&gt; 1  80.79250 32.81601  -79785907
#&gt; 2  68.24548 36.40362 1060544119
#&gt; 3  73.07773 40.38496 1229983586
#&gt; 4  78.82923 32.27710 1107199019
#&gt; 5  65.76604 32.22326  261043896
#&gt; 6  68.98050 28.97857  556232624
#&gt; 7  69.78322 38.66475 1187976647
#&gt; 8  76.76809 48.85497   97880105
#&gt; 9  59.34831 41.10000  794781510
#&gt; 10 69.33538 50.52363  571015463
#&gt; 11 73.13347 52.12495  381214016
#&gt; 12 75.14903 36.97805  221784229
#&gt; 13 67.50823 35.89218 1601917923
#&gt; 14 70.46161 32.80499 1838145941
#&gt; 15 71.94151 39.64476  835416959
#&gt; 16 77.75326 40.11957   -3636374
#&gt; 17 62.15389 37.24783 2064597919
#&gt; 18 65.09287 33.40511 2188242381
#&gt; 19 73.56395 38.24644  463229873
#&gt; 20 72.59308 39.18180   22793797
#&gt; 21 55.61464 40.18978 1599921687
#&gt; 22 53.98607 43.29449 1476705465
#&gt; 23 59.32147 61.32627  811029665</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>POP</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>POP</span><span class='op'>)</span>       <span class='co'># Weighted group standard deviations</span>
</div><div class='output co'>#&gt;                        region              income     sum.POP       PCGDP
#&gt; 1         East Asia &amp; Pacific         High income  6165902760 11619.90339
#&gt; 2         East Asia &amp; Pacific Lower middle income 13784998066  1074.84975
#&gt; 3         East Asia &amp; Pacific Upper middle income 40150644873  2374.39410
#&gt; 4       Europe &amp; Central Asia         High income 13923291507 13593.46879
#&gt; 5       Europe &amp; Central Asia          Low income   203224216   238.47730
#&gt; 6       Europe &amp; Central Asia Lower middle income  2399154808   841.97662
#&gt; 7       Europe &amp; Central Asia Upper middle income  8919358306  3175.38606
#&gt; 8   Latin America &amp; Caribbean         High income   842939686  6273.64310
#&gt; 9   Latin America &amp; Caribbean          Low income   267125746    70.56928
#&gt; 10  Latin America &amp; Caribbean Lower middle income   815192217   580.31064
#&gt; 11  Latin America &amp; Caribbean Upper middle income 14126371984  2638.99192
#&gt; 12 Middle East &amp; North Africa         High income  1313005541 12023.86214
#&gt; 13 Middle East &amp; North Africa          Low income  1095032398   221.81154
#&gt; 14 Middle East &amp; North Africa Lower middle income  3528901639   610.97055
#&gt; 15 Middle East &amp; North Africa Upper middle income  4294115593  1383.20550
#&gt; 16              North America         High income  9475038249  5723.11237
#&gt; 17                 South Asia          Low income  1465439791   128.12418
#&gt; 18                 South Asia Lower middle income 41743646777   465.42305
#&gt; 19                 South Asia Upper middle income   577589599  1061.58092
#&gt; 20         Sub-Saharan Africa         High income     2439161  2119.44406
#&gt; 21         Sub-Saharan Africa          Low income 11174374325   221.85533
#&gt; 22         Sub-Saharan Africa Lower middle income  9810447547   659.46081
#&gt; 23         Sub-Saharan Africa Upper middle income  1607236689  1417.80315
#&gt;      LIFEEX     GINI        ODA
#&gt; 1  2.730868 1.247116  129087430
#&gt; 2  4.230245 4.316708  943798728
#&gt; 3  2.428883 2.458222 1519636778
#&gt; 4  2.895801 2.994940 1131585991
#&gt; 5  4.555972 1.547793  112926454
#&gt; 6  1.688117 4.573107  370416116
#&gt; 7  3.707457 4.227846 1068502287
#&gt; 8  2.421882 5.289102   71662290
#&gt; 9  2.815436 0.000000  566758933
#&gt; 10 4.220554 5.684628  243414533
#&gt; 11 2.659939 4.740654  332660656
#&gt; 12 3.096179 5.324406  625723701
#&gt; 13 4.949966 1.081612 2592450038
#&gt; 14 3.011878 3.744778 1426555762
#&gt; 15 3.184049 4.538520 2501294845
#&gt; 16 1.454123 1.844310    4853460
#&gt; 17 5.044466 4.806039 2074087266
#&gt; 18 3.426284 2.042122  756716253
#&gt; 19 2.854203 1.845583  255142776
#&gt; 20 1.202700 7.345125   15950207
#&gt; 21 6.283442 6.065746 1230899009
#&gt; 22 6.165921 6.055453 1711070951
#&gt; 23 4.346604 4.087480  379928950</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helper.html'>na_omit</a></span><span class='op'>(</span>cols <span class='op'>=</span> <span class='st'>"POP"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>POP</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='fl'>0.75</span>, <span class='va'>POP</span><span class='op'>)</span>       <span class='co'># Weighted group third quartile</span>
</div><div class='output co'>#&gt;                        region              income     sum.POP      PCGDP
#&gt; 1         East Asia &amp; Pacific         High income 11407808149 42190.8049
#&gt; 2         East Asia &amp; Pacific Lower middle income 22174820629  2358.1198
#&gt; 3         East Asia &amp; Pacific Upper middle income 69639871478  3796.6799
#&gt; 4       Europe &amp; Central Asia         High income 27285316560 37934.4518
#&gt; 5       Europe &amp; Central Asia          Low income   311485944  1024.8590
#&gt; 6       Europe &amp; Central Asia Lower middle income  4511786205  3106.0390
#&gt; 7       Europe &amp; Central Asia Upper middle income 16972478305 10535.1258
#&gt; 8   Latin America &amp; Caribbean         High income  1466292826 13934.5762
#&gt; 9   Latin America &amp; Caribbean          Low income   429756890  1439.4554
#&gt; 10  Latin America &amp; Caribbean Lower middle income  1290800630  2241.2387
#&gt; 11  Latin America &amp; Caribbean Upper middle income 22949003780  9535.4188
#&gt; 12 Middle East &amp; North Africa         High income  1796139242 31695.0064
#&gt; 13 Middle East &amp; North Africa          Low income  1571055812  1199.5489
#&gt; 14 Middle East &amp; North Africa Lower middle income  5512454283  2636.3394
#&gt; 15 Middle East &amp; North Africa Upper middle income  6518561594  5922.5276
#&gt; 16              North America         High income 16881058226 48499.8124
#&gt; 17                 South Asia          Low income  2252259680   573.2876
#&gt; 18                 South Asia Lower middle income 65947845945  1173.8753
#&gt; 19                 South Asia Upper middle income  1006497506  2538.0876
#&gt; 20         Sub-Saharan Africa         High income     4222055 10645.0867
#&gt; 21         Sub-Saharan Africa          Low income 16384603068   659.8044
#&gt; 22         Sub-Saharan Africa Lower middle income 14399976836  1960.1885
#&gt; 23         Sub-Saharan Africa Upper middle income  2519611135  7345.9628
#&gt;      LIFEEX GINI        ODA
#&gt; 1  81.72195 33.5  743679993
#&gt; 2  69.86600 39.3 1838010010
#&gt; 3  73.76600 42.4 2575899902
#&gt; 4  79.13171 34.7 1750219971
#&gt; 5  68.73600 33.6  372250000
#&gt; 6  70.16112 29.8  711700012
#&gt; 7  70.57878 41.2 1790880005
#&gt; 8  77.63000 54.8  158039993
#&gt; 9  60.14800 41.1  958979980
#&gt; 10 71.19500 55.5  660250000
#&gt; 11 74.48300 57.5  470480011
#&gt; 12 75.44000 41.1   85660004
#&gt; 13 70.96700 36.7 1490489990
#&gt; 14 71.11700 34.4 2769409912
#&gt; 15 73.07200 43.6  380239990
#&gt; 16 78.39024 40.9     380000
#&gt; 17 64.13000 43.8 1452260010
#&gt; 18 66.57700 35.4 3434379883
#&gt; 19 75.15700 39.7  720869995
#&gt; 20 73.16341 46.8   39180000
#&gt; 21 58.46700 44.2 1831319946
#&gt; 22 57.03200 45.0 1560079956
#&gt; 23 62.33100 63.4 1099420044</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='va'>fwithin</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>                               <span class='co'># Within transformation</span>
</div><div class='output co'>#&gt;   PCGDP    LIFEEX GINI         ODA
#&gt; 1    NA -16.75117   NA -1370778502
#&gt; 2    NA -16.23517   NA -1255468497
#&gt; 3    NA -15.72617   NA -1374708502
#&gt; 4    NA -15.22617   NA -1249828497
#&gt; 5    NA -14.73417   NA -1191628485
#&gt; 6    NA -14.24917   NA -1145708502</div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span>TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>                    <span class='co'># Grouped centering using the median</span>
</div><div class='output co'>#&gt;   PCGDP   LIFEEX GINI        ODA
#&gt; 1    NA -17.5395   NA -144765007
#&gt; 2    NA -17.0235   NA  -29455002
#&gt; 3    NA -16.5145   NA -148695007
#&gt; 4    NA -16.0145   NA  -23815002
#&gt; 5    NA -15.5225   NA   34385010
#&gt; 6    NA -15.0375   NA   80304993</div><div class='input'><span class='co'># Replacing data points by the weighted first quartile:</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helper.html'>na_omit</a></span><span class='op'>(</span>cols <span class='op'>=</span> <span class='st'>"POP"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>POP</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='op'>-</span><span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='fl'>0.25</span>, <span class='va'>POP</span>, <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country year   PCGDP LIFEEX GINI       ODA     POP
#&gt; 1 Afghanistan 1960 405.549  46.04   NA 237720001 8996973
#&gt; 2 Afghanistan 1961 405.549  46.04   NA 237720001 9169410
#&gt; 3 Afghanistan 1962 405.549  46.04   NA 237720001 9351441
#&gt; 4 Afghanistan 1963 405.549  46.04   NA 237720001 9543205
#&gt; 5 Afghanistan 1964 405.549  46.04   NA 237720001 9744781
#&gt; 6 Afghanistan 1965 405.549  46.04   NA 237720001 9956320</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fscale</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>    <span class='co'># Standardizing</span>
</div><div class='output co'>#&gt;   PCGDP    LIFEEX GINI        ODA
#&gt; 1    NA -1.653181   NA -0.6498451
#&gt; 2    NA -1.602256   NA -0.5951801
#&gt; 3    NA -1.552023   NA -0.6517082
#&gt; 4    NA -1.502678   NA -0.5925063
#&gt; 5    NA -1.454122   NA -0.5649154
#&gt; 6    NA -1.406257   NA -0.5431461</div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>POP</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
   <span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>POP</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>  <span class='co'># Weigted..</span>
</div><div class='output co'>#&gt;       POP PCGDP    LIFEEX GINI        ODA
#&gt; 1 8996973    NA -2.172769   NA -0.9502811
#&gt; 2 9169410    NA -2.119489   NA -0.9011481
#&gt; 3 9351441    NA -2.066932   NA -0.9519557
#&gt; 4 9543205    NA -2.015304   NA -0.8987449
#&gt; 5 9744781    NA -1.964502   NA -0.8739462
#&gt; 6 9956320    NA -1.914423   NA -0.8543799</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  <span class='co'># Adding 1 lead and 2 lags of each variable</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP F1.LIFEEX LIFEEX L1.LIFEEX
#&gt; 1 Afghanistan 1960       NA    NA       NA       NA    32.962 32.446        NA
#&gt; 2 Afghanistan 1961       NA    NA       NA       NA    33.471 32.962    32.446
#&gt; 3 Afghanistan 1962       NA    NA       NA       NA    33.971 33.471    32.962
#&gt; 4 Afghanistan 1963       NA    NA       NA       NA    34.463 33.971    33.471
#&gt; 5 Afghanistan 1964       NA    NA       NA       NA    34.948 34.463    33.971
#&gt; 6 Afghanistan 1965       NA    NA       NA       NA    35.430 34.948    34.463
#&gt;   L2.LIFEEX F1.GINI GINI L1.GINI L2.GINI    F1.ODA       ODA    L1.ODA
#&gt; 1        NA      NA   NA      NA      NA 232080002 116769997        NA
#&gt; 2        NA      NA   NA      NA      NA 112839996 232080002 116769997
#&gt; 3    32.446      NA   NA      NA      NA 237720001 112839996 232080002
#&gt; 4    32.962      NA   NA      NA      NA 295920013 237720001 112839996
#&gt; 5    33.471      NA   NA      NA      NA 341839996 295920013 237720001
#&gt; 6    33.971      NA   NA      NA      NA 311609985 341839996 295920013
#&gt;      L2.ODA
#&gt; 1        NA
#&gt; 2        NA
#&gt; 3 116769997
#&gt; 4 232080002
#&gt; 5 112839996
#&gt; 6 237720001</div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  <span class='co'># Adding 1 lead and 10-year growth rates</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country year PCGDP G1.PCGDP L10G1.PCGDP LIFEEX G1.LIFEEX L10G1.LIFEEX
#&gt; 1 Afghanistan 1960    NA       NA          NA 32.446        NA           NA
#&gt; 2 Afghanistan 1961    NA       NA          NA 32.962  1.590335           NA
#&gt; 3 Afghanistan 1962    NA       NA          NA 33.471  1.544202           NA
#&gt; 4 Afghanistan 1963    NA       NA          NA 33.971  1.493830           NA
#&gt; 5 Afghanistan 1964    NA       NA          NA 34.463  1.448294           NA
#&gt; 6 Afghanistan 1965    NA       NA          NA 34.948  1.407306           NA
#&gt;   GINI G1.GINI L10G1.GINI       ODA    G1.ODA L10G1.ODA
#&gt; 1   NA      NA         NA 116769997        NA        NA
#&gt; 2   NA      NA         NA 232080002  98.74969        NA
#&gt; 3   NA      NA         NA 112839996 -51.37884        NA
#&gt; 4   NA      NA         NA 237720001 110.66998        NA
#&gt; 5   NA      NA         NA 295920013  24.48259        NA
#&gt; 6   NA      NA         NA 341839996  15.51770        NA</div><div class='input'>
<span class='co'># etc...</span>

<span class='co'># Aggregation with multiple functions</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='op'>{</span>
    <span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='fu'><a href='GRP, fgroup_by.html'>fgroup_vars</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='st'>"unique"</span><span class='op'>)</span>,
             <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helper.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"median_"</span><span class='op'>)</span>,
             <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helper.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"mean_"</span><span class='op'>)</span>,
             <span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helper.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"sd_"</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;                  region              income median_PCGDP median_LIFEEX
#&gt; 1   East Asia &amp; Pacific         High income   32573.8177      78.54024
#&gt; 2   East Asia &amp; Pacific Lower middle income    1658.3786      66.07200
#&gt; 3   East Asia &amp; Pacific Upper middle income    3583.2189      70.61500
#&gt; 4 Europe &amp; Central Asia         High income   36201.7707      78.16061
#&gt; 5 Europe &amp; Central Asia          Low income     668.9513      66.08000
#&gt; 6 Europe &amp; Central Asia Lower middle income    1648.2287      68.28880
#&gt;   median_GINI median_ODA mean_PCGDP mean_LIFEEX mean_GINI  mean_ODA   sd_PCGDP
#&gt; 1       32.75   11500000 32671.0522    78.21996  32.95000 112194118 13031.1867
#&gt; 2       35.70  257079987  1738.5111    65.45647  36.51972 509965862   904.3004
#&gt; 3       40.35   49730000  4575.8695    70.87431  40.64815 219146704  2489.3795
#&gt; 4       31.10  138889999 40814.1215    77.67583  30.94218 321907195 29485.3091
#&gt; 5       32.45  239055000   695.7951    65.04128  32.13333 244539286   242.4158
#&gt; 6       29.45  279739990  1779.7149    68.79873  30.66176 395371417   899.3757
#&gt;   sd_LIFEEX  sd_GINI    sd_ODA
#&gt; 1  3.825737 1.322624 223580786
#&gt; 2  5.003373 4.779528 686619373
#&gt; 3  3.157915 3.506637 684346804
#&gt; 4  3.810700 3.676878 632730086
#&gt; 5  4.723263 1.713087 116363515
#&gt; 6  1.739259 4.717988 316433503</div><div class='input'>
<span class='co'># Transformation with multiple functions</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='op'>{</span>
    <span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span><span class='op'>)</span>,  <span class='co'># Sequence of lagged differences</span>
             <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fwithin</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helper.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"W."</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
               <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span>, keep.ids <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>             <span class='co'># Sequence of lagged demeaned vars</span>
  <span class='op'>}</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country year D1.PCGDP L1.D1.PCGDP L2.D1.PCGDP L10D1.PCGDP L1.L10D1.PCGDP
#&gt; 1 Afghanistan 1960       NA          NA          NA          NA             NA
#&gt; 2 Afghanistan 1961       NA          NA          NA          NA             NA
#&gt; 3 Afghanistan 1962       NA          NA          NA          NA             NA
#&gt; 4 Afghanistan 1963       NA          NA          NA          NA             NA
#&gt; 5 Afghanistan 1964       NA          NA          NA          NA             NA
#&gt; 6 Afghanistan 1965       NA          NA          NA          NA             NA
#&gt;   L2.L10D1.PCGDP D1.LIFEEX L1.D1.LIFEEX L2.D1.LIFEEX L10D1.LIFEEX
#&gt; 1             NA        NA           NA           NA           NA
#&gt; 2             NA     0.516           NA           NA           NA
#&gt; 3             NA     0.509        0.516           NA           NA
#&gt; 4             NA     0.500        0.509        0.516           NA
#&gt; 5             NA     0.492        0.500        0.509           NA
#&gt; 6             NA     0.485        0.492        0.500           NA
#&gt;   L1.L10D1.LIFEEX L2.L10D1.LIFEEX D1.GINI L1.D1.GINI L2.D1.GINI L10D1.GINI
#&gt; 1              NA              NA      NA         NA         NA         NA
#&gt; 2              NA              NA      NA         NA         NA         NA
#&gt; 3              NA              NA      NA         NA         NA         NA
#&gt; 4              NA              NA      NA         NA         NA         NA
#&gt; 5              NA              NA      NA         NA         NA         NA
#&gt; 6              NA              NA      NA         NA         NA         NA
#&gt;   L1.L10D1.GINI L2.L10D1.GINI     D1.ODA  L1.D1.ODA  L2.D1.ODA L10D1.ODA
#&gt; 1            NA            NA         NA         NA         NA        NA
#&gt; 2            NA            NA  115310005         NA         NA        NA
#&gt; 3            NA            NA -119240005  115310005         NA        NA
#&gt; 4            NA            NA  124880005 -119240005  115310005        NA
#&gt; 5            NA            NA   58200012  124880005 -119240005        NA
#&gt; 6            NA            NA   45919983   58200012  124880005        NA
#&gt;   L1.L10D1.ODA L2.L10D1.ODA PCGDP L1.PCGDP L2.PCGDP LIFEEX L1.LIFEEX L2.LIFEEX
#&gt; 1           NA           NA    NA       NA       NA 32.446        NA        NA
#&gt; 2           NA           NA    NA       NA       NA 32.962    32.446        NA
#&gt; 3           NA           NA    NA       NA       NA 33.471    32.962    32.446
#&gt; 4           NA           NA    NA       NA       NA 33.971    33.471    32.962
#&gt; 5           NA           NA    NA       NA       NA 34.463    33.971    33.471
#&gt; 6           NA           NA    NA       NA       NA 34.948    34.463    33.971
#&gt;   GINI L1.GINI L2.GINI       ODA    L1.ODA    L2.ODA W.PCGDP L1.W.PCGDP
#&gt; 1   NA      NA      NA 116769997        NA        NA      NA         NA
#&gt; 2   NA      NA      NA 232080002 116769997        NA      NA         NA
#&gt; 3   NA      NA      NA 112839996 232080002 116769997      NA         NA
#&gt; 4   NA      NA      NA 237720001 112839996 232080002      NA         NA
#&gt; 5   NA      NA      NA 295920013 237720001 112839996      NA         NA
#&gt; 6   NA      NA      NA 341839996 295920013 237720001      NA         NA
#&gt;   L2.W.PCGDP  W.LIFEEX L1.W.LIFEEX L2.W.LIFEEX W.GINI L1.W.GINI L2.W.GINI
#&gt; 1         NA -16.75117          NA          NA     NA        NA        NA
#&gt; 2         NA -16.23517   -16.75117          NA     NA        NA        NA
#&gt; 3         NA -15.72617   -16.23517   -16.75117     NA        NA        NA
#&gt; 4         NA -15.22617   -15.72617   -16.23517     NA        NA        NA
#&gt; 5         NA -14.73417   -15.22617   -15.72617     NA        NA        NA
#&gt; 6         NA -14.24917   -14.73417   -15.22617     NA        NA        NA
#&gt;         W.ODA    L1.W.ODA    L2.W.ODA
#&gt; 1 -1370778502          NA          NA
#&gt; 2 -1255468497 -1370778502          NA
#&gt; 3 -1374708502 -1255468497 -1370778502
#&gt; 4 -1249828497 -1374708502 -1255468497
#&gt; 5 -1191628485 -1249828497 -1374708502
#&gt; 6 -1145708502 -1191628485 -1249828497</div><div class='input'>
<span class='co'># With ftransform, can also easily do one or more grouped mutations on the fly..</span>
<span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, median_ODA <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, sd_ODA <span class='op'>=</span> <span class='fu'><a href='fvar_fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span>,
                     mean_GDP <span class='op'>=</span> <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, <span class='va'>country</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>
 
<span class='va'>wlddev</span> <span class='op'>%&lt;&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>median_ODA <span class='op'>=</span> <span class='va'>ODA</span>, median_GDP <span class='op'>=</span> <span class='va'>PCGDP</span><span class='op'>)</span>,
                               <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># On a groped data frame it is also possible to grouped transform certain columns</span>
<span class='co'># but perform aggregate operatins on others:</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span>gmedian_GDP <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, <span class='fu'><a href='GRP, fgroup_by.html'>GRP</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span>,
               omedian_GDP <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span>,  <span class='co'># "replace" preserves NA's</span>
               omedian_GDP_fill <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>tail</span>
</div><div class='output co'>#&gt;        country iso3c       date year decade             region
#&gt; 13171 Zimbabwe   ZWE 2016-01-01 2015   2010 Sub-Saharan Africa
#&gt; 13172 Zimbabwe   ZWE 2017-01-01 2016   2010 Sub-Saharan Africa
#&gt; 13173 Zimbabwe   ZWE 2018-01-01 2017   2010 Sub-Saharan Africa
#&gt; 13174 Zimbabwe   ZWE 2019-01-01 2018   2010 Sub-Saharan Africa
#&gt; 13175 Zimbabwe   ZWE 2020-01-01 2019   2010 Sub-Saharan Africa
#&gt; 13176 Zimbabwe   ZWE 2021-01-01 2020   2020 Sub-Saharan Africa
#&gt;                    income  OECD    PCGDP LIFEEX GINI       ODA      POP
#&gt; 13171 Lower middle income FALSE 1234.103 59.534   NA 817729980 13814629
#&gt; 13172 Lower middle income FALSE 1224.310 60.294   NA 687659973 14030390
#&gt; 13173 Lower middle income FALSE 1263.321 60.812 44.3 753909973 14236745
#&gt; 13174 Lower middle income FALSE 1305.783 61.195   NA 794510010 14439018
#&gt; 13175 Lower middle income FALSE 1183.099 61.490 50.3 988039978 14645468
#&gt; 13176 Lower middle income FALSE       NA     NA   NA        NA       NA
#&gt;       median_ODA    sd_ODA mean_GDP median_GDP gmedian_GDP omedian_GDP
#&gt; 13171  280630005 694376321 1219.436   1336.053    1336.053    3767.162
#&gt; 13172  280630005 694376321 1219.436   1336.053    1336.053    3767.162
#&gt; 13173  280630005 694376321 1219.436   1336.053    1336.053    3767.162
#&gt; 13174  280630005 694376321 1219.436   1336.053    1336.053    3767.162
#&gt; 13175  280630005 694376321 1219.436   1336.053    1336.053    3767.162
#&gt; 13176  280630005 694376321 1219.436   1336.053          NA          NA
#&gt;       omedian_GDP_fill
#&gt; 13171         3767.162
#&gt; 13172         3767.162
#&gt; 13173         3767.162
#&gt; 13174         3767.162
#&gt; 13175         3767.162
#&gt; 13176         3767.162</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>

<span class='co'>## For multi-type data aggregation, the function collap offers ease and flexibility</span>
<span class='co'># Aggregate this data by country and decade: Numeric columns with mean, categorical with mode</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>, <span class='va'>fmean</span>, <span class='va'>fmode</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date   year decade     region     income  OECD
#&gt; 1 Afghanistan   AFG 1961-01-01 1964.5   1960 South Asia Low income FALSE
#&gt; 2 Afghanistan   AFG 1971-01-01 1974.5   1970 South Asia Low income FALSE
#&gt; 3 Afghanistan   AFG 1981-01-01 1984.5   1980 South Asia Low income FALSE
#&gt; 4 Afghanistan   AFG 1991-01-01 1994.5   1990 South Asia Low income FALSE
#&gt; 5 Afghanistan   AFG 2001-01-01 2004.5   2000 South Asia Low income FALSE
#&gt; 6 Afghanistan   AFG 2011-01-01 2014.5   2010 South Asia Low income FALSE
#&gt;      PCGDP  LIFEEX GINI        ODA      POP
#&gt; 1       NA 34.6908   NA  222288999  9886773
#&gt; 2       NA 39.9053   NA  236169998 12451803
#&gt; 3       NA 46.4176   NA   71666001 12291854
#&gt; 4       NA 53.0097   NA  317255000 16931903
#&gt; 5 379.3730 58.0881   NA 3054051961 24870022
#&gt; 6 567.4047 63.0715   NA 5023859033 33741195</div><div class='input'>
<span class='co'># taking weighted mean and weighted mode:</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>, <span class='va'>fmean</span>, <span class='va'>fmode</span>, w <span class='op'>=</span> <span class='op'>~</span> <span class='va'>POP</span>, wFUN <span class='op'>=</span> <span class='va'>fsum</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date     year decade     region     income  OECD
#&gt; 1 Afghanistan   AFG 1970-01-01 1964.675   1960 South Asia Low income FALSE
#&gt; 2 Afghanistan   AFG 1980-01-01 1974.672   1970 South Asia Low income FALSE
#&gt; 3 Afghanistan   AFG 1981-01-01 1984.364   1980 South Asia Low income FALSE
#&gt; 4 Afghanistan   AFG 2000-01-01 1994.941   1990 South Asia Low income FALSE
#&gt; 5 Afghanistan   AFG 2010-01-01 2004.788   2000 South Asia Low income FALSE
#&gt; 6 Afghanistan   AFG 2020-01-01 2014.745   2010 South Asia Low income FALSE
#&gt;      PCGDP   LIFEEX GINI        ODA       POP
#&gt; 1       NA 34.77716   NA  223006447  98867731
#&gt; 2       NA 40.00367   NA  236798314 124518028
#&gt; 3       NA 46.32098   NA   70613923 122918537
#&gt; 4       NA 53.25897   NA  306818649 169319030
#&gt; 5 382.5583 58.23630   NA 3240143310 248700217
#&gt; 6 568.0810 63.17450   NA 4942806183 337411950</div><div class='input'>
<span class='co'># Multi-function aggregation of certain columns</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>fmean</span>, <span class='va'>fmedian</span>, <span class='va'>fsd</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>ffirst</span>, <span class='va'>flast</span><span class='op'>)</span>, cols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country ffirst.date flast.date decade fmean.PCGDP fmedian.PCGDP fsd.PCGDP
#&gt; 1 Afghanistan  1961-01-01 1970-01-01   1960          NA            NA        NA
#&gt; 2 Afghanistan  1971-01-01 1980-01-01   1970          NA            NA        NA
#&gt; 3 Afghanistan  1981-01-01 1990-01-01   1980          NA            NA        NA
#&gt; 4 Afghanistan  1991-01-01 2000-01-01   1990          NA            NA        NA
#&gt; 5 Afghanistan  2001-01-01 2010-01-01   2000    379.3730      361.2596  53.66524
#&gt; 6 Afghanistan  2011-01-01 2020-01-01   2010    567.4047      572.3641  18.07999
#&gt;   fmean.LIFEEX fmedian.LIFEEX fsd.LIFEEX fmean.GINI fmedian.GINI fsd.GINI
#&gt; 1      34.6908        34.7055   1.490964         NA           NA       NA
#&gt; 2      39.9053        39.8430   1.738383         NA           NA       NA
#&gt; 3      46.4176        46.4005   2.161460         NA           NA       NA
#&gt; 4      53.0097        53.1200   1.695424         NA           NA       NA
#&gt; 5      58.0881        58.0310   1.565630         NA           NA       NA
#&gt; 6      63.0715        63.1715   1.274644         NA           NA       NA
#&gt;    fmean.ODA fmedian.ODA    fsd.ODA
#&gt; 1  222288999   234900002   80884369
#&gt; 2  236169998   246509995   34241008
#&gt; 3   71666001    48539999   72958531
#&gt; 4  317255000   285175003  160500141
#&gt; 5 3054051961  2984469971 2013110021
#&gt; 6 5023859033  4651180176 1090075663</div><div class='input'>
<span class='co'># Customized Aggregation: Assign columns to functions</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>,
            custom <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>fmean <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>10</span>, fsd <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, flast <span class='op'>=</span> <span class='fl'>3</span>, ffirst <span class='op'>=</span> <span class='fl'>6</span><span class='op'>:</span><span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country flast.date decade ffirst.region ffirst.income ffirst.OECD
#&gt; 1 Afghanistan 1970-01-01   1960    South Asia    Low income       FALSE
#&gt; 2 Afghanistan 1980-01-01   1970    South Asia    Low income       FALSE
#&gt; 3 Afghanistan 1990-01-01   1980    South Asia    Low income       FALSE
#&gt; 4 Afghanistan 2000-01-01   1990    South Asia    Low income       FALSE
#&gt; 5 Afghanistan 2010-01-01   2000    South Asia    Low income       FALSE
#&gt; 6 Afghanistan 2020-01-01   2010    South Asia    Low income       FALSE
#&gt;   fmean.PCGDP fsd.PCGDP fmean.LIFEEX fsd.LIFEEX fsd.GINI    fsd.ODA
#&gt; 1          NA        NA      34.6908   1.490964       NA   80884369
#&gt; 2          NA        NA      39.9053   1.738383       NA   34241008
#&gt; 3          NA        NA      46.4176   2.161460       NA   72958531
#&gt; 4          NA        NA      53.0097   1.695424       NA  160500141
#&gt; 5    379.3730  53.66524      58.0881   1.565630       NA 2013110021
#&gt; 6    567.4047  18.07999      63.0715   1.274644       NA 1090075663</div><div class='input'> 
<span class='co'># For grouped data frames use collapg</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>country</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='collap.html'>collapg</a></span><span class='op'>(</span><span class='va'>fmean</span>, <span class='va'>ffirst</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span>AMGDP <span class='op'>=</span> <span class='va'>PCGDP</span> <span class='op'>&gt;</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span>,
             AMODA <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>&gt;</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='va'>income</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;          country                     region              income      PCGDP
#&gt; 1    Afghanistan                 South Asia          Low income   483.8351
#&gt; 2        Albania      Europe &amp; Central Asia Upper middle income  3127.1510
#&gt; 3        Algeria Middle East &amp; North Africa Upper middle income  4056.4341
#&gt; 4 American Samoa        East Asia &amp; Pacific Upper middle income 10071.0659
#&gt; 5        Andorra      Europe &amp; Central Asia         High income 40768.8453
#&gt; 6         Angola         Sub-Saharan Africa Lower middle income  2876.5065
#&gt;     LIFEEX     GINI        ODA AMGDP AMODA
#&gt; 1 58.32283       NA 2888193791 FALSE  TRUE
#&gt; 2 75.19266 31.41111  343797587 FALSE  TRUE
#&gt; 3 72.57717 31.45000  287459654 FALSE  TRUE
#&gt; 4       NA       NA         NA  TRUE    NA
#&gt; 5       NA       NA         NA  TRUE    NA
#&gt; 6 51.59572 48.66667  412104483  TRUE FALSE</div><div class='input'>
<span class='co'>## Additional flexibility for data transformation tasks is offerend by tidy transformation operators</span>
<span class='co'># Within-transformation (centering on overall mean)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country W.PCGDP W.LIFEEX W.GINI      W.ODA
#&gt; 1 Afghanistan      NA 47.54514     NA -916058371
#&gt; 2 Afghanistan      NA 48.06114     NA -800748366
#&gt; 3 Afghanistan      NA 48.57014     NA -919988371
#&gt; 4 Afghanistan      NA 49.07014     NA -795108366
#&gt; 5 Afghanistan      NA 49.56214     NA -736908354
#&gt; 6 Afghanistan      NA 50.04714     NA -690988371</div><div class='input'><span class='co'># \donttest{</span>
<span class='co'># Partialling out country and year fixed effects</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fhdbetween_fhdwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span> <span class='op'>+</span> <span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    HDW.PCGDP HDW.LIFEEX
#&gt; 43 1578.6211 -1.3980224
#&gt; 44 1412.8849 -1.1838196
#&gt; 45  917.2033 -1.0547978
#&gt; 46  627.8605 -0.8296048
#&gt; 47  168.0458 -0.6683027
#&gt; 48 -234.9535 -0.4708428</div><div class='input'><span class='co'># Same, adding ODA as continuous regressor</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fhdbetween_fhdwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span> <span class='op'>+</span> <span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>ODA</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    HDW.PCGDP HDW.LIFEEX
#&gt; 43 -324.3991 -1.1765307
#&gt; 44 -439.5404 -0.9751559
#&gt; 45 -598.9266 -0.7835446
#&gt; 46  100.2175 -0.6186010
#&gt; 47  -70.7664 -0.4966332
#&gt; 48  330.3561 -0.2257800</div><div class='input'><span class='co'># }</span>
<span class='co'># Standardizing (scaling and centering) by country</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA
#&gt; 1 Afghanistan        NA  -1.653181       NA -0.6498451
#&gt; 2 Afghanistan        NA  -1.602256       NA -0.5951801
#&gt; 3 Afghanistan        NA  -1.552023       NA -0.6517082
#&gt; 4 Afghanistan        NA  -1.502678       NA -0.5925063
#&gt; 5 Afghanistan        NA  -1.454122       NA -0.5649154
#&gt; 6 Afghanistan        NA  -1.406257       NA -0.5431461</div><div class='input'><span class='co'># Computing 1 lead and 3 lags of the 4 series</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP L3.PCGDP F1.LIFEEX LIFEEX
#&gt; 1 Afghanistan 1960       NA    NA       NA       NA       NA    32.962 32.446
#&gt; 2 Afghanistan 1961       NA    NA       NA       NA       NA    33.471 32.962
#&gt; 3 Afghanistan 1962       NA    NA       NA       NA       NA    33.971 33.471
#&gt; 4 Afghanistan 1963       NA    NA       NA       NA       NA    34.463 33.971
#&gt; 5 Afghanistan 1964       NA    NA       NA       NA       NA    34.948 34.463
#&gt; 6 Afghanistan 1965       NA    NA       NA       NA       NA    35.430 34.948
#&gt;   L1.LIFEEX L2.LIFEEX L3.LIFEEX F1.GINI GINI L1.GINI L2.GINI L3.GINI    F1.ODA
#&gt; 1        NA        NA        NA      NA   NA      NA      NA      NA 232080002
#&gt; 2    32.446        NA        NA      NA   NA      NA      NA      NA 112839996
#&gt; 3    32.962    32.446        NA      NA   NA      NA      NA      NA 237720001
#&gt; 4    33.471    32.962    32.446      NA   NA      NA      NA      NA 295920013
#&gt; 5    33.971    33.471    32.962      NA   NA      NA      NA      NA 341839996
#&gt; 6    34.463    33.971    33.471      NA   NA      NA      NA      NA 311609985
#&gt;         ODA    L1.ODA    L2.ODA    L3.ODA
#&gt; 1 116769997        NA        NA        NA
#&gt; 2 232080002 116769997        NA        NA
#&gt; 3 112839996 232080002 116769997        NA
#&gt; 4 237720001 112839996 232080002 116769997
#&gt; 5 295920013 237720001 112839996 232080002
#&gt; 6 341839996 295920013 237720001 112839996</div><div class='input'><span class='co'># Computing the 1- and 10-year first differences</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>D</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year D1.PCGDP L10D1.PCGDP D1.LIFEEX L10D1.LIFEEX D1.GINI
#&gt; 1 Afghanistan 1960       NA          NA        NA           NA      NA
#&gt; 2 Afghanistan 1961       NA          NA     0.516           NA      NA
#&gt; 3 Afghanistan 1962       NA          NA     0.509           NA      NA
#&gt; 4 Afghanistan 1963       NA          NA     0.500           NA      NA
#&gt; 5 Afghanistan 1964       NA          NA     0.492           NA      NA
#&gt; 6 Afghanistan 1965       NA          NA     0.485           NA      NA
#&gt;   L10D1.GINI     D1.ODA L10D1.ODA
#&gt; 1         NA         NA        NA
#&gt; 2         NA  115310005        NA
#&gt; 3         NA -119240005        NA
#&gt; 4         NA  124880005        NA
#&gt; 5         NA   58200012        NA
#&gt; 6         NA   45919983        NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>D</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># ..first and second differences</span>
</div><div class='output co'>#&gt;       country year D1.PCGDP D2.PCGDP L10D1.PCGDP L10D2.PCGDP D1.LIFEEX
#&gt; 1 Afghanistan 1960       NA       NA          NA          NA        NA
#&gt; 2 Afghanistan 1961       NA       NA          NA          NA     0.516
#&gt; 3 Afghanistan 1962       NA       NA          NA          NA     0.509
#&gt; 4 Afghanistan 1963       NA       NA          NA          NA     0.500
#&gt; 5 Afghanistan 1964       NA       NA          NA          NA     0.492
#&gt; 6 Afghanistan 1965       NA       NA          NA          NA     0.485
#&gt;   D2.LIFEEX L10D1.LIFEEX L10D2.LIFEEX D1.GINI D2.GINI L10D1.GINI L10D2.GINI
#&gt; 1        NA           NA           NA      NA      NA         NA         NA
#&gt; 2        NA           NA           NA      NA      NA         NA         NA
#&gt; 3    -0.007           NA           NA      NA      NA         NA         NA
#&gt; 4    -0.009           NA           NA      NA      NA         NA         NA
#&gt; 5    -0.008           NA           NA      NA      NA         NA         NA
#&gt; 6    -0.007           NA           NA      NA      NA         NA         NA
#&gt;       D1.ODA     D2.ODA L10D1.ODA L10D2.ODA
#&gt; 1         NA         NA        NA        NA
#&gt; 2  115310005         NA        NA        NA
#&gt; 3 -119240005 -234550011        NA        NA
#&gt; 4  124880005  244120010        NA        NA
#&gt; 5   58200012  -66679993        NA        NA
#&gt; 6   45919983  -12280029        NA        NA</div><div class='input'><span class='co'># Computing the 1- and 10-year growth rates</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year G1.PCGDP L10G1.PCGDP G1.LIFEEX L10G1.LIFEEX G1.GINI
#&gt; 1 Afghanistan 1960       NA          NA        NA           NA      NA
#&gt; 2 Afghanistan 1961       NA          NA  1.590335           NA      NA
#&gt; 3 Afghanistan 1962       NA          NA  1.544202           NA      NA
#&gt; 4 Afghanistan 1963       NA          NA  1.493830           NA      NA
#&gt; 5 Afghanistan 1964       NA          NA  1.448294           NA      NA
#&gt; 6 Afghanistan 1965       NA          NA  1.407306           NA      NA
#&gt;   L10G1.GINI    G1.ODA L10G1.ODA
#&gt; 1         NA        NA        NA
#&gt; 2         NA  98.74969        NA
#&gt; 3         NA -51.37884        NA
#&gt; 4         NA 110.66998        NA
#&gt; 5         NA  24.48259        NA
#&gt; 6         NA  15.51770        NA</div><div class='input'><span class='co'># Adding growth rate variables to dataset</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, keep.ids <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='st'>"G1."</span>, regex <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='cn'>NULL</span> <span class='co'># Deleting again</span>
 
<span class='co'># These operators can conveniently be used in regression formulas:</span>
<span class='co'># Using a Mundlak (1978) procedure to estimate the effect of OECD on LIFEEX, controlling for PCGDP</span>
<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>OECD</span> <span class='op'>+</span> <span class='fu'><a href='fbetween_fwithin.html'>B</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span>, <span class='va'>country</span><span class='op'>)</span>,
   <span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>OECD</span>, <span class='va'>PCGDP</span>, <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>na_omit</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; lm(formula = LIFEEX ~ log(PCGDP) + OECD + B(log(PCGDP), country), 
#&gt;     data = wlddev %&gt;% fselect(country, OECD, PCGDP, LIFEEX) %&gt;% 
#&gt;         na_omit)
#&gt; 
#&gt; Coefficients:
#&gt;            (Intercept)              log(PCGDP)                OECDTRUE  
#&gt;               19.32590                 8.20551                 0.02478  
#&gt; B(log(PCGDP), country)  
#&gt;               -2.65428  
#&gt; </div><div class='input'>
<span class='co'># Adding 10-year lagged life-expectancy to allow for some convergence effects (dynamic panel model)</span>
<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>LIFEEX</span>, <span class='fl'>10</span>, <span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>OECD</span> <span class='op'>+</span> <span class='fu'><a href='fbetween_fwithin.html'>B</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span>, <span class='va'>country</span><span class='op'>)</span>,
   <span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>OECD</span>, <span class='va'>PCGDP</span>, <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>na_omit</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Panel-lag computed without timevar: Assuming ordered data</span></div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; lm(formula = LIFEEX ~ L(LIFEEX, 10, country) + log(PCGDP) + OECD + 
#&gt;     B(log(PCGDP), country), data = wlddev %&gt;% fselect(country, 
#&gt;     OECD, PCGDP, LIFEEX) %&gt;% na_omit)
#&gt; 
#&gt; Coefficients:
#&gt;            (Intercept)  L(LIFEEX, 10, country)              log(PCGDP)  
#&gt;                 9.2756                  0.8656                  0.9229  
#&gt;               OECDTRUE  B(log(PCGDP), country)  
#&gt;                 0.4158                 -0.6581  
#&gt; </div><div class='input'>
<span class='co'># Tranformation functions and operators also support plm panel data classes:</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://cran.r-project.org/package=plm'>plm</a></span><span class='op'>)</span>
<span class='va'>pwlddev</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/plm/man/pdata.frame.html'>pdata.frame</a></span><span class='op'>(</span><span class='va'>wlddev</span>, index <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"country"</span>,<span class='st'>"year"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Country-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year W.PCGDP  W.LIFEEX W.GINI       W.ODA
#&gt; Afghanistan-1960 Afghanistan 1960      NA -16.75117     NA -1370778502
#&gt; Afghanistan-1961 Afghanistan 1961      NA -16.23517     NA -1255468497
#&gt; Afghanistan-1962 Afghanistan 1962      NA -15.72617     NA -1374708502
#&gt; Afghanistan-1963 Afghanistan 1963      NA -15.22617     NA -1249828497
#&gt; Afghanistan-1964 Afghanistan 1964      NA -14.73417     NA -1191628485
#&gt; Afghanistan-1965 Afghanistan 1965      NA -14.24917     NA -1145708502</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span>, effect <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>          <span class='co'># Time-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween_fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, effect <span class='op'>=</span> <span class='fl'>2</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year W.PCGDP  W.LIFEEX W.GINI      W.ODA
#&gt; Afghanistan-1960 Afghanistan 1960      NA -21.46606     NA -122241092
#&gt; Afghanistan-1961 Afghanistan 1961      NA -21.51241     NA  -37552049
#&gt; Afghanistan-1962 Afghanistan 1962      NA -21.38618     NA -183366702
#&gt; Afghanistan-1963 Afghanistan 1963      NA -21.23172     NA  -54896550
#&gt; Afghanistan-1964 Afghanistan 1964      NA -21.20502     NA   -9633789
#&gt; Afghanistan-1965 Afghanistan 1965      NA -21.18163     NA    5438669</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fhdbetween_fhdwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                    <span class='co'># Country- and time-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fhdbetween_fhdwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                  HDW.PCGDP HDW.LIFEEX HDW.GINI     HDW.ODA
#&gt; Afghanistan-1960        NA  -6.706423       NA -1093922188
#&gt; Afghanistan-1961        NA  -6.688440       NA -1032355993
#&gt; Afghanistan-1962        NA  -6.562210       NA -1156945288
#&gt; Afghanistan-1963        NA  -6.472079       NA -1046169271
#&gt; Afghanistan-1964        NA  -6.445378       NA  -996348510
#&gt; Afghanistan-1965        NA  -6.367659       NA  -983277444</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                    <span class='co'># Standardizing by country</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA
#&gt; Afghanistan-1960 Afghanistan 1960        NA  -1.653181       NA -0.6498451
#&gt; Afghanistan-1961 Afghanistan 1961        NA  -1.602256       NA -0.5951801
#&gt; Afghanistan-1962 Afghanistan 1962        NA  -1.552023       NA -0.6517082
#&gt; Afghanistan-1963 Afghanistan 1963        NA  -1.502678       NA -0.5925063
#&gt; Afghanistan-1964 Afghanistan 1964        NA  -1.454122       NA -0.5649154
#&gt; Afghanistan-1965 Afghanistan 1965        NA  -1.406257       NA -0.5431461</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># Panel-lags</span>
</div><div class='output co'>#&gt;                  F1 -- L1 L2 L3
#&gt; Afghanistan-1960 NA NA NA NA NA
#&gt; Afghanistan-1961 NA NA NA NA NA
#&gt; Afghanistan-1962 NA NA NA NA NA
#&gt; Afghanistan-1963 NA NA NA NA NA
#&gt; Afghanistan-1964 NA NA NA NA NA
#&gt; Afghanistan-1965 NA NA NA NA NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP L3.PCGDP
#&gt; Afghanistan-1960 Afghanistan 1960       NA    NA       NA       NA       NA
#&gt; Afghanistan-1961 Afghanistan 1961       NA    NA       NA       NA       NA
#&gt; Afghanistan-1962 Afghanistan 1962       NA    NA       NA       NA       NA
#&gt; Afghanistan-1963 Afghanistan 1963       NA    NA       NA       NA       NA
#&gt; Afghanistan-1964 Afghanistan 1964       NA    NA       NA       NA       NA
#&gt; Afghanistan-1965 Afghanistan 1965       NA    NA       NA       NA       NA
#&gt;                  F1.LIFEEX LIFEEX L1.LIFEEX L2.LIFEEX L3.LIFEEX F1.GINI GINI
#&gt; Afghanistan-1960    32.962 32.446        NA        NA        NA      NA   NA
#&gt; Afghanistan-1961    33.471 32.962    32.446        NA        NA      NA   NA
#&gt; Afghanistan-1962    33.971 33.471    32.962    32.446        NA      NA   NA
#&gt; Afghanistan-1963    34.463 33.971    33.471    32.962    32.446      NA   NA
#&gt; Afghanistan-1964    34.948 34.463    33.971    33.471    32.962      NA   NA
#&gt; Afghanistan-1965    35.430 34.948    34.463    33.971    33.471      NA   NA
#&gt;                  L1.GINI L2.GINI L3.GINI    F1.ODA       ODA    L1.ODA
#&gt; Afghanistan-1960      NA      NA      NA 232080002 116769997        NA
#&gt; Afghanistan-1961      NA      NA      NA 112839996 232080002 116769997
#&gt; Afghanistan-1962      NA      NA      NA 237720001 112839996 232080002
#&gt; Afghanistan-1963      NA      NA      NA 295920013 237720001 112839996
#&gt; Afghanistan-1964      NA      NA      NA 341839996 295920013 237720001
#&gt; Afghanistan-1965      NA      NA      NA 311609985 341839996 295920013
#&gt;                     L2.ODA    L3.ODA
#&gt; Afghanistan-1960        NA        NA
#&gt; Afghanistan-1961        NA        NA
#&gt; Afghanistan-1962 116769997        NA
#&gt; Afghanistan-1963 232080002 116769997
#&gt; Afghanistan-1964 112839996 232080002
#&gt; Afghanistan-1965 237720001 112839996</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Panel-Growth rates</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year G1.PCGDP G1.LIFEEX G1.GINI    G1.ODA
#&gt; Afghanistan-1960 Afghanistan 1960       NA        NA      NA        NA
#&gt; Afghanistan-1961 Afghanistan 1961       NA  1.590335      NA  98.74969
#&gt; Afghanistan-1962 Afghanistan 1962       NA  1.544202      NA -51.37884
#&gt; Afghanistan-1963 Afghanistan 1963       NA  1.493830      NA 110.66998
#&gt; Afghanistan-1964 Afghanistan 1964       NA  1.448294      NA  24.48259
#&gt; Afghanistan-1965 Afghanistan 1965       NA  1.407306      NA  15.51770</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>)</span>

<span class='co'># Remove all objects used in this example section</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>v</span>, <span class='va'>d</span>, <span class='va'>w</span>, <span class='va'>f</span>, <span class='va'>f1</span>, <span class='va'>f2</span>, <span class='va'>g</span>, <span class='va'>mtcarsM</span>, <span class='va'>sds</span>, <span class='va'>series</span>, <span class='va'>wlddev</span><span class='op'>)</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


