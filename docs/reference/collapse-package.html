<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head><link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>
Advanced and Fast Data Transformation — collapse-package • collapse</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="
Advanced and Fast Data Transformation — collapse-package" />
<meta property="og:description" content="collapse is a C/C++ based package for data transformation and statistical computing in R. It's aims are:
To facilitate complex data transformation, exploration and computing tasks in R.
To help make R code fast, flexible, parsimonious and programmer friendly. 

It is made compatible with dplyr, data.table and the plm approach to panel data, and non-destructively handles other classes." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" target="_blank">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/collapse_R" target="_blank">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" target="_blank">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1><!-- %   \code{collapse:} -->
Advanced and Fast Data Transformation</h1>
    
    <div class="hidden name"><code>collapse-package.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><em>collapse</em> is a C/C++ based package for data transformation and statistical computing in R. It's aims are:</p><ul>
<li><p>To facilitate complex data transformation, exploration and computing tasks in R.</p></li>
<li><p>To help make R code fast, flexible, parsimonious and programmer friendly. <!-- % \emph{collapse} is a fast  %to facilitate (advanced) data manipulation in R   % To achieve the latter, -->
<!-- % collapse provides a broad set.. -&gt; Nah, it's not a misc package --></p></li>
</ul><p>It is made compatible with <em>dplyr</em>, <em>data.table</em> and the <em>plm</em> approach to panel data, and non-destructively handles other classes.</p>
    </div>



    <h2 class="hasAnchor" id="getting-started"><a class="anchor" href="#getting-started"></a>Getting Started</h2>

    <p>See <a href='index.html'>Collapse Documentation &amp; Overview</a>, or read the <a href='https://sebkrantz.github.io/collapse/articles/collapse_intro.html'>introductory vignette</a>. All vignettes can be accessed on the <a href='https://sebkrantz.github.io/collapse/'>package website</a>. A cheatsheet is available at <a href='https://raw.githubusercontent.com/rstudio/cheatsheets/master/collapse.pdf'>Rstudio</a>.
A compact introduction for quick-starters is provided in the examples section below.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><!-- % Put this below bullet points ?? % \emph{collapse} provides a carefully conceived % \emph{collapse} provides a compact set of functions % organized roughly into several topics -->
<em>collapse</em> provides an integrated suite of statistical and data manipulation functions. These improve, complement and extend the capabilities of base R and packages like <em>dplyr</em>, <em>data.table</em>, <em>plm</em>, <em>matrixStats</em>, <em>Rfast</em> etc.. Key Highlights:</p>
<ul>
<li><p>Fast C/C++ based (grouped, weighted) computations embedded in highly optimized R code.</p></li>
<li><p>More complex statistical, time series / panel data and recursive (list-processing) operations.</p></li>
<li><p>A flexible and generic approach supporting and preserving many R objects. <!-- % standard  % (S3 generic statistical functions, class/attribute preservation). % , compatibility with \emph{dplyr}, \emph{plm} and \emph{data.table} --></p></li>
<li><p>Optimized programming in standard and non-standard evaluation.</p></li>
</ul><p><!-- % To explain this a bit: -->
The statistical functions in <em>collapse</em> are S3 generic with core methods for vectors, matrices and data frames, and internally support grouped and weighted computations carried out in C/C++. <!-- %Thus functions need only be called once for column-wise and/or grouped computations, providing a lot of extra speed and full support for sampling weights. -->
R code is strongly optimized and inputs are swiftly passed to compiled C/C++ code, <!-- %, with further checks run at that level. -->
where various efficient algorithms are implemented. <!-- %This approach enables flexible and parsimonious programming and data manipulation in R at high speeds. --></p>
<p><!-- %when passed to a \emph{collapse} statistical function together with a suitable data object % To provide extra speed and programmability -->
To facilitate efficient programming, core S3 methods, grouping and ordering functionality and some C-level helper functions can be accessed by the user.</p>
<p><!-- %For example \code{GRP()} creates grouping objects directly passed to C++ by statistical functions. \code{fgroup_by()} attaches these objects to a data frame, yielding efficient chained calls when combined with \emph{magrittr} pipes, \link[=A3-fast-data-manipulation]{fast manipulation functions} and \link[=A1-fast-statistical-functions]{fast statistical functions}. --></p>
<p><!-- %Performance gains are also realized when grouping with factors, or computing on grouped (\emph{dplyr}) or panel data (\emph{plm}) frames. --></p>
<p><!-- %Hence \emph{collapse} enables optimized programming and data manipulation in both standard and non-standard evaluation. --></p>
<p><!-- %The function \code{fgroup_by} can be used to efficiently create a grouped tibble inside dplyr-like chained calls (constructed with \emph{magrittr} pipes, fast manipulation functions like \code{fselect}, \code{fsubset}, \code{ftransform} and fast statistical functions). Thus \emph{collapse} enables optimized programming in both standard and non-standard evaluation. --></p>

<p><!-- % attributes of atomic objects are preserved if the dimensions are unaltered by the computation, and data frame attributes are always preserved, --></p>
<p>Additional (hidden) S3 methods provide broad based compatibility with <em>dplyr</em> (grouped tibble), <em>data.table</em> and <em>plm</em> panel data classes. Functions and core methods also seek to preserve object attributes (including column attributes such as variable labels), ensuring flexibility and non-destructive workflows with a very broad range of R objects (including most time-series classes).</p>
<p>Missing values are efficiently skipped at C/C++ level. The package default is <code>na.rm = TRUE</code>, whereas <code>na.rm = FALSE</code> also yields efficient checking and early termination. Missing weights are supported. Core functionality and all statistical functions / computations are tested with 10,000 unit tests for Base R equivalence, exempting some improvements (e.g. <code><a href='fsum.html'>fsum(NA, na.rm = TRUE)</a></code> evaluates to <code>NA</code>, not 0, similarly for <code>fmin</code> and <code>fmax</code>; no <code>NaN</code> values are generated from computations involving <code>NA</code> values). Generic functions provide some <a href='collapse-options.html'>security</a> against silent swallowing of arguments.</p>
<p><!-- %Hence they also handle various date and time series classes etc., and can easily be integreated into most approaches to data transformation. --></p>
<p><!-- %A global \code{option("collapse_unused_arg_action")} can be set to regulate the behavior when unused arguments are passed to a generic function. The default is to issue a warning. --></p>

<p><em>collapse</em> installs with a built-in hierarchical <a href='index.html'>documentation</a> facilitating the use of the package. The vignettes are complimentary and also follow a more structured approach. <!-- % and \code{base/stats}. % extra methods warrant, provide ? --></p>
<p><!-- %Apart from general performance considerations, \emph{collapse} excels at applications involving fast panel data transformations and techniques, fast weighted computations (e.g. weighted aggregation), fast programming and aggregation with categorical and mixed-type data, fast programming with (multivariate) time series, and programming with lists of data objects. --></p>
<p><!-- %Other broad areas are fast grouped and weighted programming to implement new statistical techniques and packages, and fast data manipulation code (i.e. server-side for \code{shiny} apps). --></p>
<p><!-- % The package largely avoids non-standard evaluation and exports core methods for maximum programmability.  % Most are S3 generic with methods for common \code{R} objects (vectors, matrices, data frames, \dots) % high computation  %(aggregation and transformations ~10x \emph{data.table} on data &lt;1 Mio obs.). --></p>
<p><!-- % Beyond speed, flexibility and parsimony in coding, a central objective of \emph{collapse} is to facilitate advanced / complex operations on data. -->
The package is mainly coded in C++ and built with <em>Rcpp</em>, but also uses C functions from <em>data.table</em> (grouping, ordering, subsetting, row-binding), <em>fixest</em> (centering on multiple factors), <em>weights</em> (weighted pairwise correlations), <em>stats</em> (ACF and PACF) and <em>RcppArmadillo / RcppEigen</em> (fast linear fitting methods). For the moment <em>collapse</em> does not utilize low-level parallelism (such as OpenMP).
<!-- % \emph{collapse} is built with \code{Rcpp} and imports \code{C} functions from \emph{data.table}, \emph{lfe} and \emph{stats}. %, and uses \code{ggplot2} visualizations. --></p>


    <h2 class="hasAnchor" id="author-s-"><a class="anchor" href="#author-s-"></a>Author(s)</h2>

    <p><!-- % \author{ -->
<b>Maintainer</b>: Sebastian Krantz <a href='mailto:sebastian.krantz@graduateinstitute.ch'>sebastian.krantz@graduateinstitute.ch</a></p>
<p>Other contributors from packages <em>collapse</em> utilizes:</p><ul>
<li><p>Matt Dowle, Arun Srinivasan and contributors worldwide (<em>data.table</em>)</p></li>
<li><p>Dirk Eddelbuettel and contributors worldwide (<em>Rcpp</em>, <em>RcppArmadillo</em>, <em>RcppEigen</em>)</p></li>
<li><p>Laurent Berge (<em>fixest</em>)</p></li>
<li><p>Josh Pasek (<em>weights</em>)</p></li>
<li><p>R Core Team and contributors worldwide (<em>stats</em>)</p></li>
</ul><p>I thank Ralf Stubner, Joseph Wood and Dirk Eddelbuettel for helpful answers on Stackoverflow, Joris Meys for encouraging me and helping to set up the <a href='https://github.com/SebKrantz/collapse'>Github repository</a> for <em>collapse</em>, Matthieu Stigler, Patrice Kiener, Zhiyi Xu and Kevin Tappe for feature requests and helpful suggestions.</p>
    <h2 class="hasAnchor" id="developing-feature-requests-bug-reporting"><a class="anchor" href="#developing-feature-requests-bug-reporting"></a>Developing / Feature Requests / Bug Reporting</h2>

    
<ul>
<li><p>If you are interested in extending or optimizing this package, see the source code at <a href='https://github.com/SebKrantz/collapse/tree/master'>https://github.com/SebKrantz/collapse/tree/master</a>, fork and send pull-requests, or e-mail me.</p></li>
<li><p>Please send feature requests via e-mail.</p></li>
<li><p>Please report issues at <a href='https://github.com/SebKrantz/collapse/issues'>https://github.com/SebKrantz/collapse/issues</a> or e-mail me.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Let's start with some statistical programming</span>
<span class='va'>v</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>$</span><span class='va'>Sepal.Length</span>
<span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span>    <span class='co'># Saving numeric variables</span>
<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span>      <span class='co'># Factor</span>

<span class='co'># Simple statistics</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span>               <span class='co'># vector</span>
</div><div class='output co'>#&gt; [1] 5.843333</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># matrix (qM is a faster as.matrix)</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.843333     3.057333     3.758000     1.199333 </div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span>               <span class='co'># data.frame</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.843333     3.057333     3.758000     1.199333 </div><div class='input'>
<span class='co'># Preserving data structure</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>     <span class='co'># Still a matrix</span>
</div><div class='output co'>#&gt;      Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; [1,]     5.843333    3.057333        3.758    1.199333</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>         <span class='co'># Still a data.frame</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.843333    3.057333        3.758    1.199333</div><div class='input'>
<span class='co'># Weighted statistics, supported by most functions...</span>
<span class='va'>w</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='small-helpers.html'>fnrow</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, w <span class='op'>=</span> <span class='va'>w</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.776605     3.059187     3.648546     1.174385 </div><div class='input'>
<span class='co'># Grouped statistics...</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; setosa            5.006       3.428        1.462       0.246
#&gt; versicolor        5.936       2.770        4.260       1.326
#&gt; virginica         6.588       2.974        5.552       2.026</div><div class='input'>
<span class='co'># Groupwise-weighted statistics...</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; setosa         4.953186    3.394165     1.411027   0.2384878
#&gt; versicolor     5.952750    2.753233     4.268907   1.3287435
#&gt; virginica      6.483938    2.979511     5.444769   2.0190572</div><div class='input'>
<span class='co'># Simple Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmode.html'>fmode</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># Replacing values with the mode</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1            5           3          1.5         0.2
#&gt; 2            5           3          1.5         0.2
#&gt; 3            5           3          1.5         0.2
#&gt; 4            5           3          1.5         0.2
#&gt; 5            5           3          1.5         0.2
#&gt; 6            5           3          1.5         0.2</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Subtracting the median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1         -0.7         0.5        -2.95        -1.1
#&gt; 2         -0.9         0.0        -2.95        -1.1
#&gt; 3         -1.1         0.2        -3.05        -1.1
#&gt; 4         -1.2         0.1        -2.85        -1.1
#&gt; 5         -0.8         0.6        -2.95        -1.1
#&gt; 6         -0.4         0.9        -2.65        -0.9</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"%"</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># Computing percentages</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    0.5818597   0.7631923    0.2483591   0.1111729
#&gt; 2    0.5590416   0.6541648    0.2483591   0.1111729
#&gt; 3    0.5362236   0.6977758    0.2306191   0.1111729
#&gt; 4    0.5248146   0.6759703    0.2660990   0.1111729
#&gt; 5    0.5704507   0.7849978    0.2483591   0.1111729
#&gt; 6    0.6160867   0.8504143    0.3015789   0.2223457</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>            <span class='co'># Dividing by the standard-deviation (scaling), etc...</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     6.158928    8.029986    0.7930671   0.2623854
#&gt; 2     5.917402    6.882845    0.7930671   0.2623854
#&gt; 3     5.675875    7.341701    0.7364195   0.2623854
#&gt; 4     5.555112    7.112273    0.8497148   0.2623854
#&gt; 5     6.038165    8.259414    0.7930671   0.2623854
#&gt; 6     6.521218    8.947698    0.9630101   0.5247707</div><div class='input'>
<span class='co'># Weighted Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='fl'>0.75</span>, w <span class='op'>=</span> <span class='va'>w</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Replacing by the weighted 3rd quartile</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          6.4         3.3          5.1         1.8
#&gt; 2          6.4         3.3          5.1         1.8
#&gt; 3          6.4         3.3          5.1         1.8
#&gt; 4          6.4         3.3          5.1         1.8
#&gt; 5          6.4         3.3          5.1         1.8
#&gt; 6          6.4         3.3          5.1         1.8</div><div class='input'>
<span class='co'># Grouped Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar, fsd.html'>fvar</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Replacing values with the group variance</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 2     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 3     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 4     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 5     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 6     0.124249   0.1436898   0.03015918  0.01110612</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Grouped scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     14.46851    9.233260     8.061544    1.897793
#&gt; 2     13.90112    7.914223     8.061544    1.897793
#&gt; 3     13.33372    8.441838     7.485720    1.897793
#&gt; 4     13.05003    8.178031     8.637369    1.897793
#&gt; 5     14.18481    9.497068     8.061544    1.897793
#&gt; 6     15.31960   10.288490     9.789018    3.795585</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmin, fmax.html'>fmin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Setting the minimum value in each species to 0</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.8         1.2          0.4         0.1
#&gt; 2          0.6         0.7          0.4         0.1
#&gt; 3          0.4         0.9          0.3         0.1
#&gt; 4          0.3         0.8          0.5         0.1
#&gt; 5          0.7         1.3          0.4         0.1
#&gt; 6          1.1         1.6          0.7         0.3</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Dividing by the sum (proportions)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   0.02037555  0.02042007   0.01915185  0.01626016
#&gt; 2   0.01957651  0.01750292   0.01915185  0.01626016
#&gt; 3   0.01877747  0.01866978   0.01778386  0.01626016
#&gt; 4   0.01837795  0.01808635   0.02051984  0.01626016
#&gt; 5   0.01997603  0.02100350   0.01915185  0.01626016
#&gt; 6   0.02157411  0.02275379   0.02325581  0.03252033</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Groupwise de-median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.1         0.1         -0.1         0.0
#&gt; 2         -0.1        -0.4         -0.1         0.0
#&gt; 3         -0.3        -0.2         -0.2         0.0
#&gt; 4         -0.4        -0.3          0.0         0.0
#&gt; 5          0.0         0.2         -0.1         0.0
#&gt; 6          0.4         0.5          0.2         0.2</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ffirst, flast.html'>ffirst</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"%%"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Taking modulus of first group-value, etc. ...</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.0         0.0          0.0           0
#&gt; 2          4.9         3.0          0.0           0
#&gt; 3          4.7         3.2          1.3           0
#&gt; 4          4.6         3.1          0.1           0
#&gt; 5          5.0         0.1          0.0           0
#&gt; 6          0.3         0.4          0.3           0</div><div class='input'>
<span class='co'># Grouped and weighted transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"/"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span>         <span class='co'># weighted scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     13.43241    9.195503     7.099440     2.15052
#&gt; 2     12.90565    7.881860     7.099440     2.15052
#&gt; 3     12.37889    8.407317     6.592337     2.15052</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"-"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span>     <span class='co'># subtracting the weighted group-median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.1         0.1          0.0           0
#&gt; 2         -0.1        -0.4          0.0           0
#&gt; 3         -0.3        -0.2         -0.1           0</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmode.html'>fmode</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"replace"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span> <span class='co'># replace with weighted statistical mode</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1            5         3.4          1.4         0.2
#&gt; 2            5         3.4          1.4         0.2
#&gt; 3            5         3.4          1.4         0.2</div><div class='input'>
<span class='co'>## Some more advanced transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fbetween</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                             <span class='co'># Averaging (faster t.: fmean(d, TRA = "replace"))</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.843333    3.057333        3.758    1.199333
#&gt; 2     5.843333    3.057333        3.758    1.199333
#&gt; 3     5.843333    3.057333        3.758    1.199333
#&gt; 4     5.843333    3.057333        3.758    1.199333
#&gt; 5     5.843333    3.057333        3.758    1.199333
#&gt; 6     5.843333    3.057333        3.758    1.199333</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                              <span class='co'># Centering (faster than: fmean(d, TRA = "-"))</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   -0.7433333  0.44266667       -2.358  -0.9993333
#&gt; 2   -0.9433333 -0.05733333       -2.358  -0.9993333
#&gt; 3   -1.1433333  0.14266667       -2.458  -0.9993333
#&gt; 4   -1.2433333  0.04266667       -2.258  -0.9993333
#&gt; 5   -0.8433333  0.54266667       -2.358  -0.9993333
#&gt; 6   -0.4433333  0.84266667       -2.058  -0.7993333</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span><span class='op'>)</span>                        <span class='co'># Grouped and weighted (same as fmean(d, f, w, "-"))</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   0.14681396   0.1058355   -0.0110271 -0.03848783
#&gt; 2  -0.05318604  -0.3941645   -0.0110271 -0.03848783
#&gt; 3  -0.25318604  -0.1941645   -0.1110271 -0.03848783
#&gt; 4  -0.35318604  -0.2941645    0.0889729 -0.03848783
#&gt; 5   0.04681396   0.2058355   -0.0110271 -0.03848783
#&gt; 6   0.44681396   0.5058355    0.2889729  0.16151217</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>              <span class='co'># Setting a custom mean</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.146814    5.105835     4.988973    4.961512
#&gt; 2     4.946814    4.605835     4.988973    4.961512
#&gt; 3     4.746814    4.805835     4.888973    4.961512
#&gt; 4     4.646814    4.705835     5.088973    4.961512
#&gt; 5     5.046814    5.205835     4.988973    4.961512
#&gt; 6     5.446814    5.505835     5.288973    5.161512</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, theta <span class='op'>=</span> <span class='fl'>0.76</span><span class='op'>)</span><span class='op'>)</span>          <span class='co'># Quasi-centering i.e. d - theta*fbetween(d, f, w)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    1.3355786    0.920435    0.3276194  0.01874925
#&gt; 2    1.1355786    0.420435    0.3276194  0.01874925
#&gt; 3    0.9355786    0.620435    0.2276194  0.01874925
#&gt; 4    0.8355786    0.520435    0.4276194  0.01874925
#&gt; 5    1.2355786    1.020435    0.3276194  0.01874925
#&gt; 6    1.6355786    1.320435    0.6276194  0.21874925</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Preserving the overall mean of the data</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.923419    3.165023     3.637519    1.135897
#&gt; 2     5.723419    2.665023     3.637519    1.135897
#&gt; 3     5.523419    2.865023     3.537519    1.135897
#&gt; 4     5.423419    2.765023     3.737519    1.135897
#&gt; 5     5.823419    3.265023     3.637519    1.135897
#&gt; 6     6.223419    3.565023     3.937519    1.335897</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                               <span class='co'># Scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   -0.8976739  1.01560199    -1.335752   -1.311052
#&gt; 2   -1.1392005 -0.13153881    -1.335752   -1.311052
#&gt; 3   -1.3807271  0.32731751    -1.392399   -1.311052
#&gt; 4   -1.5014904  0.09788935    -1.279104   -1.311052
#&gt; 5   -1.0184372  1.24503015    -1.335752   -1.311052
#&gt; 6   -0.5353840  1.93331463    -1.165809   -1.048667</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, mean <span class='op'>=</span> <span class='fl'>5</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>             <span class='co'># Custom scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    2.3069784    8.046806    0.9927451    1.066844
#&gt; 2    1.5823985    4.605384    0.9927451    1.066844
#&gt; 3    0.8578187    5.981953    0.8228021    1.066844
#&gt; 4    0.4955288    5.293668    1.1626881    1.066844
#&gt; 5    1.9446885    8.735090    0.9927451    1.066844
#&gt; 6    3.3938481   10.799944    1.5025740    1.854000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, mean <span class='op'>=</span> <span class='cn'>FALSE</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Mean preserving scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     3.150312    6.104139  -0.24925490   -2.733823
#&gt; 2     2.425732    2.662717  -0.24925490   -2.733823
#&gt; 3     1.701152    4.039286  -0.41919786   -2.733823
#&gt; 4     1.338862    3.351001  -0.07931195   -2.733823
#&gt; 5     2.788022    6.792424  -0.24925490   -2.733823
#&gt; 6     4.237181    8.857277   0.26057397   -1.946667</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span><span class='op'>)</span>                         <span class='co'># Grouped and weighted scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    0.3866795   0.2780602  -0.05591874  -0.4138441
#&gt; 2   -0.1400817  -1.0355831  -0.05591874  -0.4138441
#&gt; 3   -0.6668429  -0.5101258  -0.56302158  -0.4138441
#&gt; 4   -0.9302235  -0.7728545   0.45118410  -0.4138441
#&gt; 5    0.1232989   0.5407889  -0.05591874  -0.4138441
#&gt; 6    1.1768213   1.3289749   1.46538978   1.7366754</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='fl'>5</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>       <span class='co'># Custom grouped and weighted scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     6.160038    5.834181     4.832244    3.758468
#&gt; 2     4.579755    1.893251     4.832244    3.758468
#&gt; 3     2.999471    3.469623     3.310935    3.758468
#&gt; 4     2.209329    2.681437     6.353552    3.758468
#&gt; 5     5.369897    6.622367     4.832244    3.758468
#&gt; 6     8.530464    8.986925     9.396169   10.210026</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='cn'>FALSE</span>,            <span class='co'># Preserving group means</span>
            sd <span class='op'>=</span> <span class='st'>"within.sd"</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># and setting group-sd to fsd(fwithin(d, f, w), w = w)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.150131    3.490028     1.387948   0.1476540
#&gt; 2     4.881839    3.037139     1.387948   0.1476540
#&gt; 3     4.613547    3.218294     1.178651   0.1476540
#&gt; 4     4.479402    3.127717     1.597244   0.1476540
#&gt; 5     5.015985    3.580606     1.387948   0.1476540
#&gt; 6     5.552568    3.852339     2.015838   0.6196673</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span>,   <span class='co'># Full harmonization of group means and variances,</span>
            sd <span class='op'>=</span> <span class='st'>"within.sd"</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># while preserving the level and scale of the data.</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.973549    3.155051     3.625467    1.083551
#&gt; 2     5.705258    2.702161     3.625467    1.083551
#&gt; 3     5.436966    2.883317     3.416170    1.083551
#&gt; 4     5.302820    2.792739     3.834764    1.083551
#&gt; 5     5.839404    3.245628     3.625467    1.083551
#&gt; 6     6.375987    3.517362     4.253357    1.555564</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Use get_vars for fast selecting, gv is shortcut</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1          5.1         3.5
#&gt; 2          4.9         3.0
#&gt; 3          4.7         3.2
#&gt; 4          4.6         3.1
#&gt; 5          5.0         3.6
#&gt; 6          5.4         3.9</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>fHDbetween</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Linear prediction with factors and covariates</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1     4.950107    3.389732
#&gt; 2     4.950107    3.389732
#&gt; 3     4.859513    3.374264
#&gt; 4     5.040702    3.405199
#&gt; 5     4.950107    3.389732
#&gt; 6     5.220692    3.560823</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>fHDwithin</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Linear partialling out factors and covariates</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1   0.14989286   0.1102684
#&gt; 2  -0.05010714  -0.3897316
#&gt; 3  -0.15951256  -0.1742640
#&gt; 4  -0.44070173  -0.3051992
#&gt; 5   0.04989286   0.2102684
#&gt; 6   0.17930818   0.3391766</div><div class='input'><span class='fu'><a href='fsubset.html'>ss</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>                            <span class='co'># Similarly fsubset/ss for fast subsetting rows</span>
</div><div class='output co'>#&gt;    Sepal.Length Sepal.Width
#&gt; 1           5.1         3.5
#&gt; 2           4.9         3.0
#&gt; 3           4.7         3.2
#&gt; 4           4.6         3.1
#&gt; 5           5.0         3.6
#&gt; 6           5.4         3.9
#&gt; 7           4.6         3.4
#&gt; 8           5.0         3.4
#&gt; 9           4.4         2.9
#&gt; 10          4.9         3.1</div><div class='input'>
<span class='co'># Simple Time-Computations..</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='va'>AirPassengers</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># One lead and three lags</span>
</div><div class='output co'>#&gt;       F1  --  L1  L2  L3
#&gt; [1,] 118 112  NA  NA  NA
#&gt; [2,] 132 118 112  NA  NA
#&gt; [3,] 129 132 118 112  NA
#&gt; [4,] 121 129 132 118 112
#&gt; [5,] 135 121 129 132 118
#&gt; [6,] 148 135 121 129 132</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>,                     <span class='co'># Suitably lagged first and second differences</span>
      <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/stats/time.html'>frequency</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span><span class='op'>)</span><span class='op'>)</span>, diff <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      D1.DAX D2.DAX L260D1.DAX L260D2.DAX D1.SMI D2.SMI L260D1.SMI L260D2.SMI
#&gt; [1,]     NA     NA         NA         NA     NA     NA         NA         NA
#&gt; [2,] -15.12     NA         NA         NA   10.4     NA         NA         NA
#&gt; [3,]  -7.12   8.00         NA         NA   -9.9  -20.3         NA         NA
#&gt; [4,]  14.53  21.65         NA         NA    5.5   15.4         NA         NA
#&gt; [5,]  -2.88 -17.41         NA         NA    2.5   -3.0         NA         NA
#&gt; [6,]  -7.55  -4.67         NA         NA  -15.0  -17.5         NA         NA
#&gt;      D1.CAC D2.CAC L260D1.CAC L260D2.CAC D1.FTSE D2.FTSE L260D1.FTSE
#&gt; [1,]     NA     NA         NA         NA      NA      NA          NA
#&gt; [2,]  -22.3     NA         NA         NA    16.6      NA          NA
#&gt; [3,]  -32.5  -10.2         NA         NA   -12.0   -28.6          NA
#&gt; [4,]   -9.9   22.6         NA         NA    22.2    34.2          NA
#&gt; [5,]   15.0   24.9         NA         NA    14.3    -7.9          NA
#&gt; [6,]   -8.8  -23.8         NA         NA   -17.9   -32.2          NA
#&gt;      L260D2.FTSE
#&gt; [1,]          NA
#&gt; [2,]          NA
#&gt; [3,]          NA
#&gt; [4,]          NA
#&gt; [5,]          NA
#&gt; [6,]          NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, rho <span class='op'>=</span> <span class='fl'>0.87</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Quasi-differences (x_t - rho*x_t-1)</span>
</div><div class='output co'>#&gt;           DAX     SMI     CAC    FTSE
#&gt; [1,]       NA      NA      NA      NA
#&gt; [2,] 196.6175 228.553 208.164 334.268
#&gt; [3,] 202.6519 209.605 195.065 307.826
#&gt; [4,] 223.3763 223.718 213.440 340.466
#&gt; [5,] 207.8552 221.433 237.053 335.452
#&gt; [6,] 202.8108 204.258 215.203 305.111</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, log <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Log-differences</span>
</div><div class='output co'>#&gt;               DAX          SMI          CAC         FTSE
#&gt; [1,]           NA           NA           NA           NA
#&gt; [2,] -0.009326550  0.006178360 -0.012658756  0.006770286
#&gt; [3,] -0.004422175 -0.005880448 -0.018740638 -0.004889587
#&gt; [4,]  0.009003794  0.003271184 -0.005779182  0.009027020
#&gt; [5,] -0.001778217  0.001483372  0.008743353  0.005771847
#&gt; [6,] -0.004676712 -0.008933417 -0.005120160 -0.007230164</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span><span class='op'>)</span><span class='op'>)</span>                  <span class='co'># Exact growth rates (percentage change)</span>
</div><div class='output co'>#&gt;             DAX        SMI        CAC       FTSE
#&gt; [1,]         NA         NA         NA         NA
#&gt; [2,] -0.9283193  0.6197485 -1.2578971  0.6793256
#&gt; [3,] -0.4412412 -0.5863192 -1.8566124 -0.4877652
#&gt; [4,]  0.9044450  0.3276540 -0.5762515  0.9067887
#&gt; [5,] -0.1776637  0.1484472  0.8781687  0.5788536
#&gt; [6,] -0.4665793 -0.8893632 -0.5107074 -0.7204089</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, logdiff <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Log-difference growth rates (percentage change)</span>
</div><div class='output co'>#&gt;             DAX        SMI        CAC       FTSE
#&gt; [1,]         NA         NA         NA         NA
#&gt; [2,] -0.9326550  0.6178360 -1.2658756  0.6770286
#&gt; [3,] -0.4422175 -0.5880448 -1.8740638 -0.4889587
#&gt; [4,]  0.9003794  0.3271184 -0.5779182  0.9027020
#&gt; [5,] -0.1778217  0.1483372  0.8743353  0.5771847
#&gt; [6,] -0.4676712 -0.8933417 -0.5120160 -0.7230164</div><div class='input'><span class='co'># Note that it is not necessary to use factors for grouping.</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span> <span class='co'># Can also use vector (internally converted using qF())</span>
</div><div class='output co'>#&gt;        mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4 26.66364 105.1364  82.63636 4.070909 2.285727 19.13727 4.090909 1.545455
#&gt; 6 19.74286 183.3143 122.28571 3.585714 3.117143 17.97714 3.857143 3.428571
#&gt; 8 15.10000 353.1000 209.21429 3.229286 3.999214 16.77214 3.285714 3.500000</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>,
      <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>              <span class='co'># or a list of vector (internally grouped using GRP())</span>
</div><div class='output co'>#&gt;            mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4.0.1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000 2.000000
#&gt; 4.1.0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667 1.666667
#&gt; 4.1.1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857 1.428571
#&gt; 6.0.1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333 4.666667
#&gt; 6.1.0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000 2.500000
#&gt; 8.0.0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000 3.083333
#&gt; 8.0.1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000 6.000000</div><div class='input'><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'><a href='GRP, fgroup_by.html'>GRP</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>~</span> <span class='va'>cyl</span> <span class='op'>+</span> <span class='va'>vs</span> <span class='op'>+</span> <span class='va'>am</span><span class='op'>)</span>        <span class='co'># It is also possible to create grouping objects</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                                 <span class='co'># These are instructive to learn about the grouping,</span>
</div><div class='output co'>#&gt; collapse grouping object of length 32 with 7 ordered groups
#&gt; 
#&gt; Call: GRP.default(X = mtcars, by = ~cyl + vs + am), X is unordered
#&gt; 
#&gt; Distribution of group sizes: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   1.000   2.500   3.000   4.571   5.500  12.000 
#&gt; 
#&gt; Groups with sizes: 
#&gt; 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 
#&gt;     1     3     7     3     4    12     2 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                                  <span class='co'># and are directly handed down to C++ code</span>
</div><div class='img'><img src='collapse-package-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>g</span><span class='op'>)</span>          <span class='co'># This can speed up multiple computations over same groups</span>
</div><div class='output co'>#&gt;            mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4.0.1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000 2.000000
#&gt; 4.1.0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667 1.666667
#&gt; 4.1.1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857 1.428571
#&gt; 6.0.1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333 4.666667
#&gt; 6.1.0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000 2.500000
#&gt; 8.0.0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000 3.083333
#&gt; 8.0.1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000 6.000000</div><div class='input'><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>g</span><span class='op'>)</span>
</div><div class='output co'>#&gt;             mpg      disp       hp      drat        wt       qsec      gear
#&gt; 4.0.1        NA        NA       NA        NA        NA         NA        NA
#&gt; 4.1.0 1.4525839 13.969371 19.65536 0.1300000 0.4075230 1.67143651 0.5773503
#&gt; 4.1.1 4.7577005 18.802128 24.14441 0.3783926 0.4400840 0.94546285 0.3779645
#&gt; 6.0.1 0.7505553  8.660254 37.52777 0.1616581 0.1281601 0.76872188 0.5773503
#&gt; 6.1.0 1.6317169 44.742634  9.17878 0.5919459 0.1162164 0.81590441 0.5773503
#&gt; 8.0.0 2.7743959 71.823494 33.35984 0.2302749 0.7683069 0.80164745 0.0000000
#&gt; 8.0.1 0.5656854 35.355339 50.20458 0.4808326 0.2828427 0.07071068 0.0000000
#&gt;            carb
#&gt; 4.0.1        NA
#&gt; 4.1.0 0.5773503
#&gt; 4.1.1 0.5345225
#&gt; 6.0.1 1.1547005
#&gt; 6.1.0 1.7320508
#&gt; 8.0.0 0.9003366
#&gt; 8.0.1 2.8284271</div><div class='input'>
<span class='co'># Factors can efficiently be created using qF()</span>
<span class='va'>f1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span>                     <span class='co'># Unlike GRP objects, factors are checked for NA's</span>
<span class='va'>f2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span>, na.exclude <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># This can however be avoided through this option</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>f2</span><span class='op'>)</span>                                <span class='co'># Note the added class</span>
</div><div class='output co'>#&gt; [1] "factor"      "na.included"</div><div class='input'> 
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/joshuaulrich/microbenchmark/'>microbenchmark</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html'>microbenchmark</a></span><span class='op'>(</span><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f1</span><span class='op'>)</span>, <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># A minor difference, larger on larger data</span>
</div><div class='output co'>#&gt; Unit: microseconds
#&gt;               expr    min     lq     mean median      uq    max neval cld
#&gt;  fmean(mtcars, f1) 15.618 16.065 18.19365 16.511 17.1805 70.507   100   a
#&gt;  fmean(mtcars, f2) 14.280 15.172 17.18520 15.173 16.0650 74.969   100   a</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/with.html'>with</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='qF, qG, finteraction.html'>finteraction</a></span><span class='op'>(</span><span class='va'>cyl</span>, <span class='va'>vs</span>, <span class='va'>am</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Efficient interactions of vectors and/or factors</span>
</div><div class='output co'>#&gt;  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0
#&gt; [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0
#&gt; [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1
#&gt; Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</div><div class='input'><span class='fu'><a href='qF, qG, finteraction.html'>finteraction</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>       <span class='co'># .. or lists of vectors/factors</span>
</div><div class='output co'>#&gt;  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0
#&gt; [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0
#&gt; [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1
#&gt; Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</div><div class='input'>
<span class='co'># Simple row- or column-wise computations on matrices or data frames with dapply()</span>
<span class='fu'><a href='dapply.html'>dapply</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>quantile</span><span class='op'>)</span>                 <span class='co'># column quantiles</span>
</div><div class='output co'>#&gt;         mpg cyl    disp    hp  drat      wt    qsec vs am gear carb
#&gt; 0%   10.400   4  71.100  52.0 2.760 1.51300 14.5000  0  0    3    1
#&gt; 25%  15.425   4 120.825  96.5 3.080 2.58125 16.8925  0  0    3    2
#&gt; 50%  19.200   6 196.300 123.0 3.695 3.32500 17.7100  0  0    4    2
#&gt; 75%  22.800   8 326.000 180.0 3.920 3.61000 18.9000  1  1    4    4
#&gt; 100% 33.900   8 472.000 335.0 4.930 5.42400 22.9000  1  1    5    8</div><div class='input'><span class='fu'><a href='dapply.html'>dapply</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>quantile</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>     <span class='co'># Row-quantiles</span>
</div><div class='output co'>#&gt;                     0%    25%   50%    75%  100%
#&gt; Mazda RX4            0 3.2600 4.000 18.730 160.0
#&gt; Mazda RX4 Wag        0 3.3875 4.000 19.010 160.0
#&gt; Datsun 710           1 1.6600 4.000 20.705 108.0
#&gt; Hornet 4 Drive       0 2.0000 3.215 20.420 258.0
#&gt; Hornet Sportabout    0 2.5000 3.440 17.860 360.0
#&gt; Valiant              0 1.8800 3.460 19.160 225.0
#&gt; Duster 360           0 3.1050 4.000 15.070 360.0
#&gt; Merc 240D            0 2.5950 4.000 22.200 146.7
#&gt; Merc 230             0 2.5750 4.000 22.850 140.8
#&gt; Merc 280             0 3.6800 4.000 18.750 167.6
#&gt; Merc 280C            0 3.6800 4.000 18.350 167.6
#&gt; Merc 450SE           0 3.0000 4.070 16.900 275.8
#&gt; Merc 450SL           0 3.0000 3.730 17.450 275.8
#&gt; Merc 450SLC          0 3.0000 3.780 16.600 275.8
#&gt; Cadillac Fleetwood   0 2.9650 5.250 14.190 472.0
#&gt; Lincoln Continental  0 3.0000 5.424 14.110 460.0
#&gt; Chrysler Imperial    0 3.1150 5.345 16.060 440.0
#&gt; Fiat 128             1 1.6000 4.000 25.935  78.7
#&gt; Honda Civic          1 1.8075 4.000 24.460  75.7
#&gt; Toyota Corolla       1 1.4175 4.000 26.900  71.1
#&gt; Toyota Corona        0 1.7325 3.700 20.755 120.1
#&gt; Dodge Challenger     0 2.3800 3.520 16.185 318.0
#&gt; AMC Javelin          0 2.5000 3.435 16.250 304.0
#&gt; Camaro Z28           0 3.3650 4.000 14.355 350.0
#&gt; Pontiac Firebird     0 2.5000 3.845 18.125 400.0
#&gt; Fiat X1-9            1 1.4675 4.000 23.100  79.0
#&gt; Porsche 914-2        0 2.0700 4.430 21.350 120.3
#&gt; Lotus Europa         1 1.7565 4.000 23.650 113.0
#&gt; Ford Pantera L       0 3.5850 5.000 15.150 351.0
#&gt; Ferrari Dino         0 3.1950 6.000 17.600 175.0
#&gt; Maserati Bora        0 3.5550 8.000 14.800 335.0
#&gt; Volvo 142E           1 2.3900 4.000 20.000 121.0</div><div class='input'>  <span class='co'># dapply preserves the data structure of any matrices / data frames passed</span>
  <span class='co'># Some fast matrix row/column functions are also provided by the matrixStats package</span>
<span class='co'># Similarly, BY performs grouped comptations</span>
<span class='fu'><a href='BY.html'>BY</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span>, <span class='va'>quantile</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          mpg cyl   disp     hp  drat      wt    qsec vs  am gear carb
#&gt; 4.0%   21.40   4  71.10  52.00 3.690 1.51300 16.7000  0 0.0  3.0 1.00
#&gt; 4.25%  22.80   4  78.85  65.50 3.810 1.88500 18.5600  1 0.5  4.0 1.00
#&gt; 4.50%  26.00   4 108.00  91.00 4.080 2.20000 18.9000  1 1.0  4.0 2.00
#&gt; 4.75%  30.40   4 120.65  96.00 4.165 2.62250 19.9500  1 1.0  4.0 2.00
#&gt; 4.100% 33.90   4 146.70 113.00 4.930 3.19000 22.9000  1 1.0  5.0 2.00
#&gt; 6.0%   17.80   6 145.00 105.00 2.760 2.62000 15.5000  0 0.0  3.0 1.00
#&gt; 6.25%  18.65   6 160.00 110.00 3.350 2.82250 16.7400  0 0.0  3.5 2.50
#&gt; 6.50%  19.70   6 167.60 110.00 3.900 3.21500 18.3000  1 0.0  4.0 4.00
#&gt; 6.75%  21.00   6 196.30 123.00 3.910 3.44000 19.1700  1 1.0  4.0 4.00
#&gt; 6.100% 21.40   6 258.00 175.00 3.920 3.46000 20.2200  1 1.0  5.0 6.00
#&gt; 8.0%   10.40   8 275.80 150.00 2.760 3.17000 14.5000  0 0.0  3.0 2.00
#&gt; 8.25%  14.40   8 301.75 176.25 3.070 3.53250 16.0975  0 0.0  3.0 2.25
#&gt; 8.50%  15.20   8 350.50 192.50 3.115 3.75500 17.1750  0 0.0  3.0 3.50
#&gt; 8.75%  16.25   8 390.00 241.25 3.225 4.01375 17.5550  0 0.0  3.0 4.00
#&gt; 8.100% 19.20   8 472.00 335.00 4.220 5.42400 18.0000  0 1.0  5.0 8.00</div><div class='input'><span class='fu'><a href='BY.html'>BY</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span>, <span class='va'>quantile</span>, expand.wide <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   mpg.0% mpg.25% mpg.50% mpg.75% mpg.100% cyl.0% cyl.25% cyl.50% cyl.75%
#&gt; 4   21.4   22.80    26.0   30.40     33.9      4       4       4       4
#&gt; 6   17.8   18.65    19.7   21.00     21.4      6       6       6       6
#&gt; 8   10.4   14.40    15.2   16.25     19.2      8       8       8       8
#&gt;   cyl.100% disp.0% disp.25% disp.50% disp.75% disp.100% hp.0% hp.25% hp.50%
#&gt; 4        4    71.1    78.85    108.0   120.65     146.7    52  65.50   91.0
#&gt; 6        6   145.0   160.00    167.6   196.30     258.0   105 110.00  110.0
#&gt; 8        8   275.8   301.75    350.5   390.00     472.0   150 176.25  192.5
#&gt;   hp.75% hp.100% drat.0% drat.25% drat.50% drat.75% drat.100% wt.0% wt.25%
#&gt; 4  96.00     113    3.69     3.81    4.080    4.165      4.93 1.513 1.8850
#&gt; 6 123.00     175    2.76     3.35    3.900    3.910      3.92 2.620 2.8225
#&gt; 8 241.25     335    2.76     3.07    3.115    3.225      4.22 3.170 3.5325
#&gt;   wt.50%  wt.75% wt.100% qsec.0% qsec.25% qsec.50% qsec.75% qsec.100% vs.0%
#&gt; 4  2.200 2.62250   3.190    16.7  18.5600   18.900   19.950     22.90     0
#&gt; 6  3.215 3.44000   3.460    15.5  16.7400   18.300   19.170     20.22     0
#&gt; 8  3.755 4.01375   5.424    14.5  16.0975   17.175   17.555     18.00     0
#&gt;   vs.25% vs.50% vs.75% vs.100% am.0% am.25% am.50% am.75% am.100% gear.0%
#&gt; 4      1      1      1       1     0    0.5      1      1       1       3
#&gt; 6      0      1      1       1     0    0.0      0      1       1       3
#&gt; 8      0      0      0       0     0    0.0      0      0       1       3
#&gt;   gear.25% gear.50% gear.75% gear.100% carb.0% carb.25% carb.50% carb.75%
#&gt; 4      4.0        4        4         5       1     1.00      2.0        2
#&gt; 6      3.5        4        4         5       1     2.50      4.0        4
#&gt; 8      3.0        3        3         5       2     2.25      3.5        4
#&gt;   carb.100%
#&gt; 4         2
#&gt; 6         6
#&gt; 8         8</div><div class='input'><span class='co'># For efficient (grouped) replacing and sweeping out computed statistics, use TRA()</span>
<span class='va'>sds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Simple scaling (if sd's not needed, use fsd(mtcars, TRA = "/"))</span>
</div><div class='output co'>#&gt;                        mpg     cyl      disp       hp     drat       wt
#&gt; Mazda RX4         3.484351 3.35961 1.2909608 1.604367 7.294100 2.677684
#&gt; Mazda RX4 Wag     3.484351 3.35961 1.2909608 1.604367 7.294100 2.938298
#&gt; Datsun 710        3.783009 2.23974 0.8713986 1.356419 7.200586 2.371079
#&gt; Hornet 4 Drive    3.550719 3.35961 2.0816744 1.604367 5.760468 3.285784
#&gt; Hornet Sportabout 3.102731 4.47948 2.9046619 2.552402 5.891388 3.515738
#&gt; Valiant           3.003178 3.35961 1.8154137 1.531441 5.161978 3.536178
#&gt;                        qsec       vs       am     gear      carb
#&gt; Mazda RX4          9.211261 0.000000 2.004044 5.421494 2.4764735
#&gt; Mazda RX4 Wag      9.524645 0.000000 2.004044 5.421494 2.4764735
#&gt; Datsun 710        10.414433 1.984063 2.004044 5.421494 0.6191184
#&gt; Hornet 4 Drive    10.878913 1.984063 0.000000 4.066120 0.6191184
#&gt; Hornet Sportabout  9.524645 0.000000 0.000000 4.066120 1.2382368
#&gt; Valiant           11.315413 1.984063 0.000000 4.066120 0.6191184</div><div class='input'> 
<span class='fu'><a href='https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html'>microbenchmark</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/sweep.html'>sweep</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fl'>2</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># A remarkable performance gain..</span>
</div><div class='output co'>#&gt; Unit: microseconds
#&gt;                        expr      min       lq       mean   median        uq
#&gt;       TRA(mtcars, sds, "/")   10.263   13.387   21.99565   22.759   28.3365
#&gt;  sweep(mtcars, 2, sds, "/") 1084.825 1104.014 1148.31685 1113.608 1153.9930
#&gt;       max neval cld
#&gt;    56.673   100  a 
#&gt;  1398.536   100   b</div><div class='input'>
<span class='va'>sds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span>, <span class='va'>f2</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Groupd scaling (if sd's not needed: fsd(mtcars, f2, TRA = "/"))</span>
</div><div class='output co'>#&gt;                         mpg cyl     disp       hp      drat       wt      qsec
#&gt; Mazda RX4         14.447218 Inf 3.849628 4.534121  8.192327 7.352414  9.643407
#&gt; Mazda RX4 Wag     14.447218 Inf 3.849628 4.534121  8.192327 8.068012  9.971493
#&gt; Datsun 710         5.055626 Inf 4.019114 4.442421 10.534350 4.073293 11.061282
#&gt; Hornet 4 Drive    14.722403 Inf 6.207525 4.534121  6.469838 9.022142 11.389297
#&gt; Hornet Sportabout  7.304550 Inf 5.311981 3.432928  8.459515 4.529864 14.230606
#&gt; Valiant           12.452126 Inf 5.413539 4.328025  5.797647 9.709677 11.846275
#&gt;                         vs       am     gear      carb
#&gt; Mazda RX4         0.000000 1.870829 5.796551 2.2067091
#&gt; Mazda RX4 Wag     0.000000 1.870829 5.796551 2.2067091
#&gt; Datsun 710        3.316625 2.140872 7.416198 1.9148542
#&gt; Hornet 4 Drive    1.870829 0.000000 4.347413 0.5516773
#&gt; Hornet Sportabout      NaN 0.000000 4.130678 1.2848321
#&gt; Valiant           1.870829 0.000000 4.347413 0.5516773</div><div class='input'>
<span class='co'># All functions above perserve the structure of matrices / data frames</span>
<span class='co'># If conversions are required, use these efficient functions:</span>
<span class='va'>mtcarsM</span> <span class='op'>&lt;-</span> <span class='fu'><a href='quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>                      <span class='co'># Matrix from data.frame</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qDF</a></span><span class='op'>(</span><span class='va'>mtcarsM</span><span class='op'>)</span><span class='op'>)</span>                         <span class='co'># data.frame from matrix columns</span>
</div><div class='output co'>#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>mrtl</a></span><span class='op'>(</span><span class='va'>mtcarsM</span>, <span class='cn'>TRUE</span>, <span class='st'>"data.frame"</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># data.frame from matrix rows, etc..</span>
</div><div class='output co'>#&gt;      Mazda RX4 Mazda RX4 Wag Datsun 710 Hornet 4 Drive Hornet Sportabout
#&gt; mpg      21.00        21.000      22.80         21.400             18.70
#&gt; cyl       6.00         6.000       4.00          6.000              8.00
#&gt; disp    160.00       160.000     108.00        258.000            360.00
#&gt; hp      110.00       110.000      93.00        110.000            175.00
#&gt; drat      3.90         3.900       3.85          3.080              3.15
#&gt; wt        2.62         2.875       2.32          3.215              3.44
#&gt;      Valiant Duster 360 Merc 240D Merc 230 Merc 280 Merc 280C Merc 450SE
#&gt; mpg    18.10      14.30     24.40    22.80    19.20     17.80      16.40
#&gt; cyl     6.00       8.00      4.00     4.00     6.00      6.00       8.00
#&gt; disp  225.00     360.00    146.70   140.80   167.60    167.60     275.80
#&gt; hp    105.00     245.00     62.00    95.00   123.00    123.00     180.00
#&gt; drat    2.76       3.21      3.69     3.92     3.92      3.92       3.07
#&gt; wt      3.46       3.57      3.19     3.15     3.44      3.44       4.07
#&gt;      Merc 450SL Merc 450SLC Cadillac Fleetwood Lincoln Continental
#&gt; mpg       17.30       15.20              10.40              10.400
#&gt; cyl        8.00        8.00               8.00               8.000
#&gt; disp     275.80      275.80             472.00             460.000
#&gt; hp       180.00      180.00             205.00             215.000
#&gt; drat       3.07        3.07               2.93               3.000
#&gt; wt         3.73        3.78               5.25               5.424
#&gt;      Chrysler Imperial Fiat 128 Honda Civic Toyota Corolla Toyota Corona
#&gt; mpg             14.700    32.40      30.400         33.900        21.500
#&gt; cyl              8.000     4.00       4.000          4.000         4.000
#&gt; disp           440.000    78.70      75.700         71.100       120.100
#&gt; hp             230.000    66.00      52.000         65.000        97.000
#&gt; drat             3.230     4.08       4.930          4.220         3.700
#&gt; wt               5.345     2.20       1.615          1.835         2.465
#&gt;      Dodge Challenger AMC Javelin Camaro Z28 Pontiac Firebird Fiat X1-9
#&gt; mpg             15.50      15.200      13.30           19.200    27.300
#&gt; cyl              8.00       8.000       8.00            8.000     4.000
#&gt; disp           318.00     304.000     350.00          400.000    79.000
#&gt; hp             150.00     150.000     245.00          175.000    66.000
#&gt; drat             2.76       3.150       3.73            3.080     4.080
#&gt; wt               3.52       3.435       3.84            3.845     1.935
#&gt;      Porsche 914-2 Lotus Europa Ford Pantera L Ferrari Dino Maserati Bora
#&gt; mpg          26.00       30.400          15.80        19.70         15.00
#&gt; cyl           4.00        4.000           8.00         6.00          8.00
#&gt; disp        120.30       95.100         351.00       145.00        301.00
#&gt; hp           91.00      113.000         264.00       175.00        335.00
#&gt; drat          4.43        3.770           4.22         3.62          3.54
#&gt; wt            2.14        1.513           3.17         2.77          3.57
#&gt;      Volvo 142E
#&gt; mpg       21.40
#&gt; cyl        4.00
#&gt; disp     121.00
#&gt; hp       109.00
#&gt; drat       4.11
#&gt; wt         2.78</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qDT</a></span><span class='op'>(</span><span class='va'>mtcarsM</span>, <span class='st'>"cars"</span><span class='op'>)</span><span class='op'>)</span>                 <span class='co'># Saving row.names when converting matrix to data.table</span>
</div><div class='output co'>#&gt;                 cars  mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; 1:         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; 2:     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; 3:        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; 4:    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; 5: Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; 6:           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='quick-conversion.html'>qDT</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"cars"</span><span class='op'>)</span><span class='op'>)</span>                  <span class='co'># Same use a data.frame</span>
</div><div class='output co'>#&gt;                 cars  mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; 1:         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; 2:     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; 3:        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; 4:    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; 5: Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; 6:           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'>
 
<span class='co'>## Now let's get some real data and see how we can use this power for data manipulation</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://magrittr.tidyverse.org'>magrittr</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='co'># World Bank World Development Data: 216 countries, 59 years, 4 series (columns 9-12)</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;   LIFEEX GINI       ODA
#&gt; 1 32.292   NA 114440000
#&gt; 2 32.742   NA 233350000
#&gt; 3 33.185   NA 114880000
#&gt; 4 33.624   NA 236450000
#&gt; 5 34.060   NA 302480000
#&gt; 6 34.495   NA 370250000</div><div class='input'>
<span class='co'># Starting with some discriptive tools...</span>
<span class='fu'><a href='small-helpers.html'>namlab</a></span><span class='op'>(</span><span class='va'>wlddev</span>, class <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>           <span class='co'># Show variable names, labels and classes</span>
</div><div class='output co'>#&gt;    Variable     Class                                   Label
#&gt; 1   country character                            Country Name
#&gt; 2     iso3c    factor                            Country Code
#&gt; 3      date      Date              Date Recorded (Fictitious)
#&gt; 4      year   integer                                    Year
#&gt; 5    decade   numeric                                  Decade
#&gt; 6    region    factor                                  Region
#&gt; 7    income    factor                            Income Level
#&gt; 8      OECD   logical                 Is OECD Member Country?
#&gt; 9     PCGDP   numeric      GDP per capita (constant 2010 US$)
#&gt; 10   LIFEEX   numeric Life expectancy at birth, total (years)
#&gt; 11     GINI   numeric        GINI index (World Bank estimate)
#&gt; 12      ODA   numeric    Net ODA received (constant 2015 US$)</div><div class='input'><span class='fu'><a href='fNobs.html'>fNobs</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                          <span class='co'># Observation count</span>
</div><div class='output co'>#&gt; country   iso3c    date    year  decade  region  income    OECD   PCGDP  LIFEEX 
#&gt;   12744   12744   12744   12744   12744   12744   12744   12744    8995   11068 
#&gt;    GINI     ODA 
#&gt;    1356    8336 </div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwNobs</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                         <span class='co'># Pairwise observation count</span>
</div><div class='output co'>#&gt;         country iso3c  date  year decade region income  OECD PCGDP LIFEEX GINI
#&gt; country   12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; iso3c     12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; date      12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; year      12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; decade    12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; region    12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; income    12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; OECD      12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; PCGDP      8995  8995  8995  8995   8995   8995   8995  8995  8995   8398 1342
#&gt; LIFEEX    11068 11068 11068 11068  11068  11068  11068 11068  8398  11068 1353
#&gt; GINI       1356  1356  1356  1356   1356   1356   1356  1356  1342   1353 1356
#&gt; ODA        8336  8336  8336  8336   8336   8336   8336  8336  6852   7746  951
#&gt;          ODA
#&gt; country 8336
#&gt; iso3c   8336
#&gt; date    8336
#&gt; year    8336
#&gt; decade  8336
#&gt; region  8336
#&gt; income  8336
#&gt; OECD    8336
#&gt; PCGDP   6852
#&gt; LIFEEX  7746
#&gt; GINI     951
#&gt; ODA     8336</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fNobs.html'>fNobs</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># Grouped observation count</span>
</div><div class='output co'>#&gt;                country iso3c date year decade region income OECD PCGDP LIFEEX
#&gt; Afghanistan         59    59   59   59     59     59     59   59    16     57
#&gt; Albania             59    59   59   59     59     59     59   59    38     57
#&gt; Algeria             59    59   59   59     59     59     59   59    58     57
#&gt; American Samoa      59    59   59   59     59     59     59   59    16      0
#&gt; Andorra             59    59   59   59     59     59     59   59    48      0
#&gt; Angola              59    59   59   59     59     59     59   59    38     57
#&gt;                GINI ODA
#&gt; Afghanistan       0  58
#&gt; Albania           5  30
#&gt; Algeria           3  58
#&gt; American Samoa    0   0
#&gt; Andorra           0   0
#&gt; Angola            2  56</div><div class='input'><span class='fu'><a href='fNdistinct.html'>fNdistinct</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                     <span class='co'># Distinct values</span>
</div><div class='output co'>#&gt; country   iso3c    date    year  decade  region  income    OECD   PCGDP  LIFEEX 
#&gt;     216     216      59      59       7       7       4       2    8995   10048 
#&gt;    GINI     ODA 
#&gt;     363    7564 </div><div class='input'><span class='fu'><a href='descr.html'>descr</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                          <span class='co'># Describe data</span>
</div><div class='output co'>#&gt; Dataset: wlddev, 12 Variables, N = 12744
#&gt; --------------------------------------------------------------------------------
#&gt; country (character): Country Name
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744    216
#&gt; Table: 
#&gt;                      Freq  Perc
#&gt; Afghanistan            59  0.46
#&gt; Albania                59  0.46
#&gt; Algeria                59  0.46
#&gt; American Samoa         59  0.46
#&gt; Andorra                59  0.46
#&gt; Angola                 59  0.46
#&gt; Antigua and Barbuda    59  0.46
#&gt;   ---
#&gt;                        Freq  Perc
#&gt; Vanuatu                  59  0.46
#&gt; Venezuela, RB            59  0.46
#&gt; Vietnam                  59  0.46
#&gt; Virgin Islands (U.S.)    59  0.46
#&gt; West Bank and Gaza       59  0.46
#&gt; Yemen, Rep.              59  0.46
#&gt; Zambia                   59  0.46
#&gt; Zimbabwe                 59  0.46
#&gt; 
#&gt; Summary of Table: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;      59      59      59      59      59      59 
#&gt; --------------------------------------------------------------------------------
#&gt; iso3c (factor): Country Code
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744    216
#&gt; Table: 
#&gt;      Freq  Perc
#&gt; ABW    59  0.46
#&gt; AFG    59  0.46
#&gt; AGO    59  0.46
#&gt; ALB    59  0.46
#&gt; AND    59  0.46
#&gt; ARE    59  0.46
#&gt; ARG    59  0.46
#&gt;   ---
#&gt;      Freq  Perc
#&gt; VNM    59  0.46
#&gt; VUT    59  0.46
#&gt; WSM    59  0.46
#&gt; XKX    59  0.46
#&gt; YEM    59  0.46
#&gt; ZAF    59  0.46
#&gt; ZMB    59  0.46
#&gt; ZWE    59  0.46
#&gt; 
#&gt; Summary of Table: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;      59      59      59      59      59      59 
#&gt; --------------------------------------------------------------------------------
#&gt; date (Date): Date Recorded (Fictitious)
#&gt; Stats: 
#&gt;       N  Ndist    Min    Max
#&gt;   12744     59  -3287  17897
#&gt; --------------------------------------------------------------------------------
#&gt; year (integer): Year
#&gt; Stats: 
#&gt;       N  Ndist  Mean     SD   Min   Max  Skew  Kurt
#&gt;   12744     59  1989  17.03  1960  2018    -0   1.8
#&gt; Quant: 
#&gt;     1%    5%   25%   50%   75%   95%   99%
#&gt;   1960  1962  1974  1989  2004  2016  2018
#&gt; --------------------------------------------------------------------------------
#&gt; decade (numeric): Decade
#&gt; Stats: 
#&gt;       N  Ndist     Mean     SD   Min   Max  Skew  Kurt
#&gt;   12744      7  1988.98  17.63  1960  2020  0.01  1.95
#&gt; Quant: 
#&gt;     1%    5%   25%   50%   75%   95%   99%
#&gt;   1960  1960  1970  1990  2000  2020  2020
#&gt; --------------------------------------------------------------------------------
#&gt; region (factor): Region
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744      7
#&gt; Table: 
#&gt;                             Freq   Perc
#&gt; East Asia &amp; Pacific         2124  16.67
#&gt; Europe &amp; Central Asia       3422  26.85
#&gt; Latin America &amp; Caribbean   2478  19.44
#&gt; Middle East &amp; North Africa  1239   9.72
#&gt; North America                177   1.39
#&gt; South Asia                   472   3.70
#&gt; Sub-Saharan Africa          2832  22.22
#&gt; --------------------------------------------------------------------------------
#&gt; income (factor): Income Level
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744      4
#&gt; Table: 
#&gt;                      Freq   Perc
#&gt; High income          4720  37.04
#&gt; Low income           1947  15.28
#&gt; Lower middle income  2773  21.76
#&gt; Upper middle income  3304  25.93
#&gt; --------------------------------------------------------------------------------
#&gt; OECD (logical): Is OECD Member Country?
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744      2
#&gt; Table: 
#&gt;         Freq   Perc
#&gt; FALSE  10620  83.33
#&gt; TRUE    2124  16.67
#&gt; --------------------------------------------------------------------------------
#&gt; PCGDP (numeric): GDP per capita (constant 2010 US$)
#&gt; Stats: 
#&gt;      N  Ndist      Mean        SD     Min        Max  Skew   Kurt
#&gt;   8995   8995  11563.65  18348.41  131.65  191586.64  3.11  16.96
#&gt; Quant: 
#&gt;       1%      5%      25%      50%       75%       95%       99%
#&gt;   223.54  374.38  1215.59  3619.61  14084.71  46591.94  87780.62
#&gt; --------------------------------------------------------------------------------
#&gt; LIFEEX (numeric): Life expectancy at birth, total (years)
#&gt; Stats: 
#&gt;       N  Ndist   Mean     SD    Min    Max   Skew  Kurt
#&gt;   11068  10048  63.84  11.45  18.91  85.42  -0.67  2.65
#&gt; Quant: 
#&gt;      1%     5%    25%    50%   75%    95%    99%
#&gt;   35.49  42.23  55.84  66.97  72.5  78.82  81.83
#&gt; --------------------------------------------------------------------------------
#&gt; GINI (numeric): GINI index (World Bank estimate)
#&gt; Stats: 
#&gt;      N  Ndist  Mean    SD   Min   Max  Skew  Kurt
#&gt;   1356    363  39.4  9.68  16.2  65.8  0.46  2.29
#&gt; Quant: 
#&gt;      1%    5%   25%   50%   75%   95%    99%
#&gt;   24.66  26.5  31.7  37.4  46.8  57.2  60.84
#&gt; --------------------------------------------------------------------------------
#&gt; ODA (numeric): Net ODA received (constant 2015 US$)
#&gt; Stats: 
#&gt;      N  Ndist        Mean          SD              Min             Max  Skew
#&gt;   8336   7564  428,746468  819,868971  -1.08038000e+09  2.45521800e+10  7.19
#&gt;    Kurt
#&gt;   122.9
#&gt; Quant: 
#&gt;           1%        5%        25%         50%         75%             95%
#&gt;   -11,731500  1,097500  41,020000  157,360000  463,057500  1.82400500e+09
#&gt;              99%
#&gt;   3.48697750e+09
#&gt; --------------------------------------------------------------------------------</div><div class='input'><span class='fu'><a href='varying.html'>varying</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span><span class='op'>)</span>             <span class='co'># Show which variables vary within countries</span>
</div><div class='output co'>#&gt;  iso3c   date   year decade region income   OECD  PCGDP LIFEEX   GINI    ODA 
#&gt;  FALSE   TRUE   TRUE   TRUE  FALSE  FALSE  FALSE   TRUE   TRUE   TRUE   TRUE </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, pid <span class='op'>=</span> <span class='op'>~</span> <span class='va'>country</span>,           <span class='co'># Panel-summarize columns 9 though 12 of this data</span>
    cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, vlabels <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>       <span class='co'># (between and within countries)</span>
</div><div class='output co'>#&gt; , , PCGDP: GDP per capita (constant 2010 US$)
#&gt; 
#&gt;              N/T        Mean          SD          Min         Max
#&gt; Overall     8995  11563.6529  18348.4052     131.6464   191586.64
#&gt; Between      203  12488.8577  19628.3668     255.3999  141165.083
#&gt; Within   44.3103  11563.6529   6334.9523  -30529.0928   75348.067
#&gt; 
#&gt; , , LIFEEX: Life expectancy at birth, total (years)
#&gt; 
#&gt;              N/T     Mean       SD      Min      Max
#&gt; Overall    11068  63.8411  11.4497   18.907  85.4171
#&gt; Between      207  64.5285  10.0235   39.349  85.4171
#&gt; Within   53.4686  63.8411   5.8292  33.4671  83.8595
#&gt; 
#&gt; , , GINI: GINI index (World Bank estimate)
#&gt; 
#&gt;             N/T     Mean      SD      Min      Max
#&gt; Overall    1356  39.3976  9.6764     16.2     65.8
#&gt; Between     161  39.5799  8.3679  23.3667  61.7143
#&gt; Within   8.4224  39.3976  3.0406  23.9576  54.7976
#&gt; 
#&gt; , , ODA: Net ODA received (constant 2015 US$)
#&gt; 
#&gt;              N/T        Mean          SD              Min             Max
#&gt; Overall     8336  428,746468  819,868971  -1.08038000e+09  2.45521800e+10
#&gt; Between      178  418,026522  548,293709       423846.154  3.53258914e+09
#&gt; Within   46.8315  428,746468  607,024040  -2.47969577e+09  2.35093916e+10
#&gt; </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>region</span>, <span class='op'>~</span> <span class='va'>country</span>,       <span class='co'># Do all of that by region and also compute higher moments</span>
    cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, higher <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>        <span class='co'># -&gt; returns a 4D array</span>
</div><div class='output co'>#&gt; , , Overall, PCGDP
#&gt; 
#&gt;                              N/T        Mean          SD         Min
#&gt; East Asia &amp; Pacific         1391  10337.0463  14094.8338    131.9634
#&gt; Europe &amp; Central Asia       2084  25664.8064   26181.671    367.0493
#&gt; Latin America &amp; Caribbean   1896   6976.0649   6705.5377    662.2795
#&gt; Middle East &amp; North Africa   805  13760.2761  18374.2208    570.5574
#&gt; North America                170  43650.5193  18345.0419  17550.5732
#&gt; South Asia                   366   1178.3447   1581.2678    267.0736
#&gt; Sub-Saharan Africa          2283   1750.0069   2553.7889    131.6464
#&gt;                                    Max    Skew     Kurt
#&gt; East Asia &amp; Pacific         72183.3033  1.6378   4.7544
#&gt; Europe &amp; Central Asia        191586.64  2.0987   9.2794
#&gt; Latin America &amp; Caribbean    42491.454  2.1357   7.9172
#&gt; Middle East &amp; North Africa  113682.038  2.4215   9.6667
#&gt; North America               94903.1915  0.9047   3.3501
#&gt; South Asia                   8971.1285  3.0144  11.8985
#&gt; Sub-Saharan Africa          20333.9404   3.209  15.1549
#&gt; 
#&gt; , , Between, PCGDP
#&gt; 
#&gt;                             N/T        Mean          SD         Min         Max
#&gt; East Asia &amp; Pacific          34  10337.0463    12576.62    410.2004  40046.4089
#&gt; Europe &amp; Central Asia        56  25664.8064  24008.1006    788.0229  141165.083
#&gt; Latin America &amp; Caribbean    36   6976.0649   6294.8452    884.5499  36049.6948
#&gt; Middle East &amp; North Africa   20  13760.2761  17291.0461   1084.5999  65963.2711
#&gt; North America                 3  43650.5193  12062.9919  35346.4194  61278.2411
#&gt; South Asia                    8   1178.3447   1470.7041    397.4451   6638.3501
#&gt; Sub-Saharan Africa           46   1750.0069   2199.9901    255.3999    9916.656
#&gt;                               Skew     Kurt
#&gt; East Asia &amp; Pacific         1.1707   2.7873
#&gt; Europe &amp; Central Asia       1.9279   8.4878
#&gt; Latin America &amp; Caribbean   2.1451   7.9744
#&gt; Middle East &amp; North Africa  1.9946   6.2755
#&gt; North America               0.7832   1.6136
#&gt; South Asia                  3.1759  12.0293
#&gt; Sub-Saharan Africa          2.2221   7.2472
#&gt; 
#&gt; , , Within, PCGDP
#&gt; 
#&gt;                                 N/T        Mean          SD          Min
#&gt; East Asia &amp; Pacific         40.9118  11563.6529   6363.4087  -11892.0702
#&gt; Europe &amp; Central Asia       37.2143  11563.6529  10444.6637  -30529.0928
#&gt; Latin America &amp; Caribbean   52.6667  11563.6529   2310.6622    -519.1743
#&gt; Middle East &amp; North Africa    40.25  11563.6529   6215.4419  -18492.1455
#&gt; North America               56.6667  11563.6529  13821.1717  -21876.1952
#&gt; South Asia                    45.75  11563.6529    580.8934    9525.9724
#&gt; Sub-Saharan Africa          49.6304  11563.6529   1296.8738    4528.6387
#&gt;                                    Max     Skew     Kurt
#&gt; East Asia &amp; Pacific         50475.9873   0.9072   9.3702
#&gt; Europe &amp; Central Asia        75348.067   0.3914   7.3036
#&gt; Latin America &amp; Caribbean   21734.0427   0.0638   7.8009
#&gt; Middle East &amp; North Africa       60152   1.7628  22.4172
#&gt; North America               45188.6033  -0.0258   2.8074
#&gt; South Asia                  13896.4313   1.0243   6.3765
#&gt; Sub-Saharan Africa          24375.5944   1.5433  29.8043
#&gt; 
#&gt; , , Overall, LIFEEX
#&gt; 
#&gt;                              N/T     Mean       SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific         1717  65.6493  10.1221   18.907   84.278  -0.8473
#&gt; Europe &amp; Central Asia       2886  71.9323   5.4596   45.369  85.4171  -0.4758
#&gt; Latin America &amp; Caribbean   1995  67.7473   7.2844   42.113  82.1902  -0.9721
#&gt; Middle East &amp; North Africa  1163  65.7501   9.5211   34.361  82.4073    -0.76
#&gt; North America                135  75.9931   3.4825  68.8978  82.3005   -0.144
#&gt; South Asia                   456  56.7471  11.1073   32.292   77.339  -0.2666
#&gt; Sub-Saharan Africa          2716  51.0007   8.5873    27.61  74.3949   0.1514
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         4.2562
#&gt; Europe &amp; Central Asia       3.9257
#&gt; Latin America &amp; Caribbean   3.7783
#&gt; Middle East &amp; North Africa  2.8428
#&gt; North America               1.9842
#&gt; South Asia                  2.1147
#&gt; Sub-Saharan Africa          2.8059
#&gt; 
#&gt; , , Between, LIFEEX
#&gt; 
#&gt;                             N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific          32  65.6493  7.7148  48.8626  77.5681  -0.3937
#&gt; Europe &amp; Central Asia        55  71.9323  4.2526  61.9424  85.4171  -0.5323
#&gt; Latin America &amp; Caribbean    40  67.7473  4.9716  53.4959  82.1902  -0.9638
#&gt; Middle East &amp; North Africa   21  65.7501  5.8655  53.0192   76.401  -0.2274
#&gt; North America                 3  75.9931  1.2682  74.6066  77.9553   0.0859
#&gt; South Asia                    8  56.7471  5.8027  47.8822  68.6733   0.5542
#&gt; Sub-Saharan Africa           48  51.0007  5.9389   39.349   71.403   1.0178
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific          2.488
#&gt; Europe &amp; Central Asia       2.5438
#&gt; Latin America &amp; Caribbean   4.0726
#&gt; Middle East &amp; North Africa  2.8315
#&gt; North America               1.5491
#&gt; South Asia                   3.008
#&gt; Sub-Saharan Africa          4.5846
#&gt; 
#&gt; , , Within, LIFEEX
#&gt; 
#&gt;                                 N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific         53.6562  63.8411  6.5528  33.4671  83.8595  -0.3476
#&gt; Europe &amp; Central Asia       52.4727  63.8411  3.4239  46.6863  77.0723  -0.0902
#&gt; Latin America &amp; Caribbean    49.875  63.8411  5.3241  47.1311  78.2611  -0.3366
#&gt; Middle East &amp; North Africa   55.381  63.8411  7.4998  41.8394  78.4739  -0.5889
#&gt; North America                    45  63.8411  3.2433  54.7836   69.485  -0.3624
#&gt; South Asia                       57  63.8411  9.4711  42.0094  82.0276  -0.0422
#&gt; Sub-Saharan Africa          56.5833  63.8411  6.2025  43.7422  83.2612   0.0559
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         3.9061
#&gt; Europe &amp; Central Asia       3.8904
#&gt; Latin America &amp; Caribbean   2.9553
#&gt; Middle East &amp; North Africa  2.7235
#&gt; North America               2.2514
#&gt; South Asia                  2.1366
#&gt; Sub-Saharan Africa          2.8488
#&gt; 
#&gt; , , Overall, GINI
#&gt; 
#&gt;                             N/T     Mean      SD   Min   Max     Skew    Kurt
#&gt; East Asia &amp; Pacific          92  38.5065  5.3684  27.8  55.4   0.4917    2.85
#&gt; Europe &amp; Central Asia       588   31.902  4.7383  16.2  48.4   0.2524  3.0724
#&gt; Latin America &amp; Caribbean   363  50.5664  5.3238  34.4  63.3  -0.0893  2.4511
#&gt; Middle East &amp; North Africa   76  36.1947  5.1244  27.6  47.4    0.109  1.9657
#&gt; North America                22  36.1636  3.9282    31  41.1   0.1481  1.3322
#&gt; South Asia                   39  34.1641  4.3411  25.9  43.8   0.2892  2.4065
#&gt; Sub-Saharan Africa          176  44.8165  8.3376  28.9  65.8    0.634  2.8286
#&gt; 
#&gt; , , Between, GINI
#&gt; 
#&gt;                             N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific          21  38.5065  4.8352     30.8    48.65   0.1913
#&gt; Europe &amp; Central Asia        47   31.902   4.054  23.3667     40.8   0.3926
#&gt; Latin America &amp; Caribbean    25  50.5664  4.0186     41.1  57.7333  -0.0433
#&gt; Middle East &amp; North Africa   14  36.1947  4.6346    29.05  43.0667  -0.1349
#&gt; North America                 2  36.1636  3.5731  32.6727  39.6545       -0
#&gt; South Asia                    7  34.1641  3.4562  30.3556    39.85   0.2502
#&gt; Sub-Saharan Africa           45  44.8165  7.0733    31.45  61.7143   0.8873
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         1.9261
#&gt; Europe &amp; Central Asia       2.5421
#&gt; Latin America &amp; Caribbean   2.2618
#&gt; Middle East &amp; North Africa  1.7987
#&gt; North America                    1
#&gt; South Asia                  1.3567
#&gt; Sub-Saharan Africa          3.1577
#&gt; 
#&gt; , , Within, GINI
#&gt; 
#&gt;                                 N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific           4.381  39.3976  2.3325  32.6476  46.1476   0.0321
#&gt; Europe &amp; Central Asia       12.5106  39.3976  2.4529   28.636  54.4976   0.8011
#&gt; Latin America &amp; Caribbean     14.52  39.3976  3.4921  26.3076  48.7365  -0.2144
#&gt; Middle East &amp; North Africa   5.4286  39.3976  2.1863  32.6309  46.6404   0.0424
#&gt; North America                    11  39.3976  1.6323   34.343   40.843  -1.4734
#&gt; South Asia                   5.5714  39.3976  2.6268  34.6726  45.9309   0.0038
#&gt; Sub-Saharan Africa           3.9111  39.3976  4.4142  23.9576  54.7976   0.1224
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         4.2462
#&gt; Europe &amp; Central Asia       9.7301
#&gt; Latin America &amp; Caribbean   3.0356
#&gt; Middle East &amp; North Africa  5.2628
#&gt; North America               5.0766
#&gt; South Asia                  2.5971
#&gt; Sub-Saharan Africa          4.1458
#&gt; 
#&gt; , , Overall, ODA
#&gt; 
#&gt;                              N/T            Mean              SD
#&gt; East Asia &amp; Pacific         1491      346,977686      615,361973
#&gt; Europe &amp; Central Asia        751      394,089867      566,834650
#&gt; Latin America &amp; Caribbean   1918      173,728368      259,343122
#&gt; Middle East &amp; North Africa  1079      663,574245  1.40635884e+09
#&gt; North America                 39      423846.154     9,678883.86
#&gt; South Asia                   450  1.25150376e+09  1.56736667e+09
#&gt; Sub-Saharan Africa          2608      440,308474      596,033604
#&gt;                                         Min             Max    Skew     Kurt
#&gt; East Asia &amp; Pacific         -1.08038000e+09  3.92003000e+09   2.712  11.3035
#&gt; Europe &amp; Central Asia           -343,480000  4.64666000e+09  3.1673  15.5881
#&gt; Latin America &amp; Caribbean       -512,730000  2.95163000e+09  3.1857  20.4058
#&gt; Middle East &amp; North Africa      -169,710000  2.45521800e+10   7.176  91.7057
#&gt; North America                    -14,520000       55,820000  4.8406  29.1877
#&gt; South Asia                            80000  8.53900000e+09  1.8057   6.6894
#&gt; Sub-Saharan Africa               -16,780000  1.12780600e+10  4.8992  57.6191
#&gt; 
#&gt; , , Between, ODA
#&gt; 
#&gt;                             N/T            Mean              SD          Min
#&gt; East Asia &amp; Pacific          31      346,977686      460,186340  1,550512.82
#&gt; Europe &amp; Central Asia        32      394,089867      446,099453  12,115777.8
#&gt; Latin America &amp; Caribbean    37      173,728368      169,248215  2,089677.42
#&gt; Middle East &amp; North Africa   21      663,574245      725,711345  2,946923.08
#&gt; North America                 1      423846.154               0   423846.154
#&gt; South Asia                    8  1.25150376e+09  1.15946284e+09  25,663448.3
#&gt; Sub-Saharan Africa           48      440,308474      357,457530  27,340689.7
#&gt;                                        Max    Skew    Kurt
#&gt; East Asia &amp; Pacific         1.64164241e+09  1.8351  5.3242
#&gt; Europe &amp; Central Asia       2.16970133e+09  2.2773  8.5531
#&gt; Latin America &amp; Caribbean       560,007241  0.9171  2.5611
#&gt; Middle East &amp; North Africa  2.73873224e+09  1.2769  4.0978
#&gt; North America                   423846.154       -       -
#&gt; South Asia                  3.53258914e+09  0.7083  2.3441
#&gt; Sub-Saharan Africa          1.41753857e+09  0.9724  3.1001
#&gt; 
#&gt; , , Within, ODA
#&gt; 
#&gt;                                 N/T        Mean              SD
#&gt; East Asia &amp; Pacific         48.0968  428,746468      408,532605
#&gt; Europe &amp; Central Asia       23.4688  428,746468      349,709591
#&gt; Latin America &amp; Caribbean   51.8378  428,746468      196,504190
#&gt; Middle East &amp; North Africa   51.381  428,746468  1.20465275e+09
#&gt; North America                    39  428,746468     9,678883.86
#&gt; South Asia                    56.25  428,746468  1.05464885e+09
#&gt; Sub-Saharan Africa          54.3333  428,746468      476,948814
#&gt;                                         Min             Max    Skew      Kurt
#&gt; East Asia &amp; Pacific         -2.18778866e+09  3.57867647e+09   0.148   14.9208
#&gt; Europe &amp; Central Asia       -1.14106420e+09  3.01475819e+09   2.161   17.7781
#&gt; Latin America &amp; Caribbean       -579,470773  2.97543078e+09  3.4431   37.7999
#&gt; Middle East &amp; North Africa  -2.47969577e+09  2.35093916e+10  8.6743  139.5562
#&gt; North America                    413,802622      484,142622  4.8406   29.1877
#&gt; South Asia                  -2.37972267e+09  5.51177302e+09  2.0067   10.5477
#&gt; Sub-Saharan Africa              -825,184566  1.07855444e+10  5.9273  104.1212
#&gt; </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>region</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>,
    higher <span class='op'>=</span> <span class='cn'>TRUE</span>, array <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>                           <span class='co'># Return as a list of matrices..</span>
<span class='fu'><a href='unlist2d.html'>unlist2d</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Variable"</span>,<span class='st'>"Trans"</span><span class='op'>)</span>, row.names <span class='op'>=</span> <span class='st'>"Region"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>  <span class='co'># and turn into a tidy data.frame</span>
</div><div class='output co'>#&gt;   Variable   Trans                     Region    N      Mean        SD
#&gt; 1    PCGDP Overall        East Asia &amp; Pacific 1391 10337.046 14094.834
#&gt; 2    PCGDP Overall      Europe &amp; Central Asia 2084 25664.806 26181.671
#&gt; 3    PCGDP Overall Latin America &amp; Caribbean  1896  6976.065  6705.538
#&gt; 4    PCGDP Overall Middle East &amp; North Africa  805 13760.276 18374.221
#&gt; 5    PCGDP Overall              North America  170 43650.519 18345.042
#&gt; 6    PCGDP Overall                 South Asia  366  1178.345  1581.268
#&gt;          Min        Max      Skew      Kurt
#&gt; 1   131.9634  72183.303 1.6377612  4.754406
#&gt; 2   367.0493 191586.640 2.0987365  9.279446
#&gt; 3   662.2795  42491.454 2.1357240  7.917158
#&gt; 4   570.5574 113682.038 2.4214546  9.666703
#&gt; 5 17550.5732  94903.192 0.9047195  3.350085
#&gt; 6   267.0736   8971.128 3.0144216 11.898500</div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>                           <span class='co'># Pairwise correlations with p-value</span>
</div><div class='output co'>#&gt;          year decade  PCGDP LIFEEX   GINI    ODA
#&gt; year      1     .99*   .15*   .45*  -.30*   .12*
#&gt; decade   .99*    1     .15*   .44*  -.27*   .12*
#&gt; PCGDP    .15*   .15*    1     .57*  -.42*  -.16*
#&gt; LIFEEX   .45*   .44*   .57*    1    -.34*  -.02*
#&gt; GINI    -.30*  -.27*  -.42*  -.34*    1    -.17*
#&gt; ODA      .12*   .12*  -.16*  -.02*  -.17*    1  </div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>    <span class='co'># Correlating country means</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: the standard deviation is zero</span></div><div class='output co'>#&gt;           year  decade   PCGDP  LIFEEX    GINI     ODA
#&gt; year       NA      NA      NA      NA      NA      NA 
#&gt; decade     NA      NA      NA      NA      NA      NA 
#&gt; PCGDP      NA      NA      1      .60*   -.41*   -.24*
#&gt; LIFEEX     NA      NA     .60*     1     -.41*   -.18*
#&gt; GINI       NA      NA    -.41*   -.41*     1     -.17 
#&gt; ODA        NA      NA    -.24*   -.18*   -.17      1  </div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>  <span class='co'># Within-country correlations</span>
</div><div class='output co'>#&gt;          year decade  PCGDP LIFEEX   GINI    ODA
#&gt; year      1     .99*   .43*   .84*  -.20*   .17*
#&gt; decade   .99*    1     .43*   .83*  -.19*   .16*
#&gt; PCGDP    .43*   .43*    1     .30*  -.03   -.01 
#&gt; LIFEEX   .84*   .83*   .30*    1    -.15*   .14*
#&gt; GINI    -.20*  -.19*  -.03   -.15*    1    -.02 
#&gt; ODA      .17*   .16*  -.01    .14*  -.02     1  </div><div class='input'><span class='fu'><a href='psacf.html'>psacf</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>                 <span class='co'># Panel-data Autocorrelation function</span>
</div><div class='img'><img src='collapse-package-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='psacf.html'>pspacf</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>                <span class='co'># Partial panel-autocorrelations</span>
</div><div class='img'><img src='collapse-package-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='psmat.html'>psmat</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>iso3c</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>plot</span>          <span class='co'># Convert panel to 3D array and plot</span>
</div><div class='img'><img src='collapse-package-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## collapse offers a few very efficent functions for data manipulation:</span>
<span class='co'># Fast selecting and replacing columns</span>
<span class='va'>series</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>     <span class='co'># Same as wlddev[9:12] but 2x faster</span>
<span class='va'>series</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='co'># Same thing: &gt; 100x faster than dplyr::select</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>series</span>     <span class='co'># Replace, 8x faster wlddev[9:12] &lt;- series + replaces names</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>series</span> <span class='co'># Same thing</span>

<span class='co'># Fast subsetting</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span> <span class='op'>==</span> <span class='st'>"Ireland"</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='op'>-</span><span class='va'>iso3c</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;         date year decade                region      income OECD PCGDP   LIFEEX
#&gt; 1 1961-01-01 1960   1960 Europe &amp; Central Asia High income TRUE    NA 69.79651
#&gt; 2 1962-01-01 1961   1960 Europe &amp; Central Asia High income TRUE    NA 69.97827
#&gt; 3 1963-01-01 1962   1960 Europe &amp; Central Asia High income TRUE    NA 70.13407
#&gt; 4 1964-01-01 1963   1960 Europe &amp; Central Asia High income TRUE    NA 70.27293
#&gt; 5 1965-01-01 1964   1960 Europe &amp; Central Asia High income TRUE    NA 70.40129
#&gt; 6 1966-01-01 1965   1960 Europe &amp; Central Asia High income TRUE    NA 70.52315
#&gt;   GINI ODA
#&gt; 1   NA  NA
#&gt; 2   NA  NA
#&gt; 3   NA  NA
#&gt; 4   NA  NA
#&gt; 5   NA  NA
#&gt; 6   NA  NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span> <span class='op'>==</span> <span class='st'>"Ireland"</span> <span class='op'>&amp;</span> <span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   year    PCGDP   LIFEEX GINI ODA
#&gt; 1 1991 24033.77 75.00527   NA  NA
#&gt; 2 1992 24668.41 75.18095   NA  NA
#&gt; 3 1993 25206.33 75.33612   NA  NA
#&gt; 4 1994 26552.29 75.47680   NA  NA
#&gt; 5 1995 28961.58 75.61756   NA  NA
#&gt; 6 1996 30977.18 75.83171   NA  NA</div><div class='input'><span class='fu'><a href='fsubset.html'>ss</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span><span class='op'>)</span> <span class='co'># This is an order of magnitude faster than wlddev[1:10, 1:10]</span>
</div><div class='output co'>#&gt;        country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1  Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2  Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3  Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4  Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5  Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6  Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt; 7  Afghanistan   AFG 1967-01-01 1966   1970 South Asia Low income FALSE    NA
#&gt; 8  Afghanistan   AFG 1968-01-01 1967   1970 South Asia Low income FALSE    NA
#&gt; 9  Afghanistan   AFG 1969-01-01 1968   1970 South Asia Low income FALSE    NA
#&gt; 10 Afghanistan   AFG 1970-01-01 1969   1970 South Asia Low income FALSE    NA
#&gt;    LIFEEX
#&gt; 1  32.292
#&gt; 2  32.742
#&gt; 3  33.185
#&gt; 4  33.624
#&gt; 5  34.060
#&gt; 6  34.495
#&gt; 7  34.928
#&gt; 8  35.361
#&gt; 9  35.796
#&gt; 10 36.234</div><div class='input'>
<span class='co'># Fast transforming</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, ODA_GDP <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>/</span> <span class='va'>PCGDP</span>, ODA_LIFEEX <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>LIFEEX</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;   LIFEEX GINI       ODA ODA_GDP ODA_LIFEEX
#&gt; 1 32.292   NA 114440000      NA   331.2791
#&gt; 2 32.742   NA 233350000      NA   466.5505
#&gt; 3 33.185   NA 114880000      NA   322.9835
#&gt; 4 33.624   NA 236450000      NA   457.3201
#&gt; 5 34.060   NA 302480000      NA   510.6269
#&gt; 6 34.495   NA 370250000      NA   557.8165</div><div class='input'><span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, ODA_GDP <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>/</span> <span class='va'>PCGDP</span>, ODA_LIFEEX <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='co'># by reference</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, PCGDP <span class='op'>=</span> <span class='cn'>NULL</span>, ODA <span class='op'>=</span> <span class='cn'>NULL</span>, GINI_sum <span class='op'>=</span> <span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>GINI</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD LIFEEX
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE 32.292
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE 32.742
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE 33.185
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE 33.624
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE 34.060
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE 34.495
#&gt;   GINI ODA_GDP ODA_LIFEEX GINI_sum
#&gt; 1   NA      NA   331.2791  53423.1
#&gt; 2   NA      NA   466.5505  53423.1
#&gt; 3   NA      NA   322.9835  53423.1
#&gt; 4   NA      NA   457.3201  53423.1
#&gt; 5   NA      NA   510.6269  53423.1
#&gt; 6   NA      NA   557.8165  53423.1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>log</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># Can also transform with lists of columns</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;     LIFEEX GINI      ODA ODA_GDP ODA_LIFEEX
#&gt; 1 3.474820   NA 18.55556      NA   331.2791
#&gt; 2 3.488659   NA 19.26805      NA   466.5505
#&gt; 3 3.502098   NA 18.55940      NA   322.9835
#&gt; 4 3.515240   NA 19.28125      NA   457.3201
#&gt; 5 3.528124   NA 19.52753      NA   510.6269
#&gt; 6 3.540814   NA 19.72969      NA   557.8165</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># apply = FALSE invokes fscale.data.frame</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI         ODA ODA_GDP ODA_LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165</div><div class='input'><span class='fu'><a href='ftransform.html'>settransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>     <span class='co'># Changing the data by reference</span>
<span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Same thing (using replacement method)</span>
 
<span class='va'>wlddev</span> <span class='op'>%&lt;&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># Same thing, using magrittr</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span>              <span class='co'># With compound pipes: Scaling and lagging</span>
                        <span class='va'>fscale</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>iso3c</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI         ODA ODA_GDP ODA_LIFEEX L1.PCGDP L2.PCGDP L1.LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791       NA       NA        NA
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505       NA       NA -2.755448
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835       NA       NA -2.716145
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201       NA       NA -2.677455
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269       NA       NA -2.639113
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165       NA       NA -2.601033
#&gt;   L2.LIFEEX L1.GINI L2.GINI     L1.ODA     L2.ODA
#&gt; 1        NA      NA      NA         NA         NA
#&gt; 2        NA      NA      NA -0.3833618         NA
#&gt; 3 -2.755448      NA      NA -0.2383265 -0.3833618
#&gt; 4 -2.716145      NA      NA -0.3828252 -0.2383265
#&gt; 5 -2.677455      NA      NA -0.2345454 -0.3828252
#&gt; 6 -2.639113      NA      NA -0.1540081 -0.2345454</div><div class='input'>
<span class='co'># Fast reordering</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='roworder.html'>roworder</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    country iso3c       date year decade              region     income  OECD
#&gt; 1 Zimbabwe   ZWE 1961-01-01 1960   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 2 Zimbabwe   ZWE 1962-01-01 1961   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 3 Zimbabwe   ZWE 1963-01-01 1962   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 4 Zimbabwe   ZWE 1964-01-01 1963   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 5 Zimbabwe   ZWE 1965-01-01 1964   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 6 Zimbabwe   ZWE 1966-01-01 1965   1960 Sub-Saharan Africa  Low income FALSE
#&gt;        PCGDP     LIFEEX GINI        ODA     ODA_GDP ODA_LIFEEX
#&gt; 1 -0.5755909 -1.0721742   NA         NA          NA         NA
#&gt; 2 -0.5739916 -1.0395970   NA -0.5228353    87.22431   5.776118
#&gt; 3 -0.5750200 -1.0079805   NA         NA          NA         NA
#&gt; 4 -0.5734651 -0.9773247   NA -0.4063045 91820.94873 185.733590
#&gt; 5 -0.5758954 -0.9474550   NA -0.4758766 38710.37564 117.224633
#&gt; 6 -0.5750414 -0.9184586   NA -0.4870979 29025.41714 101.664406</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='colorder.html'>colorder</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year iso3c       date decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan 1960   AFG 1961-01-01   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan 1961   AFG 1962-01-01   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan 1962   AFG 1963-01-01   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan 1963   AFG 1964-01-01   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan 1964   AFG 1965-01-01   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan 1965   AFG 1966-01-01   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI         ODA ODA_GDP ODA_LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165</div><div class='input'>
<span class='co'># Fast renaming</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='frename.html'>frename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, country <span class='op'>=</span> <span class='va'>Ctry</span>, year <span class='op'>=</span> <span class='va'>Yr</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          Ctry iso3c       date   Yr decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI         ODA ODA_GDP ODA_LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165</div><div class='input'><span class='fu'><a href='frename.html'>setrename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, country <span class='op'>=</span> <span class='va'>Ctry</span>, year <span class='op'>=</span> <span class='va'>Yr</span><span class='op'>)</span>     <span class='co'># By reference</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='frename.html'>frename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>tolower</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          Ctry iso3c       date   Yr decade     region     income  OECD pcgdp
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      lifeex gini         oda ODA_GDP ODA_LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165</div><div class='input'> 
<span class='co'># Fast grouping</span>
<span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>Ctry</span>, <span class='va'>decade</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fgroup_vars</span> <span class='op'>%&gt;%</span> <span class='va'>head</span> <span class='co'># fgroup_by is faster than dplyr::group_by</span>
</div><div class='output co'>#&gt;          Ctry decade
#&gt; 1 Afghanistan   1960
#&gt; 2 Afghanistan   1960
#&gt; 3 Afghanistan   1960
#&gt; 4 Afghanistan   1960
#&gt; 5 Afghanistan   1960
#&gt; 6 Afghanistan   1960</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                                       <span class='co'># .. but only works with collapse functions</span>

<span class='co'>## Now lets start putting things together</span>
<span class='va'>wlddev</span><span class='op'>[[</span><span class='st'>"weights"</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='small-helpers.html'>fnrow</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Adding some weights</span>
 
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fmean</span>            <span class='co'># Fast aggregation using the mean</span>
</div><div class='output co'>#&gt;                        region              income      PCGDP   LIFEEX     GINI
#&gt; 1         East Asia &amp; Pacific         High income 31866.6810 78.07547 32.94000
#&gt; 2         East Asia &amp; Pacific Lower middle income  1782.6410 65.17163 36.21081
#&gt; 3         East Asia &amp; Pacific Upper middle income  4458.8571 71.33153 41.67500
#&gt; 4       Europe &amp; Central Asia         High income 40560.6371 77.30871 30.90235
#&gt; 5       Europe &amp; Central Asia          Low income   661.1513 66.86819 32.13333
#&gt; 6       Europe &amp; Central Asia Lower middle income  1850.9824 69.18382 32.69570
#&gt; 7       Europe &amp; Central Asia Upper middle income  5231.0715 71.08087 33.90625
#&gt; 8  Latin America &amp; Caribbean          High income 16426.6020 74.91948 49.12000
#&gt; 9  Latin America &amp; Caribbean           Low income   737.0503 59.02200 41.10000
#&gt; 10 Latin America &amp; Caribbean  Lower middle income  1965.5373 68.57454 51.51143
#&gt; 11 Latin America &amp; Caribbean  Upper middle income  5870.6660 71.89291 50.66230
#&gt; 12 Middle East &amp; North Africa         High income 31398.9987 75.54077 33.54706
#&gt; 13 Middle East &amp; North Africa          Low income  1088.7487 66.91619 35.55000
#&gt; 14 Middle East &amp; North Africa Lower middle income  2541.7426 68.57516 36.17692
#&gt; 15 Middle East &amp; North Africa Upper middle income  5228.5917 71.75665 36.86667
#&gt; 16              North America         High income 55086.1795 78.71931 36.64444
#&gt; 17                 South Asia          Low income   503.1645 60.70458 37.26667
#&gt; 18                 South Asia Lower middle income  1315.1017 65.87640 34.36667
#&gt; 19                 South Asia Upper middle income  6638.3501 71.58415 39.85000
#&gt; 20        Sub-Saharan Africa          High income 10246.8093 72.36520 46.80000
#&gt; 21        Sub-Saharan Africa           Low income   568.9048 53.35532 42.52935
#&gt; 22        Sub-Saharan Africa  Lower middle income  1685.7934 56.06081 45.84906
#&gt; 23        Sub-Saharan Africa  Upper middle income  7270.3062 59.93970 56.06471
#&gt;           ODA
#&gt; 1   104154478
#&gt; 2   506935071
#&gt; 3   229342181
#&gt; 4   338714013
#&gt; 5   236933846
#&gt; 6   375904326
#&gt; 7   459851651
#&gt; 8    37620886
#&gt; 9   747640000
#&gt; 10  582499907
#&gt; 11  172234094
#&gt; 12  214848130
#&gt; 13 1035321667
#&gt; 14 1078823534
#&gt; 15  853199136
#&gt; 16   -3408571
#&gt; 17 1669691296
#&gt; 18 1315631111
#&gt; 19   39431481
#&gt; 20   21782963
#&gt; 21  700062302
#&gt; 22  658863783
#&gt; 23  216080750</div><div class='input'>
<span class='co'># Same thing using dplyr manipulation verbs</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>region</span>,<span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fmean</span>       <span class='co'># This is already a lot faster than summarize_all(mean)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 23 x 6</span><span>
#&gt;    region                      income               PCGDP LIFEEX  GINI       ODA
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>                       </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>                </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> </span><span style='color: #949494;'>"</span><span>East Asia &amp; Pacific</span><span style='color: #949494;'>"</span><span>       High income         </span><span style='text-decoration: underline;'>31</span><span>867.   78.1  32.9    1.04</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> </span><span style='color: #949494;'>"</span><span>East Asia &amp; Pacific</span><span style='color: #949494;'>"</span><span>       Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>783.   65.2  36.2    5.07</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> </span><span style='color: #949494;'>"</span><span>East Asia &amp; Pacific</span><span style='color: #949494;'>"</span><span>       Upper middle income  </span><span style='text-decoration: underline;'>4</span><span>459.   71.3  41.7    2.29</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> </span><span style='color: #949494;'>"</span><span>Europe &amp; Central Asia</span><span style='color: #949494;'>"</span><span>     High income         </span><span style='text-decoration: underline;'>40</span><span>561.   77.3  30.9    3.39</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> </span><span style='color: #949494;'>"</span><span>Europe &amp; Central Asia</span><span style='color: #949494;'>"</span><span>     Low income            661.   66.9  32.1    2.37</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> </span><span style='color: #949494;'>"</span><span>Europe &amp; Central Asia</span><span style='color: #949494;'>"</span><span>     Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>851.   69.2  32.7    3.76</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> </span><span style='color: #949494;'>"</span><span>Europe &amp; Central Asia</span><span style='color: #949494;'>"</span><span>     Upper middle income  </span><span style='text-decoration: underline;'>5</span><span>231.   71.1  33.9    4.60</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> </span><span style='color: #949494;'>"</span><span>Latin America &amp; Caribbean~ High income         </span><span style='text-decoration: underline;'>16</span><span>427.   74.9  49.1    3.76</span><span style='color: #949494;'>e</span><span>7
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> </span><span style='color: #949494;'>"</span><span>Latin America &amp; Caribbean~ Low income            737.   59.0  41.1    7.48</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> </span><span style='color: #949494;'>"</span><span>Latin America &amp; Caribbean~ Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>966.   68.6  51.5    5.82</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #949494;'># ... with 13 more rows</span><span></div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>weights</span><span class='op'>)</span>   <span class='co'># Weighted group means</span>
</div><div class='output co'>#&gt;                        region              income sum.weights      PCGDP
#&gt; 1         East Asia &amp; Pacific         High income   291.65909 32215.5325
#&gt; 2         East Asia &amp; Pacific Lower middle income   301.21731  1801.0386
#&gt; 3         East Asia &amp; Pacific Upper middle income   226.69780  4297.6217
#&gt; 4       Europe &amp; Central Asia         High income   817.86411 41155.1820
#&gt; 5       Europe &amp; Central Asia          Low income    25.03589   659.0844
#&gt; 6       Europe &amp; Central Asia Lower middle income   137.85081  1854.0827
#&gt; 7       Europe &amp; Central Asia Upper middle income   297.57731  5275.1427
#&gt; 8  Latin America &amp; Caribbean          High income   399.55745 16270.1348
#&gt; 9  Latin America &amp; Caribbean           Low income    20.27540   747.8325
#&gt; 10 Latin America &amp; Caribbean  Lower middle income    96.22736  1943.9761
#&gt; 11 Latin America &amp; Caribbean  Upper middle income   405.70410  5951.1551
#&gt; 12 Middle East &amp; North Africa         High income   177.17273 31430.5657
#&gt; 13 Middle East &amp; North Africa          Low income    37.55455  1115.5404
#&gt; 14 Middle East &amp; North Africa Lower middle income   106.67434  2567.4225
#&gt; 15 Middle East &amp; North Africa Upper middle income   133.04772  5247.8202
#&gt; 16              North America         High income    72.29442 54758.5730
#&gt; 17                 South Asia          Low income    40.40590   525.2406
#&gt; 18                 South Asia Lower middle income   120.67832  1331.7884
#&gt; 19                 South Asia Upper middle income    19.19608  6569.0910
#&gt; 20        Sub-Saharan Africa          High income    23.95364 10152.8009
#&gt; 21        Sub-Saharan Africa           Low income   604.40943   574.4440
#&gt; 22        Sub-Saharan Africa  Lower middle income   301.01853  1722.1403
#&gt; 23        Sub-Saharan Africa  Upper middle income   131.81385  7333.1136
#&gt;      LIFEEX     GINI        ODA
#&gt; 1  78.01314 33.19044  104803431
#&gt; 2  65.35285 36.66044  493317499
#&gt; 3  71.29268 41.39382  253746554
#&gt; 4  77.39843 30.89092  292744132
#&gt; 5  67.30364 33.08699  259412786
#&gt; 6  69.00075 32.71763  349887514
#&gt; 7  70.91226 33.83694  488481064
#&gt; 8  74.92983 50.03180   35566394
#&gt; 9  58.94597 41.10000  634390820
#&gt; 10 68.22479 51.80813  578012510
#&gt; 11 71.82668 50.80986  172564255
#&gt; 12 75.34040 33.58082  237659873
#&gt; 13 66.91980 35.33782  816381107
#&gt; 14 68.52748 36.02410 1082513423
#&gt; 15 71.72737 36.21473 1018077165
#&gt; 16 78.77813 35.15873   -3791356
#&gt; 17 60.74631 39.74479 1903476136
#&gt; 18 65.64312 34.95140 1193512301
#&gt; 19 72.09931 38.96846   36867417
#&gt; 20 72.34255 46.80000   21455750
#&gt; 21 53.40449 42.75318  685415791
#&gt; 22 55.95782 46.98785  621113653
#&gt; 23 60.69838 56.00698  203897480</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>weights</span><span class='op'>)</span>     <span class='co'># Weighted group standard deviations</span>
</div><div class='output co'>#&gt;                        region              income sum.weights      PCGDP
#&gt; 1         East Asia &amp; Pacific         High income   291.65909 12984.0931
#&gt; 2         East Asia &amp; Pacific Lower middle income   301.21731   918.9109
#&gt; 3         East Asia &amp; Pacific Upper middle income   226.69780  2395.2797
#&gt; 4       Europe &amp; Central Asia         High income   817.86411 29425.8433
#&gt; 5       Europe &amp; Central Asia          Low income    25.03589   222.1011
#&gt; 6       Europe &amp; Central Asia Lower middle income   137.85081  1027.2732
#&gt; 7       Europe &amp; Central Asia Upper middle income   297.57731  2878.2048
#&gt; 8  Latin America &amp; Caribbean          High income   399.55745  8498.5586
#&gt; 9  Latin America &amp; Caribbean           Low income    20.27540    65.1951
#&gt; 10 Latin America &amp; Caribbean  Lower middle income    96.22736   602.1835
#&gt; 11 Latin America &amp; Caribbean  Upper middle income   405.70410  2674.5702
#&gt; 12 Middle East &amp; North Africa         High income   177.17273 16155.6434
#&gt; 13 Middle East &amp; North Africa          Low income    37.55455   129.2630
#&gt; 14 Middle East &amp; North Africa Lower middle income   106.67434   770.1745
#&gt; 15 Middle East &amp; North Africa Upper middle income   133.04772  2289.7278
#&gt; 16              North America         High income    72.29442 17709.3499
#&gt; 17                 South Asia          Low income    40.40590   118.3048
#&gt; 18                 South Asia Lower middle income   120.67832   784.7046
#&gt; 19                 South Asia Upper middle income    19.19608  1222.7727
#&gt; 20        Sub-Saharan Africa          High income    23.95364  1858.2715
#&gt; 21        Sub-Saharan Africa           Low income   604.40943   291.4469
#&gt; 22        Sub-Saharan Africa  Lower middle income   301.01853   886.3252
#&gt; 23        Sub-Saharan Africa  Upper middle income   131.81385  3360.5091
#&gt;      LIFEEX       GINI        ODA
#&gt; 1  3.462191  1.0550989  221192000
#&gt; 2  4.631328  5.2402847  676478842
#&gt; 3  2.604335  3.4414475  685659808
#&gt; 4  3.734317  3.4737236  639876252
#&gt; 5  2.831099  0.9489419  110165270
#&gt; 6  1.783168  5.6123498  235649670
#&gt; 7  3.576654  5.9342680  644010611
#&gt; 8  2.659423  5.4590931   57888097
#&gt; 9  2.589587  0.0000000  538366668
#&gt; 10 4.817523  5.3271267  256214607
#&gt; 11 3.306151  4.9266352  231187252
#&gt; 12 2.941952  5.2223978  629365098
#&gt; 13 5.662427  0.9268690 1659213788
#&gt; 14 5.727382  3.7628669 1036993970
#&gt; 15 3.166006  5.3601535 2757960518
#&gt; 16 1.959598  4.0229848    5129259
#&gt; 17 5.710382 10.0076352 2024516452
#&gt; 18 5.196553  3.7971879  961905982
#&gt; 19 4.686722  2.2696941   13573485
#&gt; 20 1.410758  0.0000000   12047879
#&gt; 21 6.159556  6.0658429  744637674
#&gt; 22 7.330579  7.4718832  775118404
#&gt; 23 7.370616 11.3513975  303891052</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
   <span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='fl'>0.75</span>, <span class='va'>weights</span><span class='op'>)</span>                           <span class='co'># Weighted group third quartile</span>
</div><div class='output co'>#&gt;                        region              income sum.weights      PCGDP
#&gt; 1         East Asia &amp; Pacific         High income   599.25186 36904.4751
#&gt; 2         East Asia &amp; Pacific Lower middle income   627.97744  2213.9027
#&gt; 3         East Asia &amp; Pacific Upper middle income   467.14191  3708.1950
#&gt; 4       Europe &amp; Central Asia         High income  1784.00290 43052.6031
#&gt; 5       Europe &amp; Central Asia          Low income    42.97951   925.6394
#&gt; 6       Europe &amp; Central Asia Lower middle income   266.56320  2966.5001
#&gt; 7       Europe &amp; Central Asia Upper middle income   646.81510  6642.0351
#&gt; 8  Latin America &amp; Caribbean          High income   845.12862 16683.4224
#&gt; 9  Latin America &amp; Caribbean           Low income    45.10144  1018.2128
#&gt; 10 Latin America &amp; Caribbean  Lower middle income   205.42139  2224.2652
#&gt; 11 Latin America &amp; Caribbean  Upper middle income   861.69168  6414.8829
#&gt; 12 Middle East &amp; North Africa         High income   366.63484 35522.7274
#&gt; 13 Middle East &amp; North Africa          Low income    83.20945  1182.8982
#&gt; 14 Middle East &amp; North Africa Lower middle income   234.18600  2524.2665
#&gt; 15 Middle East &amp; North Africa Upper middle income   284.66077  6073.4062
#&gt; 16              North America         High income   146.61643 50407.3413
#&gt; 17                 South Asia          Low income    95.78254   536.0125
#&gt; 18                 South Asia Lower middle income   241.47379  1130.0901
#&gt; 19                 South Asia Upper middle income    44.69755  7537.6368
#&gt; 20        Sub-Saharan Africa          High income    51.24001  9730.6999
#&gt; 21        Sub-Saharan Africa           Low income  1265.77242   645.3699
#&gt; 22        Sub-Saharan Africa  Lower middle income   629.52735  1881.8953
#&gt; 23        Sub-Saharan Africa  Upper middle income   283.66175  7523.2795
#&gt;      LIFEEX GINI        ODA
#&gt; 1  77.88293 33.5  289390000
#&gt; 2  65.87100 38.1  670020000
#&gt; 3  70.84100 45.3  166660000
#&gt; 4  77.68537 33.6  173170000
#&gt; 5  68.05200 34.0  349960000
#&gt; 6  69.72600 37.1  460920000
#&gt; 7  71.80200 39.5  566410000
#&gt; 8  75.01600 54.8   56220000
#&gt; 9  58.53500 41.1  370380000
#&gt; 10 68.54100 55.8  606610000
#&gt; 11 72.02700 54.6  243710000
#&gt; 12 75.30015 38.9  119280000
#&gt; 13 69.42300 35.0 1254970000
#&gt; 14 69.91200 40.0 1408660000
#&gt; 15 71.05300 43.0  559660000
#&gt; 16 78.69024 38.2     310000
#&gt; 17 58.50000 43.8  619820000
#&gt; 18 66.62500 36.4 2355020000
#&gt; 19 72.60300 38.4   34900000
#&gt; 20 73.08293 46.8   42180000
#&gt; 21 53.64800 46.0  604970000
#&gt; 22 57.91900 52.0  601430000
#&gt; 23 62.06200 63.3  164470000</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='va'>fwithin</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>                               <span class='co'># Within transformation</span>
</div><div class='output co'>#&gt;   PCGDP    LIFEEX GINI         ODA
#&gt; 1    NA -15.59016   NA -1236633448
#&gt; 2    NA -15.14016   NA -1117723448
#&gt; 3    NA -14.69716   NA -1236193448
#&gt; 4    NA -14.25816   NA -1114623448
#&gt; 5    NA -13.82216   NA -1048593448
#&gt; 6    NA -13.38716   NA  -980823448</div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span>TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>                    <span class='co'># Grouped centering using the median</span>
</div><div class='output co'>#&gt;   PCGDP  LIFEEX GINI        ODA
#&gt; 1    NA -15.872   NA -138350000
#&gt; 2    NA -15.422   NA  -19440000
#&gt; 3    NA -14.979   NA -137910000
#&gt; 4    NA -14.540   NA  -16340000
#&gt; 5    NA -14.104   NA   49690000
#&gt; 6    NA -13.669   NA  117460000</div><div class='input'><span class='co'># Replacing data points by the weighted first quartile:</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='op'>-</span><span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='fl'>0.25</span>, <span class='va'>weights</span>, <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country year    PCGDP LIFEEX GINI       ODA    weights
#&gt; 1 Afghanistan 1960 365.5487  38.54   NA 162680000 1.27022678
#&gt; 2 Afghanistan 1961 365.5487  38.54   NA 162680000 1.40429939
#&gt; 3 Afghanistan 1962 365.5487  38.54   NA 162680000 0.36137383
#&gt; 4 Afghanistan 1963 365.5487  38.54   NA 162680000 1.22312383
#&gt; 5 Afghanistan 1964 365.5487  38.54   NA 162680000 0.08801738
#&gt; 6 Afghanistan 1965 365.5487  38.54   NA 162680000 1.11696390</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fscale</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>    <span class='co'># Standardizing</span>
</div><div class='output co'>#&gt;   PCGDP    LIFEEX GINI        ODA
#&gt; 1    NA -1.551093   NA -0.6132859
#&gt; 2    NA -1.506322   NA -0.5543146
#&gt; 3    NA -1.462247   NA -0.6130676
#&gt; 4    NA -1.418570   NA -0.5527772
#&gt; 5    NA -1.375191   NA -0.5200308
#&gt; 6    NA -1.331912   NA -0.4864215</div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
   <span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>  <span class='co'># Weigted..</span>
</div><div class='output co'>#&gt;      weights PCGDP    LIFEEX GINI        ODA
#&gt; 1 1.27022678    NA -1.508262   NA -0.5796510
#&gt; 2 1.40429939    NA -1.463114   NA -0.5195093
#&gt; 3 0.36137383    NA -1.418668   NA -0.5794284
#&gt; 4 1.22312383    NA -1.374624   NA -0.5179414
#&gt; 5 0.08801738    NA -1.330880   NA -0.4845450
#&gt; 6 1.11696390    NA -1.287237   NA -0.4502687</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  <span class='co'># Adding 1 lead and 2 lags of each variable</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP F1.LIFEEX LIFEEX L1.LIFEEX
#&gt; 1 Afghanistan 1960       NA    NA       NA       NA    32.742 32.292        NA
#&gt; 2 Afghanistan 1961       NA    NA       NA       NA    33.185 32.742    32.292
#&gt; 3 Afghanistan 1962       NA    NA       NA       NA    33.624 33.185    32.742
#&gt; 4 Afghanistan 1963       NA    NA       NA       NA    34.060 33.624    33.185
#&gt; 5 Afghanistan 1964       NA    NA       NA       NA    34.495 34.060    33.624
#&gt; 6 Afghanistan 1965       NA    NA       NA       NA    34.928 34.495    34.060
#&gt;   L2.LIFEEX F1.GINI GINI L1.GINI L2.GINI    F1.ODA       ODA    L1.ODA
#&gt; 1        NA      NA   NA      NA      NA 233350000 114440000        NA
#&gt; 2        NA      NA   NA      NA      NA 114880000 233350000 114440000
#&gt; 3    32.292      NA   NA      NA      NA 236450000 114880000 233350000
#&gt; 4    32.742      NA   NA      NA      NA 302480000 236450000 114880000
#&gt; 5    33.185      NA   NA      NA      NA 370250000 302480000 236450000
#&gt; 6    33.624      NA   NA      NA      NA 338270000 370250000 302480000
#&gt;      L2.ODA
#&gt; 1        NA
#&gt; 2        NA
#&gt; 3 114440000
#&gt; 4 233350000
#&gt; 5 114880000
#&gt; 6 236450000</div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  <span class='co'># Adding 1 lead and 10-year growth rates</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country year PCGDP G1.PCGDP L10G1.PCGDP LIFEEX G1.LIFEEX L10G1.LIFEEX
#&gt; 1 Afghanistan 1960    NA       NA          NA 32.292        NA           NA
#&gt; 2 Afghanistan 1961    NA       NA          NA 32.742  1.393534           NA
#&gt; 3 Afghanistan 1962    NA       NA          NA 33.185  1.353002           NA
#&gt; 4 Afghanistan 1963    NA       NA          NA 33.624  1.322887           NA
#&gt; 5 Afghanistan 1964    NA       NA          NA 34.060  1.296693           NA
#&gt; 6 Afghanistan 1965    NA       NA          NA 34.495  1.277158           NA
#&gt;   GINI G1.GINI L10G1.GINI       ODA    G1.ODA L10G1.ODA
#&gt; 1   NA      NA         NA 114440000        NA        NA
#&gt; 2   NA      NA         NA 233350000 103.90598        NA
#&gt; 3   NA      NA         NA 114880000 -50.76923        NA
#&gt; 4   NA      NA         NA 236450000 105.82347        NA
#&gt; 5   NA      NA         NA 302480000  27.92557        NA
#&gt; 6   NA      NA         NA 370250000  22.40479        NA</div><div class='input'>
<span class='co'># etc...</span>

<span class='co'># Aggregation with multiple functions</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='op'>{</span>
    <span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='fu'><a href='GRP, fgroup_by.html'>fgroup_vars</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='st'>"unique"</span><span class='op'>)</span>,
             <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helpers.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"median_"</span><span class='op'>)</span>,
             <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helpers.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"mean_"</span><span class='op'>)</span>,
             <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helpers.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"sd_"</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;                  region              income median_PCGDP median_LIFEEX
#&gt; 1   East Asia &amp; Pacific         High income   32191.9487      78.13400
#&gt; 2   East Asia &amp; Pacific Lower middle income    1643.6158      65.64000
#&gt; 3   East Asia &amp; Pacific Upper middle income    3487.8458      71.38050
#&gt; 4 Europe &amp; Central Asia         High income   36186.2146      77.96585
#&gt; 5 Europe &amp; Central Asia          Low income     660.5606      66.94500
#&gt; 6 Europe &amp; Central Asia Lower middle income    1616.9528      68.68306
#&gt;   median_GINI median_ODA mean_PCGDP mean_LIFEEX mean_GINI  mean_ODA   sd_PCGDP
#&gt; 1       32.45    9900000 31866.6810    78.07547  32.94000 104154478 12879.3223
#&gt; 2       35.60  260080000  1782.6410    65.17163  36.21081 506935071   913.8306
#&gt; 3       41.65   51120000  4458.8571    71.33153  41.67500 229342181  2476.9113
#&gt; 4       31.05  136890000 40560.6371    77.30871  30.90235 338714013 28958.5384
#&gt; 5       32.45  246775000   661.1513    66.86819  32.13333 236933846   220.7131
#&gt; 6       32.10  322680000  1850.9824    69.18382  32.69570 375904326  1014.3409
#&gt;   sd_LIFEEX  sd_GINI    sd_ODA
#&gt; 1  3.541889 1.300598 209769666
#&gt; 2  4.746286 4.830619 699284817
#&gt; 3  2.621192 3.516116 681338565
#&gt; 4  3.730004 3.595416 663664130
#&gt; 5  2.927809 1.713087 112397977
#&gt; 6  1.907053 5.322775 255897099</div><div class='input'>
<span class='co'># Transformation with multiple functions</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='op'>{</span>
    <span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span><span class='op'>)</span>,  <span class='co'># Sequence of lagged differences</span>
             <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fwithin</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='small-helpers.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"W."</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
               <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span>, keep.ids <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>             <span class='co'># Sequence of lagged demeaned vars</span>
  <span class='op'>}</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country year D1.PCGDP L1.D1.PCGDP L2.D1.PCGDP L10D1.PCGDP L1.L10D1.PCGDP
#&gt; 1 Afghanistan 1960       NA          NA          NA          NA             NA
#&gt; 2 Afghanistan 1961       NA          NA          NA          NA             NA
#&gt; 3 Afghanistan 1962       NA          NA          NA          NA             NA
#&gt; 4 Afghanistan 1963       NA          NA          NA          NA             NA
#&gt; 5 Afghanistan 1964       NA          NA          NA          NA             NA
#&gt; 6 Afghanistan 1965       NA          NA          NA          NA             NA
#&gt;   L2.L10D1.PCGDP D1.LIFEEX L1.D1.LIFEEX L2.D1.LIFEEX L10D1.LIFEEX
#&gt; 1             NA        NA           NA           NA           NA
#&gt; 2             NA     0.450           NA           NA           NA
#&gt; 3             NA     0.443        0.450           NA           NA
#&gt; 4             NA     0.439        0.443        0.450           NA
#&gt; 5             NA     0.436        0.439        0.443           NA
#&gt; 6             NA     0.435        0.436        0.439           NA
#&gt;   L1.L10D1.LIFEEX L2.L10D1.LIFEEX D1.GINI L1.D1.GINI L2.D1.GINI L10D1.GINI
#&gt; 1              NA              NA      NA         NA         NA         NA
#&gt; 2              NA              NA      NA         NA         NA         NA
#&gt; 3              NA              NA      NA         NA         NA         NA
#&gt; 4              NA              NA      NA         NA         NA         NA
#&gt; 5              NA              NA      NA         NA         NA         NA
#&gt; 6              NA              NA      NA         NA         NA         NA
#&gt;   L1.L10D1.GINI L2.L10D1.GINI     D1.ODA  L1.D1.ODA  L2.D1.ODA L10D1.ODA
#&gt; 1            NA            NA         NA         NA         NA        NA
#&gt; 2            NA            NA  118910000         NA         NA        NA
#&gt; 3            NA            NA -118470000  118910000         NA        NA
#&gt; 4            NA            NA  121570000 -118470000  118910000        NA
#&gt; 5            NA            NA   66030000  121570000 -118470000        NA
#&gt; 6            NA            NA   67770000   66030000  121570000        NA
#&gt;   L1.L10D1.ODA L2.L10D1.ODA PCGDP L1.PCGDP L2.PCGDP LIFEEX L1.LIFEEX L2.LIFEEX
#&gt; 1           NA           NA    NA       NA       NA 32.292        NA        NA
#&gt; 2           NA           NA    NA       NA       NA 32.742    32.292        NA
#&gt; 3           NA           NA    NA       NA       NA 33.185    32.742    32.292
#&gt; 4           NA           NA    NA       NA       NA 33.624    33.185    32.742
#&gt; 5           NA           NA    NA       NA       NA 34.060    33.624    33.185
#&gt; 6           NA           NA    NA       NA       NA 34.495    34.060    33.624
#&gt;   GINI L1.GINI L2.GINI       ODA    L1.ODA    L2.ODA W.PCGDP L1.W.PCGDP
#&gt; 1   NA      NA      NA 114440000        NA        NA      NA         NA
#&gt; 2   NA      NA      NA 233350000 114440000        NA      NA         NA
#&gt; 3   NA      NA      NA 114880000 233350000 114440000      NA         NA
#&gt; 4   NA      NA      NA 236450000 114880000 233350000      NA         NA
#&gt; 5   NA      NA      NA 302480000 236450000 114880000      NA         NA
#&gt; 6   NA      NA      NA 370250000 302480000 236450000      NA         NA
#&gt;   L2.W.PCGDP  W.LIFEEX L1.W.LIFEEX L2.W.LIFEEX W.GINI L1.W.GINI L2.W.GINI
#&gt; 1         NA -15.59016          NA          NA     NA        NA        NA
#&gt; 2         NA -15.14016   -15.59016          NA     NA        NA        NA
#&gt; 3         NA -14.69716   -15.14016   -15.59016     NA        NA        NA
#&gt; 4         NA -14.25816   -14.69716   -15.14016     NA        NA        NA
#&gt; 5         NA -13.82216   -14.25816   -14.69716     NA        NA        NA
#&gt; 6         NA -13.38716   -13.82216   -14.25816     NA        NA        NA
#&gt;         W.ODA    L1.W.ODA    L2.W.ODA
#&gt; 1 -1236633448          NA          NA
#&gt; 2 -1117723448 -1236633448          NA
#&gt; 3 -1236193448 -1117723448 -1236633448
#&gt; 4 -1114623448 -1236193448 -1117723448
#&gt; 5 -1048593448 -1114623448 -1236193448
#&gt; 6  -980823448 -1048593448 -1114623448</div><div class='input'>
<span class='co'># With ftransform, can also easily do one or more grouped mutations on the fly..</span>
<span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, median_ODA <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, sd_ODA <span class='op'>=</span> <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span>,
                     mean_GDP <span class='op'>=</span> <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, <span class='va'>country</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>
 
<span class='va'>wlddev</span> <span class='op'>%&lt;&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>median_ODA <span class='op'>=</span> <span class='va'>ODA</span>, median_GDP <span class='op'>=</span> <span class='va'>PCGDP</span><span class='op'>)</span>,
                               <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># On a groped data frame it is also possible to grouped transform certain columns</span>
<span class='co'># but perform aggregate operatins on others:</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span>gmedian_GDP <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, <span class='fu'><a href='GRP, fgroup_by.html'>GRP</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span>,
               omedian_GDP <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span>,  <span class='co'># "replace" preserves NA's</span>
               omedian_GDP_fill <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>tail</span>
</div><div class='output co'>#&gt;        country iso3c       date year decade              region     income
#&gt; 12739 Zimbabwe   ZWE 2014-01-01 2013   2010 Sub-Saharan Africa  Low income
#&gt; 12740 Zimbabwe   ZWE 2015-01-01 2014   2010 Sub-Saharan Africa  Low income
#&gt; 12741 Zimbabwe   ZWE 2016-01-01 2015   2020 Sub-Saharan Africa  Low income
#&gt; 12742 Zimbabwe   ZWE 2017-01-01 2016   2020 Sub-Saharan Africa  Low income
#&gt; 12743 Zimbabwe   ZWE 2018-01-01 2017   2020 Sub-Saharan Africa  Low income
#&gt; 12744 Zimbabwe   ZWE 2019-01-01 2018   2020 Sub-Saharan Africa  Low income
#&gt;        OECD    PCGDP LIFEEX GINI       ODA   weights median_ODA    sd_ODA
#&gt; 12739 FALSE 1086.827 58.053   NA 747060000 1.2866910  303050000 583312298
#&gt; 12740 FALSE 1086.874 59.360   NA 682510000 1.0915974  303050000 583312298
#&gt; 12741 FALSE 1080.573 60.398   NA 775210000 1.2050854  303050000 583312298
#&gt; 12742 FALSE 1063.601 61.163   NA 654250000 1.0356776  303050000 583312298
#&gt; 12743 FALSE 1088.063     NA   NA 717530000 1.4067308  303050000 583312298
#&gt; 12744 FALSE       NA     NA   NA        NA 0.2975208  303050000 583312298
#&gt;       mean_GDP median_GDP gmedian_GDP omedian_GDP omedian_GDP_fill
#&gt; 12739 1205.542   510.9111    510.9111    3619.608         3619.608
#&gt; 12740 1205.542   510.9111    510.9111    3619.608         3619.608
#&gt; 12741 1205.542   510.9111    510.9111    3619.608         3619.608
#&gt; 12742 1205.542   510.9111    510.9111    3619.608         3619.608
#&gt; 12743 1205.542   510.9111    510.9111    3619.608         3619.608
#&gt; 12744 1205.542   510.9111          NA          NA         3619.608</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>

<span class='co'>## For multi-type data aggregation, the function collap offers ease and flexibility</span>
<span class='co'># Aggregate this data by country and decade: Numeric columns with mean, categorical with mode</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>, <span class='va'>fmean</span>, <span class='va'>fmode</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date   year decade     region     income  OECD
#&gt; 1 Afghanistan   AFG 1961-01-01 1962.5   1960 South Asia Low income FALSE
#&gt; 2 Afghanistan   AFG 1967-01-01 1970.0   1970 South Asia Low income FALSE
#&gt; 3 Afghanistan   AFG 1976-01-01 1980.0   1980 South Asia Low income FALSE
#&gt; 4 Afghanistan   AFG 1987-01-01 1990.0   1990 South Asia Low income FALSE
#&gt; 5 Afghanistan   AFG 1996-01-01 2000.0   2000 South Asia Low income FALSE
#&gt; 6 Afghanistan   AFG 2007-01-01 2010.0   2010 South Asia Low income FALSE
#&gt;      PCGDP   LIFEEX GINI        ODA
#&gt; 1       NA 33.39967   NA  228641667
#&gt; 2       NA 36.70089   NA  224881111
#&gt; 3       NA 42.03909   NA  132813636
#&gt; 4       NA 49.69089   NA  249072222
#&gt; 5 349.7596 55.61818   NA 1045170000
#&gt; 6 506.9931 61.12978   NA 5298066667</div><div class='input'>
<span class='va'>wlddev</span><span class='op'>[[</span><span class='st'>"weights"</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='small-helpers.html'>fnrow</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Adding some weights</span>
<span class='co'># taking weighted mean and weighted mode:</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>, <span class='va'>fmean</span>, <span class='va'>fmode</span>, w <span class='op'>=</span> <span class='op'>~</span> <span class='va'>weights</span>, wFUN <span class='op'>=</span> <span class='va'>fsum</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date     year decade     region     income  OECD
#&gt; 1 Afghanistan   AFG 1963-01-01 1962.864   1960 South Asia Low income FALSE
#&gt; 2 Afghanistan   AFG 1968-01-01 1969.969   1970 South Asia Low income FALSE
#&gt; 3 Afghanistan   AFG 1983-01-01 1979.935   1980 South Asia Low income FALSE
#&gt; 4 Afghanistan   AFG 1995-01-01 1989.535   1990 South Asia Low income FALSE
#&gt; 5 Afghanistan   AFG 2002-01-01 1999.706   2000 South Asia Low income FALSE
#&gt; 6 Afghanistan   AFG 2007-01-01 2008.801   2010 South Asia Low income FALSE
#&gt;      PCGDP   LIFEEX GINI        ODA   weights
#&gt; 1       NA 33.56209   NA  213703092  3.241628
#&gt; 2       NA 36.68749   NA  225725932 10.394738
#&gt; 3       NA 41.98449   NA  126127891  9.744293
#&gt; 4       NA 49.31073   NA  216571739  7.352586
#&gt; 5 347.0847 55.42477   NA  764540772  8.429065
#&gt; 6 464.6815 60.52531   NA 4736021503  5.522172</div><div class='input'>
<span class='co'># Multi-function aggregation of certain columns</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>fmean</span>, <span class='va'>fmedian</span>, <span class='va'>fsd</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>ffirst</span>, <span class='va'>flast</span><span class='op'>)</span>, cols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country ffirst.date flast.date decade fmean.PCGDP fmedian.PCGDP fsd.PCGDP
#&gt; 1 Afghanistan  1961-01-01 1966-01-01   1960          NA            NA        NA
#&gt; 2 Afghanistan  1967-01-01 1975-01-01   1970          NA            NA        NA
#&gt; 3 Afghanistan  1976-01-01 1986-01-01   1980          NA            NA        NA
#&gt; 4 Afghanistan  1987-01-01 1995-01-01   1990          NA            NA        NA
#&gt; 5 Afghanistan  1996-01-01 2006-01-01   2000    349.7596      346.9282  11.89378
#&gt; 6 Afghanistan  2007-01-01 2015-01-01   2010    506.9931      536.0125  86.22723
#&gt;   fmean.LIFEEX fmedian.LIFEEX fsd.LIFEEX fmean.GINI fmedian.GINI fsd.GINI
#&gt; 1     33.39967        33.4045  0.8236083         NA           NA       NA
#&gt; 2     36.70089        36.6780  1.2329864         NA           NA       NA
#&gt; 3     42.03909        41.8530  2.1599808         NA           NA       NA
#&gt; 4     49.69089        49.8560  2.1258392         NA           NA       NA
#&gt; 5     55.61818        55.4820  1.8056120         NA           NA       NA
#&gt; 6     61.12978        61.2260  1.2872844         NA           NA       NA
#&gt;    fmean.ODA fmedian.ODA    fsd.ODA
#&gt; 1  228641667   234900000  101559732
#&gt; 2  224881111   229150000   58515953
#&gt; 3  132813636    72610000  108271755
#&gt; 4  249072222   238500000  203018929
#&gt; 5 1045170000   306200000 1113781886
#&gt; 6 5298066667  5033950000 1102034385</div><div class='input'>
<span class='co'># Customized Aggregation: Assign columns to functions</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>,
            custom <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>fmean <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>10</span>, fsd <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, flast <span class='op'>=</span> <span class='fl'>3</span>, ffirst <span class='op'>=</span> <span class='fl'>6</span><span class='op'>:</span><span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country flast.date decade ffirst.region ffirst.income ffirst.OECD
#&gt; 1 Afghanistan 1966-01-01   1960    South Asia    Low income       FALSE
#&gt; 2 Afghanistan 1975-01-01   1970    South Asia    Low income       FALSE
#&gt; 3 Afghanistan 1986-01-01   1980    South Asia    Low income       FALSE
#&gt; 4 Afghanistan 1995-01-01   1990    South Asia    Low income       FALSE
#&gt; 5 Afghanistan 2006-01-01   2000    South Asia    Low income       FALSE
#&gt; 6 Afghanistan 2015-01-01   2010    South Asia    Low income       FALSE
#&gt;   fmean.PCGDP fsd.PCGDP fmean.LIFEEX fsd.LIFEEX fsd.GINI    fsd.ODA
#&gt; 1          NA        NA     33.39967  0.8236083       NA  101559732
#&gt; 2          NA        NA     36.70089  1.2329864       NA   58515953
#&gt; 3          NA        NA     42.03909  2.1599808       NA  108271755
#&gt; 4          NA        NA     49.69089  2.1258392       NA  203018929
#&gt; 5    349.7596  11.89378     55.61818  1.8056120       NA 1113781886
#&gt; 6    506.9931  86.22723     61.12978  1.2872844       NA 1102034385</div><div class='input'> 
<span class='co'># For grouped data frames use collapg</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>country</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='collap.html'>collapg</a></span><span class='op'>(</span><span class='va'>fmean</span>, <span class='va'>ffirst</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span>AMGDP <span class='op'>=</span> <span class='va'>PCGDP</span> <span class='op'>&gt;</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span>,
             AMODA <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>&gt;</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='va'>income</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;          country                     region              income      PCGDP
#&gt; 1    Afghanistan                 South Asia          Low income   482.1631
#&gt; 2        Albania      Europe &amp; Central Asia Upper middle income  2978.0343
#&gt; 3        Algeria Middle East &amp; North Africa Upper middle income  3991.6245
#&gt; 4 American Samoa        East Asia &amp; Pacific Upper middle income 10189.2155
#&gt; 5        Andorra      Europe &amp; Central Asia         High income 40480.7401
#&gt; 6         Angola        Sub-Saharan Africa  Lower middle income  2830.2960
#&gt;     LIFEEX  GINI        ODA AMGDP AMODA
#&gt; 1 57.51515    NA 2699233333 FALSE  TRUE
#&gt; 2 74.85485 29.66  332187778 FALSE  TRUE
#&gt; 3 71.78677 31.45  276555926 FALSE  TRUE
#&gt; 4       NA    NA         NA  TRUE    NA
#&gt; 5       NA    NA         NA  TRUE    NA
#&gt; 6 51.33104 47.35  406505185  TRUE FALSE</div><div class='input'>
<span class='co'>## Additional flexibility for data transformation tasks is offerend by tidy transformation operators</span>
<span class='co'># Within-transformation (centering on overall mean)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country W.PCGDP W.LIFEEX W.GINI      W.ODA
#&gt; 1 Afghanistan      NA 48.25093     NA -807886980
#&gt; 2 Afghanistan      NA 48.70093     NA -688976980
#&gt; 3 Afghanistan      NA 49.14393     NA -807446980
#&gt; 4 Afghanistan      NA 49.58293     NA -685876980
#&gt; 5 Afghanistan      NA 50.01893     NA -619846980
#&gt; 6 Afghanistan      NA 50.45393     NA -552076980</div><div class='input'><span class='co'># \donttest{</span>
<span class='co'># Partialling out country and year fixed effects</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span> <span class='op'>+</span> <span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     HDW.PCGDP  HDW.LIFEEX
#&gt; 43 1330.13750 -1.42544502
#&gt; 44 1182.57499 -1.09828728
#&gt; 45  688.37304 -0.85895109
#&gt; 46  399.73520 -0.54114765
#&gt; 47  -59.57049 -0.31875493
#&gt; 48 -449.21805 -0.09380397</div><div class='input'><span class='co'># Same, adding ODA as continuous regressor</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span> <span class='op'>+</span> <span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>ODA</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     HDW.PCGDP  HDW.LIFEEX
#&gt; 43 -313.14014 -1.41953599
#&gt; 44 -435.90972 -1.10211825
#&gt; 45 -618.49311 -0.76508544
#&gt; 46   32.47045 -0.50982100
#&gt; 47 -129.44076 -0.32181018
#&gt; 48  218.14942  0.08018899</div><div class='input'><span class='co'># }</span>
<span class='co'># Standardizing (scaling and centering) by country</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA
#&gt; 1 Afghanistan        NA  -1.551093       NA -0.6132859
#&gt; 2 Afghanistan        NA  -1.506322       NA -0.5543146
#&gt; 3 Afghanistan        NA  -1.462247       NA -0.6130676
#&gt; 4 Afghanistan        NA  -1.418570       NA -0.5527772
#&gt; 5 Afghanistan        NA  -1.375191       NA -0.5200308
#&gt; 6 Afghanistan        NA  -1.331912       NA -0.4864215</div><div class='input'><span class='co'># Computing 1 lead and 3 lags of the 4 series</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP L3.PCGDP F1.LIFEEX LIFEEX
#&gt; 1 Afghanistan 1960       NA    NA       NA       NA       NA    32.742 32.292
#&gt; 2 Afghanistan 1961       NA    NA       NA       NA       NA    33.185 32.742
#&gt; 3 Afghanistan 1962       NA    NA       NA       NA       NA    33.624 33.185
#&gt; 4 Afghanistan 1963       NA    NA       NA       NA       NA    34.060 33.624
#&gt; 5 Afghanistan 1964       NA    NA       NA       NA       NA    34.495 34.060
#&gt; 6 Afghanistan 1965       NA    NA       NA       NA       NA    34.928 34.495
#&gt;   L1.LIFEEX L2.LIFEEX L3.LIFEEX F1.GINI GINI L1.GINI L2.GINI L3.GINI    F1.ODA
#&gt; 1        NA        NA        NA      NA   NA      NA      NA      NA 233350000
#&gt; 2    32.292        NA        NA      NA   NA      NA      NA      NA 114880000
#&gt; 3    32.742    32.292        NA      NA   NA      NA      NA      NA 236450000
#&gt; 4    33.185    32.742    32.292      NA   NA      NA      NA      NA 302480000
#&gt; 5    33.624    33.185    32.742      NA   NA      NA      NA      NA 370250000
#&gt; 6    34.060    33.624    33.185      NA   NA      NA      NA      NA 338270000
#&gt;         ODA    L1.ODA    L2.ODA    L3.ODA
#&gt; 1 114440000        NA        NA        NA
#&gt; 2 233350000 114440000        NA        NA
#&gt; 3 114880000 233350000 114440000        NA
#&gt; 4 236450000 114880000 233350000 114440000
#&gt; 5 302480000 236450000 114880000 233350000
#&gt; 6 370250000 302480000 236450000 114880000</div><div class='input'><span class='co'># Computing the 1- and 10-year first differences</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>D</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year D1.PCGDP L10D1.PCGDP D1.LIFEEX L10D1.LIFEEX D1.GINI
#&gt; 1 Afghanistan 1960       NA          NA        NA           NA      NA
#&gt; 2 Afghanistan 1961       NA          NA     0.450           NA      NA
#&gt; 3 Afghanistan 1962       NA          NA     0.443           NA      NA
#&gt; 4 Afghanistan 1963       NA          NA     0.439           NA      NA
#&gt; 5 Afghanistan 1964       NA          NA     0.436           NA      NA
#&gt; 6 Afghanistan 1965       NA          NA     0.435           NA      NA
#&gt;   L10D1.GINI     D1.ODA L10D1.ODA
#&gt; 1         NA         NA        NA
#&gt; 2         NA  118910000        NA
#&gt; 3         NA -118470000        NA
#&gt; 4         NA  121570000        NA
#&gt; 5         NA   66030000        NA
#&gt; 6         NA   67770000        NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>D</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># ..first and second differences</span>
</div><div class='output co'>#&gt;       country year D1.PCGDP D2.PCGDP L10D1.PCGDP L10D2.PCGDP D1.LIFEEX
#&gt; 1 Afghanistan 1960       NA       NA          NA          NA        NA
#&gt; 2 Afghanistan 1961       NA       NA          NA          NA     0.450
#&gt; 3 Afghanistan 1962       NA       NA          NA          NA     0.443
#&gt; 4 Afghanistan 1963       NA       NA          NA          NA     0.439
#&gt; 5 Afghanistan 1964       NA       NA          NA          NA     0.436
#&gt; 6 Afghanistan 1965       NA       NA          NA          NA     0.435
#&gt;   D2.LIFEEX L10D1.LIFEEX L10D2.LIFEEX D1.GINI D2.GINI L10D1.GINI L10D2.GINI
#&gt; 1        NA           NA           NA      NA      NA         NA         NA
#&gt; 2        NA           NA           NA      NA      NA         NA         NA
#&gt; 3    -0.007           NA           NA      NA      NA         NA         NA
#&gt; 4    -0.004           NA           NA      NA      NA         NA         NA
#&gt; 5    -0.003           NA           NA      NA      NA         NA         NA
#&gt; 6    -0.001           NA           NA      NA      NA         NA         NA
#&gt;       D1.ODA     D2.ODA L10D1.ODA L10D2.ODA
#&gt; 1         NA         NA        NA        NA
#&gt; 2  118910000         NA        NA        NA
#&gt; 3 -118470000 -237380000        NA        NA
#&gt; 4  121570000  240040000        NA        NA
#&gt; 5   66030000  -55540000        NA        NA
#&gt; 6   67770000    1740000        NA        NA</div><div class='input'><span class='co'># Computing the 1- and 10-year growth rates</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year G1.PCGDP L10G1.PCGDP G1.LIFEEX L10G1.LIFEEX G1.GINI
#&gt; 1 Afghanistan 1960       NA          NA        NA           NA      NA
#&gt; 2 Afghanistan 1961       NA          NA  1.393534           NA      NA
#&gt; 3 Afghanistan 1962       NA          NA  1.353002           NA      NA
#&gt; 4 Afghanistan 1963       NA          NA  1.322887           NA      NA
#&gt; 5 Afghanistan 1964       NA          NA  1.296693           NA      NA
#&gt; 6 Afghanistan 1965       NA          NA  1.277158           NA      NA
#&gt;   L10G1.GINI    G1.ODA L10G1.ODA
#&gt; 1         NA        NA        NA
#&gt; 2         NA 103.90598        NA
#&gt; 3         NA -50.76923        NA
#&gt; 4         NA 105.82347        NA
#&gt; 5         NA  27.92557        NA
#&gt; 6         NA  22.40479        NA</div><div class='input'><span class='co'># Adding growth rate variables to dataset</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, keep.ids <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='st'>"G1."</span>, regex <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='cn'>NULL</span> <span class='co'># Deleting again</span>
 
<span class='co'># These operators can conveniently be used in regression formulas:</span>
<span class='co'># Using a Mundlak (1978) procedure to estimate the effect of OECD on LIFEEX, controlling for PCGDP</span>
<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>OECD</span> <span class='op'>+</span> <span class='fu'><a href='fbetween, fwithin.html'>B</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span>, <span class='va'>country</span><span class='op'>)</span>,
   <span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>OECD</span>, <span class='va'>PCGDP</span>, <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>na_omit</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; lm(formula = LIFEEX ~ log(PCGDP) + OECD + B(log(PCGDP), country), 
#&gt;     data = wlddev %&gt;% fselect(country, OECD, PCGDP, LIFEEX) %&gt;% 
#&gt;         na_omit)
#&gt; 
#&gt; Coefficients:
#&gt;            (Intercept)              log(PCGDP)                OECDTRUE  
#&gt;              19.138156                7.984832               -0.003428  
#&gt; B(log(PCGDP), country)  
#&gt;              -2.432400  
#&gt; </div><div class='input'>
<span class='co'># Adding 10-year lagged life-expectancy to allow for some convergence effects (dynamic panel model)</span>
<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>LIFEEX</span>, <span class='fl'>10</span>, <span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>OECD</span> <span class='op'>+</span> <span class='fu'><a href='fbetween, fwithin.html'>B</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span>, <span class='va'>country</span><span class='op'>)</span>,
   <span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>OECD</span>, <span class='va'>PCGDP</span>, <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>na_omit</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Panel-lag computed without timevar: Assuming ordered data</span></div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; lm(formula = LIFEEX ~ L(LIFEEX, 10, country) + log(PCGDP) + OECD + 
#&gt;     B(log(PCGDP), country), data = wlddev %&gt;% fselect(country, 
#&gt;     OECD, PCGDP, LIFEEX) %&gt;% na_omit)
#&gt; 
#&gt; Coefficients:
#&gt;            (Intercept)  L(LIFEEX, 10, country)              log(PCGDP)  
#&gt;                 8.9683                  0.8693                  0.6945  
#&gt;               OECDTRUE  B(log(PCGDP), country)  
#&gt;                 0.4224                 -0.4215  
#&gt; </div><div class='input'>
<span class='co'># Tranformation functions and operators also support plm panel data classes:</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://cran.r-project.org/package=plm'>plm</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘plm’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:dplyr’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    between, lead</span></div><div class='input'><span class='va'>pwlddev</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/plm/man/pdata.frame.html'>pdata.frame</a></span><span class='op'>(</span><span class='va'>wlddev</span>, index <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"country"</span>,<span class='st'>"year"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Country-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year W.PCGDP  W.LIFEEX W.GINI       W.ODA
#&gt; Afghanistan-1960 Afghanistan 1960      NA -15.59016     NA -1236633448
#&gt; Afghanistan-1961 Afghanistan 1961      NA -15.14016     NA -1117723448
#&gt; Afghanistan-1962 Afghanistan 1962      NA -14.69716     NA -1236193448
#&gt; Afghanistan-1963 Afghanistan 1963      NA -14.25816     NA -1114623448
#&gt; Afghanistan-1964 Afghanistan 1964      NA -13.82216     NA -1048593448
#&gt; Afghanistan-1965 Afghanistan 1965      NA -13.38716     NA  -980823448</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span>, effect <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>          <span class='co'># Time-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, effect <span class='op'>=</span> <span class='fl'>2</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year W.PCGDP  W.LIFEEX W.GINI      W.ODA
#&gt; Afghanistan-1960 Afghanistan 1960      NA -21.61149     NA -115000091
#&gt; Afghanistan-1961 Afghanistan 1961      NA -21.72388     NA  -24104615
#&gt; Afghanistan-1962 Afghanistan 1962      NA -21.66532     NA -171946606
#&gt; Afghanistan-1963 Afghanistan 1963      NA -21.57444     NA  -56127931
#&gt; Afghanistan-1964 Afghanistan 1964      NA -21.60677     NA   -3817080
#&gt; Afghanistan-1965 Afghanistan 1965      NA -21.63645     NA   39903717</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                    <span class='co'># Country- and time-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                  HDW.PCGDP HDW.LIFEEX HDW.GINI     HDW.ODA
#&gt; Afghanistan-1960        NA  -5.979000       NA  -982621508
#&gt; Afghanistan-1961        NA  -6.026522       NA  -913532600
#&gt; Afghanistan-1962        NA  -5.967962       NA -1041389798
#&gt; Afghanistan-1963        NA  -5.941946       NA  -942471963
#&gt; Afghanistan-1964        NA  -5.974282       NA  -885902071
#&gt; Afghanistan-1965        NA  -5.949030       NA  -843600211</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                    <span class='co'># Standardizing by country</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA
#&gt; Afghanistan-1960 Afghanistan 1960        NA  -1.551093       NA -0.6132859
#&gt; Afghanistan-1961 Afghanistan 1961        NA  -1.506322       NA -0.5543146
#&gt; Afghanistan-1962 Afghanistan 1962        NA  -1.462247       NA -0.6130676
#&gt; Afghanistan-1963 Afghanistan 1963        NA  -1.418570       NA -0.5527772
#&gt; Afghanistan-1964 Afghanistan 1964        NA  -1.375191       NA -0.5200308
#&gt; Afghanistan-1965 Afghanistan 1965        NA  -1.331912       NA -0.4864215</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># Panel-lags</span>
</div><div class='output co'>#&gt;                  F1 -- L1 L2 L3
#&gt; Afghanistan-1960 NA NA NA NA NA
#&gt; Afghanistan-1961 NA NA NA NA NA
#&gt; Afghanistan-1962 NA NA NA NA NA
#&gt; Afghanistan-1963 NA NA NA NA NA
#&gt; Afghanistan-1964 NA NA NA NA NA
#&gt; Afghanistan-1965 NA NA NA NA NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP L3.PCGDP
#&gt; Afghanistan-1960 Afghanistan 1960       NA    NA       NA       NA       NA
#&gt; Afghanistan-1961 Afghanistan 1961       NA    NA       NA       NA       NA
#&gt; Afghanistan-1962 Afghanistan 1962       NA    NA       NA       NA       NA
#&gt; Afghanistan-1963 Afghanistan 1963       NA    NA       NA       NA       NA
#&gt; Afghanistan-1964 Afghanistan 1964       NA    NA       NA       NA       NA
#&gt; Afghanistan-1965 Afghanistan 1965       NA    NA       NA       NA       NA
#&gt;                  F1.LIFEEX LIFEEX L1.LIFEEX L2.LIFEEX L3.LIFEEX F1.GINI GINI
#&gt; Afghanistan-1960    32.742 32.292        NA        NA        NA      NA   NA
#&gt; Afghanistan-1961    33.185 32.742    32.292        NA        NA      NA   NA
#&gt; Afghanistan-1962    33.624 33.185    32.742    32.292        NA      NA   NA
#&gt; Afghanistan-1963    34.060 33.624    33.185    32.742    32.292      NA   NA
#&gt; Afghanistan-1964    34.495 34.060    33.624    33.185    32.742      NA   NA
#&gt; Afghanistan-1965    34.928 34.495    34.060    33.624    33.185      NA   NA
#&gt;                  L1.GINI L2.GINI L3.GINI    F1.ODA       ODA    L1.ODA
#&gt; Afghanistan-1960      NA      NA      NA 233350000 114440000        NA
#&gt; Afghanistan-1961      NA      NA      NA 114880000 233350000 114440000
#&gt; Afghanistan-1962      NA      NA      NA 236450000 114880000 233350000
#&gt; Afghanistan-1963      NA      NA      NA 302480000 236450000 114880000
#&gt; Afghanistan-1964      NA      NA      NA 370250000 302480000 236450000
#&gt; Afghanistan-1965      NA      NA      NA 338270000 370250000 302480000
#&gt;                     L2.ODA    L3.ODA
#&gt; Afghanistan-1960        NA        NA
#&gt; Afghanistan-1961        NA        NA
#&gt; Afghanistan-1962 114440000        NA
#&gt; Afghanistan-1963 233350000 114440000
#&gt; Afghanistan-1964 114880000 233350000
#&gt; Afghanistan-1965 236450000 114880000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Panel-Growth rates</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year G1.PCGDP G1.LIFEEX G1.GINI    G1.ODA
#&gt; Afghanistan-1960 Afghanistan 1960       NA        NA      NA        NA
#&gt; Afghanistan-1961 Afghanistan 1961       NA  1.393534      NA 103.90598
#&gt; Afghanistan-1962 Afghanistan 1962       NA  1.353002      NA -50.76923
#&gt; Afghanistan-1963 Afghanistan 1963       NA  1.322887      NA 105.82347
#&gt; Afghanistan-1964 Afghanistan 1964       NA  1.296693      NA  27.92557
#&gt; Afghanistan-1965 Afghanistan 1965       NA  1.277158      NA  22.40479</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>)</span>

<span class='co'># Remove all objects used in this example section</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>v</span>, <span class='va'>d</span>, <span class='va'>w</span>, <span class='va'>f</span>, <span class='va'>f1</span>, <span class='va'>f2</span>, <span class='va'>g</span>, <span class='va'>mtcarsM</span>, <span class='va'>sds</span>, <span class='va'>series</span>, <span class='va'>wlddev</span><span class='op'>)</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


