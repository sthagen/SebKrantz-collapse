<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head>
  <link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>collapse Package Options — collapse-options • collapse</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="collapse Package Options — collapse-options"><meta property="og:description" content="

option(&quot;collapse_unused_arg_action&quot;) regulates how generic functions (such as the Fast Statistical Functions) in the package react when an unknown argument is passed to a method. The default action is &quot;warning&quot; which issues a warning. Other options are &quot;error&quot;, &quot;message&quot; or &quot;none&quot;, whereby the latter enables silent swallowing of such arguments.
option(&quot;collapse_mask&quot;) can be used to create additional functions in the collapse namespace when loading the package, which will mask some existing base R and dplyr functions. In particular, collapse provides a large number of functions that start with 'f' e.g. fsubset, ftransform, fdroplevels etc.. Specifying options(collapse_mask = c(&quot;fsubset&quot;, &quot;ftransform&quot;, &quot;fdroplevels&quot;)) before loading the package will make additional functions subset, transform, and droplevels available to the user, and mask the corresponding base R functions when the package is attached. In general, all functions starting with 'f' can be passed to the option. There are also a couple of keywords that you can specify to add groups of functions:
&quot;manip&quot; adds data manipulation functions: fsubset, ftransform, ftransform&lt;-, ftransformv, fcompute, fcomputev, fselect, fselect&lt;-, fgroup_by, fgroup_vars, fungroup, fsummarise, fmutate, frename, findex_by, findex
&quot;helper&quot; adds the functions: fdroplevels, finteraction, funique, fnunique, frange, fnlevels, fnrow and fncol.
&quot;fast-fun&quot; adds the functions contained in the macro: .FAST_FUN.
&quot;fast-stat-fun&quot; adds the functions contained in the macro: .FAST_STAT_FUN.
&quot;fast-trfm-fun&quot; adds the functions contained in: setdiff(.FAST_FUN, .FAST_STAT_FUN).
&quot;all&quot; turns on all of the above, and additionally exports a function n() for use in summarise and mutate.
Note that none of these options will impact internal collapse code, but they may change the way your programs run. &quot;manip&quot; is probably the safest option to start with.
Specifying &quot;fast-fun&quot;, &quot;fast-stat-fun&quot;, &quot;fast-trfm-fun&quot; or &quot;all&quot; are ambitious as they replace basic R functions like sum and max, introducing collapse's na.rm = TRUE default and different behavior for matrices and data frames. These options also change some internal macros so that base R functions like sum or max called inside fsummarise, fmutate or collap will also receive vectorized execution. In other words, if you put options(collapse_mask = &quot;all&quot;) before loading the package, and you have a collapse-compatible line of dplyr code like wlddev |&amp;gt; group_by(region, income) |&amp;gt; summarise(across(PCGDP:POP, sum)), this will now receive fully optimized execution. Note however that because of collapse's na.rm = TRUE default, the result will be different unless you add na.rm = FALSE.
In General, this option is for your convenience, if you want to write visually more appealing code or you want to translate existing dplyr codes to collapse. Use with care! Note that the option takes effect upon loading the package (code is in the .onLoad function), not upon attaching it, so it needs to be set before any function from the package is accessed in any way by any code you run. A safe way to enable it is by using a .Rprofile file in your user or project directory (see also here or here, the user-level file is located at file.path(Sys.getenv(&quot;HOME&quot;), &quot;.Rprofile&quot;) and can be edited using file.edit(Sys.getenv(&quot;HOME&quot;), &quot;.Rprofile&quot;)), or by using a .fastverse configuration file in the project directory.




option(&quot;collapse_F_to_FALSE&quot;), if set to TRUE, replaces the lead operator F in the package with a value FALSE when loading the package, which solves issues arising from the use of F as a shortcut for FALSE in R codes when collapse is attached. Note that F is just a value in the base package namespace, and it should NOT be used in production codes, precisely because users can overwrite it by assignment. An alternative solution to invoking this option would also just be assigning a value F &lt;- FALSE in your global environment.


"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" class="external-link">Blog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/collapse_R" class="external-link">
    <span class="fa fa-twitter"></span>

  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1><em>collapse</em> Package Options</h1>

    <div class="hidden name"><code>collapse-options.Rd</code></div>
    </div>

    <div class="ref-description">

<ul><li><p><code>option("collapse_unused_arg_action")</code> regulates how generic functions (such as the <a href="fast-statistical-functions.html">Fast Statistical Functions</a>) in the package react when an unknown argument is passed to a method. The default action is <code>"warning"</code> which issues a warning. Other options are <code>"error"</code>, <code>"message"</code> or <code>"none"</code>, whereby the latter enables silent swallowing of such arguments.</p></li>
<li><p><code>option("collapse_mask")</code> can be used to create additional functions in the <em>collapse</em> namespace when loading the package, which will mask some existing base R and <em>dplyr</em> functions. In particular, <em>collapse</em> provides a large number of functions that start with 'f' e.g. <code>fsubset</code>, <code>ftransform</code>, <code>fdroplevels</code> etc.. Specifying <code>options(collapse_mask = c("fsubset", "ftransform", "fdroplevels"))</code> before loading the package will make additional functions <code>subset</code>, <code>transform</code>, and <code>droplevels</code> available to the user, and mask the corresponding base R functions when the package is attached. In general, all functions starting with 'f' can be passed to the option. There are also a couple of keywords that you can specify to add groups of functions:</p><ul><li><p><code>"manip"</code> adds data manipulation functions: <code>fsubset, ftransform, ftransform&lt;-, ftransformv, fcompute, fcomputev, fselect, fselect&lt;-, fgroup_by, fgroup_vars, fungroup, fsummarise, fmutate, frename, findex_by, findex</code></p></li>
<li><p><code>"helper"</code> adds the functions: <code>fdroplevels</code>, <code>finteraction</code>, <code>funique</code>, <code>fnunique</code>, <code>frange</code>, <code>fnlevels</code>, <code>fnrow</code> and <code>fncol</code>. <!-- % fdim not because of infinite recursion --></p></li>
<li><p><code>"fast-fun"</code> adds the functions contained in the macro: <code>.FAST_FUN</code>.</p></li>
<li><p><code>"fast-stat-fun"</code> adds the functions contained in the macro: <code>.FAST_STAT_FUN</code>.</p></li>
<li><p><code>"fast-trfm-fun"</code> adds the functions contained in: <code>setdiff(.FAST_FUN, .FAST_STAT_FUN)</code>.</p></li>
<li><p><code>"all"</code> turns on all of the above, and additionally exports a function <code>n()</code> for use in <code>summarise</code> and <code>mutate</code>.</p></li>
</ul><p>Note that none of these options will impact internal <em>collapse</em> code, but they may change the way your programs run. <code>"manip"</code> is probably the safest option to start with.
Specifying <code>"fast-fun"</code>, <code>"fast-stat-fun"</code>, <code>"fast-trfm-fun"</code> or <code>"all"</code> are ambitious as they replace basic R functions like <code>sum</code> and <code>max</code>, introducing <em>collapse</em>'s <code>na.rm = TRUE</code> default and different behavior for matrices and data frames. These options also change some internal macros so that base R functions like <code>sum</code> or <code>max</code> called inside <code>fsummarise</code>, <code>fmutate</code> or <code>collap</code> will also receive vectorized execution. In other words, if you put <code>options(collapse_mask = "all")</code> before loading the package, and you have a collapse-compatible line of <em>dplyr</em> code like <code>wlddev |&gt; group_by(region, income) |&gt; summarise(across(PCGDP:POP, sum))</code>, this will now receive fully optimized execution. Note however that because of <code>collapse</code>'s <code>na.rm = TRUE</code> default, the result will be different unless you add <code>na.rm = FALSE</code>.</p>
<p>In General, this option is for your convenience, if you want to write visually more appealing code or you want to translate existing <em>dplyr</em> codes to <em>collapse</em>. Use with care! <b>Note</b> that the option takes effect upon loading the package (code is in the <code>.onLoad</code> function), not upon attaching it, so it needs to be set before any function from the package is accessed in any way by any code you run. A safe way to enable it is by using a <code><a href="https://rdrr.io/r/base/Startup.html" class="external-link">.Rprofile</a></code> file in your user or project directory (see also <a href="https://www.statmethods.net/interface/customizing.html" class="external-link">here</a> or <a href="https://support.rstudio.com/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf" class="external-link">here</a>, the user-level file is located at <code>file.path(Sys.getenv("HOME"), ".Rprofile")</code> and can be edited using <code>file.edit(Sys.getenv("HOME"), ".Rprofile")</code>), or by using a <a href="https://fastverse.github.io/fastverse/articles/fastverse_intro.html#custom-fastverse-configurations-for-projects" class="external-link"><code>.fastverse</code></a> configuration file in the project directory.</p>


<p><!-- %Thus for production code I generally recommend not using it, unless you can ensure that the option is always set before any code is run, and that \emph{collapse} is always attached after \emph{dplyr}. --></p>
<p><!-- % Note also that I have not yet investigated in much detail the impact on internal codes of replacing basic R functions like \code{sum}, \code{min} and \code{max} in the package. In terms of unit testing it seems to be quite ok (a number of tests break where I compare fast statistical functions to base functions because of the \code{na.rm = TRUE} default, but otherwise no major issues arise). In general, while this option is cool and can be of great help in translating existing \emph{dplyr} codes to \emph{collapse}, it is experimental and not the best idea for new production code. --></p></li>
<li><p><code>option("collapse_F_to_FALSE")</code>, if set to <code>TRUE</code>, replaces the lead operator <code>F</code> in the package with a value <code>FALSE</code> when loading the package, which solves issues arising from the use of <code>F</code> as a shortcut for <code>FALSE</code> in R codes when <em>collapse</em> is attached. Note that <code>F</code> is just a value in the <em>base</em> package namespace, and it should NOT be used in production codes, precisely because users can overwrite it by assignment. An alternative solution to invoking this option would also just be assigning a value <code>F &lt;- FALSE</code> in your global environment.</p>
<p><!-- % \item \code{option("collapse_DT_alloccol")} sets how many empty columns \emph{collapse} data manipulation functions like \code{ftransform} allocate when taking a shallow copy of \emph{data.table}'s. The default is \code{100L}. Note that the \emph{data.table} default is \code{getOption("datatable.alloccol") = 1024L}. I chose a lower default because shallow copies are taken by each data manipulation function if you manipulate \emph{data.table}'s with collapse, and the cost increases with the number of overallocated columns. With 100 columns, the cost is 2-5 microseconds per copy. --></p></li>
</ul></div>


    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="index.html">Collapse Overview</a>, <a href="collapse-package.html">collapse-package</a></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>






  </body></html>

