<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head><link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fast (Grouped, Weighted) Scaling and Centering of Matrix-like Objects — fscale • collapse</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fast (Grouped, Weighted) Scaling and Centering of Matrix-like Objects — fscale" />
<meta property="og:description" content="fscale is a generic function to efficiently standardize (scale and center) data. STD is a wrapper around fscale representing the 'standardization operator', with more options than fscale when applied to matrices and data frames.  Standardization can be simple or groupwise, ordinary or weighted. Arbitrary target means and standard deviations can be set, with special options for grouped scaling and centering. It is also possible to scale data without centering i.e. perform mean-preserving scaling.
Note: For centering without scaling see fwithin/W. For simple not mean-preserving scaling use fsd(..., TRA = &quot;/&quot;). To sweep pre-computed means and scale-factors out of data see TRA." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" target="_blank">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/collapse_R" target="_blank">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" target="_blank">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast (Grouped, Weighted) Scaling and Centering of Matrix-like Objects</h1>
    
    <div class="hidden name"><code>fscale.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>fscale</code> is a generic function to efficiently standardize (scale and center) data. <code>STD</code> is a wrapper around <code>fscale</code> representing the 'standardization operator', with more options than <code>fscale</code> when applied to matrices and data frames.  Standardization can be simple or groupwise, ordinary or weighted. Arbitrary target means and standard deviations can be set, with special options for grouped scaling and centering. It is also possible to scale data without centering i.e. perform mean-preserving scaling.</p>
<p><em>Note</em>: For centering without scaling see <code><a href='fbetween, fwithin.html'>fwithin/W</a></code>. For simple not mean-preserving scaling use <code><a href='fvar, fsd.html'>fsd(..., TRA = "/")</a></code>. To sweep pre-computed means and scale-factors out of data see <code><a href='TRA.html'>TRA</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>fscale</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>
   <span class='fu'>STD</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>fscale</span><span class='op'>(</span><span class='va'>x</span>, g <span class='op'>=</span> <span class='cn'>NULL</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for default</span>
<span class='fu'>STD</span><span class='op'>(</span><span class='va'>x</span>, g <span class='op'>=</span> <span class='cn'>NULL</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for matrix</span>
<span class='fu'>fscale</span><span class='op'>(</span><span class='va'>x</span>, g <span class='op'>=</span> <span class='cn'>NULL</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for matrix</span>
<span class='fu'>STD</span><span class='op'>(</span><span class='va'>x</span>, g <span class='op'>=</span> <span class='cn'>NULL</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>,
    stub <span class='op'>=</span> <span class='st'>"STD."</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for data.frame</span>
<span class='fu'>fscale</span><span class='op'>(</span><span class='va'>x</span>, g <span class='op'>=</span> <span class='cn'>NULL</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for data.frame</span>
<span class='fu'>STD</span><span class='op'>(</span><span class='va'>x</span>, by <span class='op'>=</span> <span class='cn'>NULL</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, cols <span class='op'>=</span> <span class='va'>is.numeric</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>,
    mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, stub <span class='op'>=</span> <span class='st'>"STD."</span>, keep.by <span class='op'>=</span> <span class='cn'>TRUE</span>, keep.w <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># Methods for compatibility with plm:</span>

<span class='co'># S3 method for pseries</span>
<span class='fu'>fscale</span><span class='op'>(</span><span class='va'>x</span>, effect <span class='op'>=</span> <span class='fl'>1L</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for pseries</span>
<span class='fu'>STD</span><span class='op'>(</span><span class='va'>x</span>, effect <span class='op'>=</span> <span class='fl'>1L</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for pdata.frame</span>
<span class='fu'>fscale</span><span class='op'>(</span><span class='va'>x</span>, effect <span class='op'>=</span> <span class='fl'>1L</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for pdata.frame</span>
<span class='fu'>STD</span><span class='op'>(</span><span class='va'>x</span>, effect <span class='op'>=</span> <span class='fl'>1L</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, cols <span class='op'>=</span> <span class='va'>is.numeric</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>,
    mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>, stub <span class='op'>=</span> <span class='st'>"STD."</span>, keep.ids <span class='op'>=</span> <span class='cn'>TRUE</span>, keep.w <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># Methods for grouped data frame / compatibility with dplyr:</span>

<span class='co'># S3 method for grouped_df</span>
<span class='fu'>fscale</span><span class='op'>(</span><span class='va'>x</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>,
       keep.group_vars <span class='op'>=</span> <span class='cn'>TRUE</span>, keep.w <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for grouped_df</span>
<span class='fu'>STD</span><span class='op'>(</span><span class='va'>x</span>, w <span class='op'>=</span> <span class='cn'>NULL</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>, mean <span class='op'>=</span> <span class='fl'>0</span>, sd <span class='op'>=</span> <span class='fl'>1</span>,
    stub <span class='op'>=</span> <span class='st'>"STD."</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>TRUE</span>, keep.w <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a numeric vector, matrix, data frame, panel series (<code><a href='https://rdrr.io/pkg/plm/man/pseries.html'>plm::pseries</a></code>), panel data frame (<code><a href='https://rdrr.io/pkg/plm/man/pdata.frame.html'>plm::pdata.frame</a></code>) or grouped data frame (class 'grouped_df').</p></td>
    </tr>
    <tr>
      <th>g</th>
      <td><p>a factor, <code><a href='GRP, fgroup_by.html'>GRP</a></code> object, atomic vector (internally converted to factor) or a list of vectors / factors (internally converted to a <code><a href='GRP, fgroup_by.html'>GRP</a></code> object) used to group <code>x</code>.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p><em>STD data.frame method</em>: Same as <code>g</code>, but also allows one- or two-sided formulas i.e. <code>~ group1</code> or <code>var1 + var2 ~ group1 + group2</code>. See Examples.</p></td>
    </tr>
    <tr>
      <th>cols</th>
      <td><p><em>data.frame method</em>: Select columns to scale using a function, column names, indices or a logical vector. Default: All numeric variables. <em>Note</em>: <code>cols</code> is ignored if a two-sided formula is passed to <code>by</code>.</p></td>
    </tr>
    <tr>
      <th>w</th>
      <td><p>a numeric vector of (non-negative) weights. <code>STD</code> data frame and <code>pdata.frame</code> methods also allow a one-sided formula i.e. <code>~ weightcol</code>. The <code>grouped_df</code> (<em>dplyr</em>) method supports lazy-evaluation. See Examples.</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>logical. Skip missing values in <code>x</code> or <code>w</code> when computing means and sd's.</p></td>
    </tr>
    <tr>
      <th>effect</th>
      <td><p><em>plm</em> methods: Select which panel identifier should be used as group-id. 1L takes the first variable in the <code><a href='https://rdrr.io/pkg/plm/man/index.plm.html'>plm::index</a></code>, 2L the second etc.. Index variables can also be called by name using a character string. More than one variable can be supplied.</p></td>
    </tr>
    <tr>
      <th>stub</th>
      <td><p>a prefix or stub to rename all transformed columns. <code>FALSE</code> will not rename columns.</p></td>
    </tr>
    <tr>
      <th>mean</th>
      <td><p>the mean to center on (default is 0). If <code>mean = FALSE</code>, no centering will be performed. In that case the scaling is mean-preserving. A numeric value different from 0 (i.e. <code>mean = 5</code>) will be added to the data after subtracting out the mean(s), such that the data will have a mean of 5. A special option when performing grouped scaling and centering is <code>mean = "overall.mean"</code>. In that case the overall mean of the data will be added after subtracting out group means.</p></td>
    </tr>
    <tr>
      <th>sd</th>
      <td><p>the standard deviation to scale the data to (default is 1). A numeric value different from 0 (i.e. <code>sd = 3</code>) will scale the data to have a standard deviation  of 3. A special option when performing grouped scaling is <code>sd = "within.sd"</code>. In that case the within standard deviation (= the standard deviation of the group-centered series) will be calculated and applied to each group. The results is that the variance of the data within each group is harmonized without forcing a certain variance (such as 1).</p></td>
    </tr>
    <tr>
      <th>keep.by, keep.ids, keep.group_vars</th>
      <td><p><em>data.frame, pdata.frame and grouped_df methods</em>: Logical. Retain grouping / panel-identifier columns in the output. For <code>STD.data.frame</code> this only works if grouping variables were passed in a formula.</p></td>
    </tr>
    <tr>
      <th>keep.w</th>
      <td><p><em>data.frame, pdata.frame and grouped_df methods</em>: Logical. Retain column containing the weights in the output. Only works if <code>w</code> is passed as formula / lazy-expression.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments to be passed to or from other methods.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If <code>g = NULL</code>, <code>fscale</code> by default (column-wise) subtracts the mean or weighted mean (if <code>w</code> is supplied) from all data points in <code>x</code>, and then divides this difference by the standard deviation or frequency-weighted standard deviation (if <code>w</code> is supplied). The result is that all columns in <code>x</code> will have mean 0 and standard deviation 1. Alternatively, data can be scaled to have a mean of <code>mean</code> and a standard deviation of <code>sd</code>. If <code>mean = FALSE</code> the data is only scaled (not centered) such that the mean of the data is preserved. <br /></p>
<p>Means and standard deviations are computed using Welford's numerically stable online algorithm.</p>
<p>With groups supplied to <code>g</code>, this standardizing becomes groupwise, so that in each group (in each column) the data points will have mean <code>mean</code> and standard deviation <code>sd</code>. Naturally if <code>mean = FALSE</code> then each group is just scaled and the mean is preserved. For centering without scaling see <code><a href='fbetween, fwithin.html'>fwithin</a></code>.</p>
<p>If <code>na.rm = FALSE</code> and a <code>NA</code> or <code>NaN</code> is encountered, the mean and sd for that group will be <code>NA</code>, and all data points belonging to that group will also be <code>NA</code> in the output.</p>
<p>If <code>na.rm = TRUE</code>, means and sd's are computed (column-wise) on the available data points, and also the weight vector can have missing values. In that case, the weighted mean an sd are computed on (column-wise) <code><a href='https://rdrr.io/r/stats/complete.cases.html'>complete.cases(x, w)</a></code>, and <code>x</code> is scaled using these statistics. <em>Note</em> that <code>fscale</code> will not insert a missing value in <code>x</code> if the weight for that value is missing, rather, that value will be scaled using a weighted mean and standard-deviated computed without itself! (The intention here is that a few (randomly) missing weights shouldn't break the computation when <code>na.rm = TRUE</code>, but it is not meant for weight vectors with many missing values. If you don't like this behavior, you should prepare your data using <code>x[is.na(w), ] &lt;- NA</code>, or impute your weight vector for non-missing <code>x</code>).</p>
<p>Special options for grouped scaling are <code>mean = "overall.mean"</code> and <code>sd = "within.sd"</code>. The former group-centers vectors on the overall mean of the data (see <code><a href='fbetween, fwithin.html'>fwithin</a></code> for more details) and the latter scales the data in each group to have the within-group standard deviation (= the standard deviation of the group-centered data). Thus scaling a grouped vector with options <code>mean = "overall.mean"</code> and <code>sd = "within.sd"</code> amounts to removing all differences in the mean and standard deviations between these groups. In weighted computations, <code>mean = "overall.mean"</code> will subtract weighted group-means from the data and add the overall weighted mean of the data, whereas <code>sd = "within.sd"</code> will compute the weighted within- standard deviation and apply it to each group.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>x</code> standardized (mean = mean, standard deviation = sd), grouped by <code>g/by</code>, weighted with <code>w</code>. See Details.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='fbetween, fwithin.html'>fwithin</a></code>, <code><a href='fvar, fsd.html'>fsd</a></code>, <code><a href='TRA.html'>TRA</a></code>, <a href='fast-statistical-functions.html'>Fast Statistical Functions</a>, <a href='data-transformations.html'>Data Transformations</a>, <a href='index.html'>Collapse Overview</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Simple Scaling &amp; Centering / Standardizing</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>fscale</span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span><span class='op'>)</span>               <span class='co'># Doesn't rename columns</span>
</div><div class='output co'>#&gt;                          mpg        cyl        disp         hp       drat
#&gt; Mazda RX4          0.1508848 -0.1049878 -0.57061982 -0.5350928  0.5675137
#&gt; Mazda RX4 Wag      0.1508848 -0.1049878 -0.57061982 -0.5350928  0.5675137
#&gt; Datsun 710         0.4495434 -1.2248578 -0.99018209 -0.7830405  0.4739996
#&gt; Hornet 4 Drive     0.2172534 -0.1049878  0.22009369 -0.5350928 -0.9661175
#&gt; Hornet Sportabout -0.2307345  1.0148821  1.04308123  0.4129422 -0.8351978
#&gt; Valiant           -0.3302874 -0.1049878 -0.04616698 -0.6080186 -1.5646078
#&gt;                             wt       qsec         vs         am       gear
#&gt; Mazda RX4         -0.610399567 -0.7771651 -0.8680278  1.1899014  0.4235542
#&gt; Mazda RX4 Wag     -0.349785269 -0.4637808 -0.8680278  1.1899014  0.4235542
#&gt; Datsun 710        -0.917004624  0.4260068  1.1160357  1.1899014  0.4235542
#&gt; Hornet 4 Drive    -0.002299538  0.8904872  1.1160357 -0.8141431 -0.9318192
#&gt; Hornet Sportabout  0.227654255 -0.4637808 -0.8680278 -0.8141431 -0.9318192
#&gt; Valiant            0.248094592  1.3269868  1.1160357 -0.8141431 -0.9318192
#&gt;                         carb
#&gt; Mazda RX4          0.7352031
#&gt; Mazda RX4 Wag      0.7352031
#&gt; Datsun 710        -1.1221521
#&gt; Hornet 4 Drive    -1.1221521
#&gt; Hornet Sportabout -0.5030337
#&gt; Valiant           -1.1221521</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>STD</span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span><span class='op'>)</span>                  <span class='co'># By default adds a prefix</span>
</div><div class='output co'>#&gt;                      STD.mpg    STD.cyl    STD.disp     STD.hp   STD.drat
#&gt; Mazda RX4          0.1508848 -0.1049878 -0.57061982 -0.5350928  0.5675137
#&gt; Mazda RX4 Wag      0.1508848 -0.1049878 -0.57061982 -0.5350928  0.5675137
#&gt; Datsun 710         0.4495434 -1.2248578 -0.99018209 -0.7830405  0.4739996
#&gt; Hornet 4 Drive     0.2172534 -0.1049878  0.22009369 -0.5350928 -0.9661175
#&gt; Hornet Sportabout -0.2307345  1.0148821  1.04308123  0.4129422 -0.8351978
#&gt; Valiant           -0.3302874 -0.1049878 -0.04616698 -0.6080186 -1.5646078
#&gt;                         STD.wt   STD.qsec     STD.vs     STD.am   STD.gear
#&gt; Mazda RX4         -0.610399567 -0.7771651 -0.8680278  1.1899014  0.4235542
#&gt; Mazda RX4 Wag     -0.349785269 -0.4637808 -0.8680278  1.1899014  0.4235542
#&gt; Datsun 710        -0.917004624  0.4260068  1.1160357  1.1899014  0.4235542
#&gt; Hornet 4 Drive    -0.002299538  0.8904872  1.1160357 -0.8141431 -0.9318192
#&gt; Hornet Sportabout  0.227654255 -0.4637808 -0.8680278 -0.8141431 -0.9318192
#&gt; Valiant            0.248094592  1.3269868  1.1160357 -0.8141431 -0.9318192
#&gt;                     STD.carb
#&gt; Mazda RX4          0.7352031
#&gt; Mazda RX4 Wag      0.7352031
#&gt; Datsun 710        -1.1221521
#&gt; Hornet 4 Drive    -1.1221521
#&gt; Hornet Sportabout -0.5030337
#&gt; Valiant           -1.1221521</div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='fu'>STD</span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span><span class='op'>)</span>                   <span class='co'># See that is works</span>
</div><div class='output co'>#&gt;            N  Mean  SD      Min     Max
#&gt; STD.mpg   32    -0   1  -1.6079  2.2913
#&gt; STD.cyl   32     0   1  -1.2249  1.0149
#&gt; STD.disp  32    -0   1  -1.2879  1.9468
#&gt; STD.hp    32     0   1   -1.381  2.7466
#&gt; STD.drat  32    -0   1  -1.5646  2.4939
#&gt; STD.wt    32    -0   1  -1.7418  2.2553
#&gt; STD.qsec  32     0   1   -1.874  2.8268
#&gt; STD.vs    32     0   1   -0.868   1.116
#&gt; STD.am    32    -0   1  -0.8141  1.1899
#&gt; STD.gear  32     0   1  -0.9318  1.7789
#&gt; STD.carb  32    -0   1  -1.1222  3.2117</div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='fu'>STD</span><span class='op'>(</span><span class='va'>mtcars</span>, mean <span class='op'>=</span> <span class='fl'>5</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Assigning a mean of 5 and a standard deviation of 3</span>
</div><div class='output co'>#&gt;            N  Mean  SD      Min      Max
#&gt; STD.mpg   32     5   3   0.1764  11.8738
#&gt; STD.cyl   32     5   3   1.3254   8.0446
#&gt; STD.disp  32     5   3   1.1363  10.8403
#&gt; STD.hp    32     5   3   0.8569  13.2397
#&gt; STD.drat  32     5   3   0.3062  12.4817
#&gt; STD.wt    32     5   3  -0.2253   11.766
#&gt; STD.qsec  32     5   3   -0.622  13.4803
#&gt; STD.vs    32     5   3   2.3959   8.3481
#&gt; STD.am    32     5   3   2.5576   8.5697
#&gt; STD.gear  32     5   3   2.2045  10.3368
#&gt; STD.carb  32     5   3   1.6335   14.635</div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='fu'>STD</span><span class='op'>(</span><span class='va'>mtcars</span>, mean <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># No centering: Scaling is mean-preserving</span>
</div><div class='output co'>#&gt;            N      Mean  SD       Min       Max
#&gt; STD.mpg   32   20.0906   1   18.4827   22.3819
#&gt; STD.cyl   32    6.1875   1    4.9626    7.2024
#&gt; STD.disp  32  230.7219   1   229.434  232.6686
#&gt; STD.hp    32  146.6875   1  145.3065  149.4341
#&gt; STD.drat  32    3.5966   1     2.032    6.0905
#&gt; STD.wt    32    3.2172   1    1.4755    5.4726
#&gt; STD.qsec  32   17.8487   1   15.9747   20.6755
#&gt; STD.vs    32    0.4375   1   -0.4305    1.5535
#&gt; STD.am    32    0.4062   1   -0.4079    1.5962
#&gt; STD.gear  32    3.6875   1    2.7557    5.4664
#&gt; STD.carb  32    2.8125   1    1.6903    6.0242</div><div class='input'>
<span class='co'>## Panel Data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>fscale</span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>,<span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>iso3c</span><span class='op'>)</span><span class='op'>)</span>   <span class='co'># Standardizing 4 series within each country</span>
</div><div class='output co'>#&gt;   PCGDP    LIFEEX GINI        ODA
#&gt; 1    NA -1.551093   NA -0.6132859
#&gt; 2    NA -1.506322   NA -0.5543146
#&gt; 3    NA -1.462247   NA -0.6130676
#&gt; 4    NA -1.418570   NA -0.5527772
#&gt; 5    NA -1.375191   NA -0.5200308
#&gt; 6    NA -1.331912   NA -0.4864215</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>STD</span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>iso3c</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>              <span class='co'># Same thing using STD, id's added</span>
</div><div class='output co'>#&gt;   iso3c STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA
#&gt; 1   AFG        NA  -1.551093       NA -0.6132859
#&gt; 2   AFG        NA  -1.506322       NA -0.5543146
#&gt; 3   AFG        NA  -1.462247       NA -0.6130676
#&gt; 4   AFG        NA  -1.418570       NA -0.5527772
#&gt; 5   AFG        NA  -1.375191       NA -0.5200308
#&gt; 6   AFG        NA  -1.331912       NA -0.4864215</div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'>fscale</span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>,<span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>iso3c</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Correlaing panel series after standardizing</span>
</div><div class='output co'>#&gt;        PCGDP LIFEEX  GINI   ODA
#&gt; PCGDP     1     .60  -.21   .05
#&gt; LIFEEX   .60     1   -.09   .30
#&gt; GINI    -.21   -.09    1   -.03
#&gt; ODA      .05    .30  -.03    1 </div><div class='input'>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>                       <span class='co'># This calculates the overall means</span>
</div><div class='output co'>#&gt;        PCGDP       LIFEEX         GINI          ODA 
#&gt; 1.156365e+04 6.384109e+01 3.939757e+01 4.287465e+08 </div><div class='input'><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>iso3c</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># This calculates the within standard deviations</span>
</div><div class='output co'>#&gt;        PCGDP       LIFEEX         GINI          ODA 
#&gt; 6.334952e+03 5.829248e+00 3.040647e+00 6.070240e+08 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='fu'>fscale</span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>,             <span class='co'># This group-centers on the overall mean and</span>
    <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>iso3c</span>,                                   <span class='co'># group-scales to the within standard deviation</span>
    mean <span class='op'>=</span> <span class='st'>"overall.mean"</span>, sd <span class='op'>=</span> <span class='st'>"within.sd"</span><span class='op'>)</span>,       <span class='co'># -&gt; data harmonized in the first 2 moments</span>
    by <span class='op'>=</span> <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>iso3c</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; , , PCGDP
#&gt; 
#&gt;       N        Mean         SD          Min         Max
#&gt; ABW  32  11563.6529  6334.9523  -11684.3802  19256.8244
#&gt; AFG  16  11563.6529  6334.9523    3001.7971    18493.53
#&gt; AGO  38  11563.6529  6334.9523      58.6091  22218.6163
#&gt; ALB  38  11563.6529  6334.9523    3046.7453  23022.1251
#&gt; AND  48  11563.6529  6334.9523     803.0491  25506.1511
#&gt; ARE  43  11563.6529  6334.9523    3061.0074  25309.0701
#&gt; 
#&gt; , , LIFEEX
#&gt; 
#&gt;       N     Mean      SD      Min      Max
#&gt; ABW  57  63.8411  5.8292   50.106  71.2163
#&gt; AFG  57  63.8411  5.8292  54.7994  72.7759
#&gt; AGO  57  63.8411  5.8292  56.0748  75.7701
#&gt; ALB  57  63.8411  5.8292  50.9166  73.5876
#&gt; AND   0        0       -        0        0
#&gt; ARE  57  63.8411  5.8292  50.0791  70.6117
#&gt; 
#&gt; , , GINI
#&gt; 
#&gt;      N     Mean      SD      Min      Max
#&gt; ABW  0        0       -        0        0
#&gt; AFG  0        0       -        0        0
#&gt; AGO  2  39.3976  3.0406  41.5476  41.5476
#&gt; ALB  5  39.3976  3.0406  34.8534  42.8826
#&gt; AND  0        0       -        0        0
#&gt; ARE  0        0       -        0        0
#&gt; 
#&gt; , , ODA
#&gt; 
#&gt;       N        Mean          SD          Min             Max
#&gt; ABW  20  428,746468  607,024040  -557,600788  1.82207583e+09
#&gt; AFG  58  428,746468  607,024040  23,280279.7  1.95895363e+09
#&gt; AGO  56  428,746468  607,024040  -264,229614  3.10365038e+09
#&gt; ALB  30  428,746468  607,024040  -815,513556  1.94166639e+09
#&gt; AND   0           0           -            0               0
#&gt; ARE  45  428,746468  607,024040  -156,627600  3.56976530e+09
#&gt; </div><div class='input'>
 
<span class='co'>## Using plm</span>
<span class='va'>pwlddev</span> <span class='op'>&lt;-</span> <span class='fu'>plm</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/plm/man/pdata.frame.html'>pdata.frame</a></span><span class='op'>(</span><span class='va'>wlddev</span>, index <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"iso3c"</span>,<span class='st'>"year"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>STD</span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>)</span><span class='op'>)</span>                                  <span class='co'># Standardizing all numeric variables by country</span>
</div><div class='output co'>#&gt;          iso3c year STD.decade STD.PCGDP STD.LIFEEX STD.GINI STD.ODA
#&gt; ABW-1960   ABW 1960  -1.629936        NA  -2.356240       NA      NA
#&gt; ABW-1961   ABW 1961  -1.629936        NA  -2.207971       NA      NA
#&gt; ABW-1962   ABW 1962  -1.629936        NA  -2.074817       NA      NA
#&gt; ABW-1963   ABW 1963  -1.629936        NA  -1.951379       NA      NA
#&gt; ABW-1964   ABW 1964  -1.629936        NA  -1.834059       NA      NA
#&gt; ABW-1965   ABW 1965  -1.629936        NA  -1.718179       NA      NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>STD</span><span class='op'>(</span><span class='va'>pwlddev</span>, effect <span class='op'>=</span> <span class='fl'>2L</span><span class='op'>)</span><span class='op'>)</span>                     <span class='co'># Standardizing all numeric variables by year</span>
</div><div class='output co'>#&gt;          iso3c year STD.decade STD.PCGDP STD.LIFEEX STD.GINI STD.ODA
#&gt; ABW-1960   ABW 1960        NaN        NA  0.9653371       NA      NA
#&gt; ABW-1961   ABW 1961        NaN        NA  0.9521446       NA      NA
#&gt; ABW-1962   ABW 1962        NaN        NA  0.9613612       NA      NA
#&gt; ABW-1963   ABW 1963        NaN        NA  0.9690544       NA      NA
#&gt; ABW-1964   ABW 1964        NaN        NA  0.9592609       NA      NA
#&gt; ABW-1965   ABW 1965        NaN        NA  0.9563056       NA      NA</div><div class='input'>
<span class='co'>## Weighted Standardizing</span>
<span class='va'>weights</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>fscale</span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>,<span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>iso3c</span>, <span class='va'>weights</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   PCGDP    LIFEEX GINI        ODA
#&gt; 1    NA -1.569523   NA -0.6868124
#&gt; 2    NA -1.526868   NA -0.6333788
#&gt; 3    NA -1.484877   NA -0.6866147
#&gt; 4    NA -1.443264   NA -0.6319858
#&gt; 5    NA -1.401936   NA -0.6023144
#&gt; 6    NA -1.360703   NA -0.5718611</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>STD</span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>iso3c</span>, <span class='va'>weights</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   iso3c STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA
#&gt; 1   AFG        NA  -1.569523       NA -0.6868124
#&gt; 2   AFG        NA  -1.526868       NA -0.6333788
#&gt; 3   AFG        NA  -1.484877       NA -0.6866147
#&gt; 4   AFG        NA  -1.443264       NA -0.6319858
#&gt; 5   AFG        NA  -1.401936       NA -0.6023144
#&gt; 6   AFG        NA  -1.360703       NA -0.5718611</div><div class='input'>
<span class='co'># Using dplyr</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>iso3c</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>PCGDP</span>,<span class='va'>LIFEEX</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>STD</span>
</div><div class='output co'>#&gt; <span class='message'>Adding missing grouping variables: `iso3c`</span></div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 12,744 x 3</span><span>
#&gt; </span><span style='color: #949494;'># Groups:   iso3c [216]</span><span>
#&gt;    iso3c STD.PCGDP STD.LIFEEX
#&gt;  </span><span style='color: #BCBCBC;'>*</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>      </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.55</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.51</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.46</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.42</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.38</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.33</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.29</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.25</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.20</span><span>
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.16</span><span>
#&gt; </span><span style='color: #949494;'># ... with 12,734 more rows</span><span></div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>iso3c</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>PCGDP</span>,<span class='va'>LIFEEX</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>STD</span><span class='op'>(</span><span class='va'>weights</span><span class='op'>)</span> <span class='co'># weighted standardizing</span>
</div><div class='output co'>#&gt; <span class='message'>Adding missing grouping variables: `iso3c`</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 12,744 x 3</span><span>
#&gt; </span><span style='color: #949494;'># Groups:   iso3c [216]</span><span>
#&gt;    iso3c STD.PCGDP STD.LIFEEX
#&gt;  </span><span style='color: #BCBCBC;'>*</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>      </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.57</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.53</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.48</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.44</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.40</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.36</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.32</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.28</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.24</span><span>
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> AFG          </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>1.20</span><span>
#&gt; </span><span style='color: #949494;'># ... with 12,734 more rows</span><span></div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>iso3c</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>PCGDP</span>,<span class='va'>LIFEEX</span>,<span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>STD</span><span class='op'>(</span><span class='va'>ODA</span><span class='op'>)</span> <span class='co'># weighting by ODA -&gt;</span>
</div><div class='output co'>#&gt; <span class='message'>Adding missing grouping variables: `iso3c`</span></div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 12,744 x 4</span><span>
#&gt; </span><span style='color: #949494;'># Groups:   iso3c [216]</span><span>
#&gt;    iso3c       ODA STD.PCGDP STD.LIFEEX
#&gt;  </span><span style='color: #BCBCBC;'>*</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>      </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> AFG   114</span><span style='text-decoration: underline;'>440</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>4.15</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> AFG   233</span><span style='text-decoration: underline;'>350</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>4.08</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> AFG   114</span><span style='text-decoration: underline;'>880</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>4.02</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> AFG   236</span><span style='text-decoration: underline;'>450</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>3.95</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> AFG   302</span><span style='text-decoration: underline;'>480</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>3.88</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> AFG   370</span><span style='text-decoration: underline;'>250</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>3.81</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> AFG   338</span><span style='text-decoration: underline;'>270</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>3.74</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> AFG   259</span><span style='text-decoration: underline;'>230</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>3.68</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> AFG   182</span><span style='text-decoration: underline;'>000</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>3.61</span><span>
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> AFG   162</span><span style='text-decoration: underline;'>680</span><span>000        </span><span style='color: #BB0000;'>NA</span><span>      -</span><span style='color: #BB0000;'>3.54</span><span>
#&gt; </span><span style='color: #949494;'># ... with 12,734 more rows</span><span></div><div class='input'><span class='co'># ..keeps the weight column unless keep.w = FALSE</span>

</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


